/*
 * viewhome.min.js  version 5.7
 *
 * Sweet Home 3D, Copyright (c) 2016 Emmanuel PUYBARET / eTeks <info@eteks.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var HomeXMLHandler=(function(b){__extends(a,b);function a(c){var g=this;if(((c!=null&&c instanceof UserPreferences)||c===null)){var f=Array.prototype.slice.call(arguments);g=b.call(this)||this;g.preferences=null;g.home=null;g.homeElementName=null;g.labelText=null;g.leftSideBaseboard=null;g.rightSideBaseboard=null;g.homeBackgroundImage=null;g.backgroundImage=null;g.materialTexture=null;g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.levels=({});g.joinedWalls=({});g.homeProperties=({});g.properties=({});g.textStyles=({});g.textures=({});g.materials=([]);g.sashes=([]);g.lightSources=([]);g.points=([]);g.furnitureVisibleProperties=([]);g.preferences=null;g.home=null;g.homeElementName=null;g.labelText=null;g.leftSideBaseboard=null;g.rightSideBaseboard=null;g.homeBackgroundImage=null;g.backgroundImage=null;g.materialTexture=null;(function(){g.preferences=c!=null?c:new UserPreferences()})()}else{if(c===undefined){var f=Array.prototype.slice.call(arguments);var d=Array.prototype.slice.call(arguments);var e=null;g=b.call(this)||this;g.preferences=null;g.home=null;g.homeElementName=null;g.labelText=null;g.leftSideBaseboard=null;g.rightSideBaseboard=null;g.homeBackgroundImage=null;g.backgroundImage=null;g.materialTexture=null;g.buffer={str:"",toString:function(){return this.str}};g.elements=([]);g.attributes=([]);g.groupsFurniture=([]);g.levels=({});g.joinedWalls=({});g.homeProperties=({});g.properties=({});g.textStyles=({});g.textures=({});g.materials=([]);g.sashes=([]);g.lightSources=([]);g.points=([]);g.furnitureVisibleProperties=([]);g.preferences=null;g.home=null;g.homeElementName=null;g.labelText=null;g.leftSideBaseboard=null;g.rightSideBaseboard=null;g.homeBackgroundImage=null;g.backgroundImage=null;g.materialTexture=null;(function(){g.preferences=e!=null?e:new UserPreferences()})()}else{throw new Error("invalid overload")}}return g}a.prototype.startDocument=function(){this.home=null;(this.elements.length=0);(this.attributes.length=0);(this.groupsFurniture.length=0);(function(c){for(var d in c){delete c[d]}})(this.levels);(function(c){for(var d in c){delete c[d]}})(this.joinedWalls)};a.prototype.startElement=function(h,d,f,c){(function(j,i){return j.str=j.str.substring(0,i)})(this.buffer,0);(this.elements.push(f)>0);var e=({});for(var g=0;g<c.getLength();g++){(e[c.getQName(g)]=c.getValue(g).replace("&quot;",'"').replace("&lt;","<").replace("&gt;",">").replace("&amp;","&"))}(this.attributes.push(e)>0);if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("home",f)){this.setHome(this.createHome(f,e));(function(i){for(var j in i){delete i[j]}})(this.homeProperties);(this.furnitureVisibleProperties.length=0);this.homeBackgroundImage=null}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("environment",f)){(function(i){for(var j in i){delete i[j]}})(this.textures)}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("compass",f)){(function(i){for(var j in i){delete i[j]}})(this.properties)}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("level",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);this.backgroundImage=null}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("pieceOfFurniture",f)||(function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("doorOrWindow",f)||(function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("light",f)||(function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("furnitureGroup",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);(function(i){for(var j in i){delete i[j]}})(this.textStyles);(function(i){for(var j in i){delete i[j]}})(this.textures);(this.materials.length=0);(this.sashes.length=0);(this.lightSources.length=0);if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("furnitureGroup",f)){(this.groupsFurniture.push([])>0)}}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("camera",f)||(function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("observerCamera",f)){(function(i){for(var j in i){delete i[j]}})(this.properties)}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("room",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);(function(i){for(var j in i){delete i[j]}})(this.textStyles);(function(i){for(var j in i){delete i[j]}})(this.textures);(this.points.length=0)}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("polyline",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);(this.points.length=0)}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("dimensionLine",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);(function(i){for(var j in i){delete i[j]}})(this.textStyles)}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("label",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);(function(i){for(var j in i){delete i[j]}})(this.textStyles);this.labelText=null}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("wall",f)){(function(i){for(var j in i){delete i[j]}})(this.properties);(function(i){for(var j in i){delete i[j]}})(this.textures);this.leftSideBaseboard=null;this.rightSideBaseboard=null}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("baseboard",f)){delete this.textures[a.UNIQUE_ATTRIBUTE]}else{if((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("material",f)){this.materialTexture=null}}}}}}}}}}}}}};a.prototype.characters=function(c,e,d){(function(f){f.str=f.str.concat(c.substr(e,d));return f})(this.buffer)};a.prototype.endElement=function(k,g,z){this.elements.pop();var n=(this.elements.length==0)?null:(function(A){return A[A.length-1]})(this.elements);var t=this.attributes.pop();if(this.homeElementName!=null&&(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})(this.homeElementName,z)){this.setHomeAttributes(this.home,z,t)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("furnitureVisibleProperty",z)){try{if((function(A,B){return A[B]?A[B]:null})(t,"name")==null){throw new SAXException("Missing name attribute")}(this.furnitureVisibleProperties.push((function(A,B){return A[B]?A[B]:null})(t,"name"))>0)}catch(v){}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("environment",z)){this.setEnvironmentAttributes(this.home.getEnvironment(),z,t)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("compass",z)){this.setCompassAttributes(this.home.getCompass(),z,t)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("print",z)){this.home.setPrint(this.createPrint(t))}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("level",z)){var c=this.createLevel(z,t);this.setLevelAttributes(c,z,t);(this.levels[(function(A,B){return A[B]?A[B]:null})(t,"id")]=c);this.home.addLevel(c)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("camera",z)||(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("observerCamera",z)){var u=this.createCamera(z,t);this.setCameraAttributes(u,z,t);var o=(function(A,B){return A[B]?A[B]:null})(t,"attribute");if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("cameraPath",o)){var s=(this.home.getEnvironment().getVideoCameraPath().slice(0));(s.push(u)>0);this.home.getEnvironment().setVideoCameraPath(s)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("topCamera",o)){var h=this.home.getTopCamera();h.setCamera(u);h.setTime(u.getTime());h.setLens(u.getLens())}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("observerCamera",o)){var y=this.home.getObserverCamera();y.setCamera(u);y.setTime(u.getTime());y.setLens(u.getLens());y.setFixedSize(u.isFixedSize())}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("storedCamera",o)){var q=(this.home.getStoredCameras().slice(0));(q.push(u)>0);this.home.setStoredCameras(q)}}}}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("pieceOfFurniture",z)||(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("doorOrWindow",z)||(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("light",z)||(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("furnitureGroup",z)){var e=(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("furnitureGroup",z)?this.createFurnitureGroup(z,t,this.groupsFurniture.pop()):this.createPieceOfFurniture(z,t);this.setPieceOfFurnitureAttributes(e,z,t);if(this.homeElementName!=null&&(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})(this.homeElementName,n)){this.home.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(e);var f=(function(A,B){return A[B]?A[B]:null})(t,"level");if(f!=null){e.setLevel((function(A,B){return A[B]?A[B]:null})(this.levels,f))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("furnitureGroup",n)){((function(A){return A[A.length-1]})(this.groupsFurniture).push(e)>0);(function(A){for(var B in A){delete A[B]}})(this.properties);(function(A){for(var B in A){delete A[B]}})(this.textStyles)}}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("wall",z)){var x=this.createWall(z,t);(this.joinedWalls[(function(A,B){return A[B]?A[B]:null})(t,"id")]=new a.JoinedWall(x,(function(A,B){return A[B]?A[B]:null})(t,"wallAtStart"),(function(A,B){return A[B]?A[B]:null})(t,"wallAtEnd")));this.setWallAttributes(x,z,t);this.home.addWall(x);var f=(function(A,B){return A[B]?A[B]:null})(t,"level");if(f!=null){x.setLevel((function(A,B){return A[B]?A[B]:null})(this.levels,f))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("baseboard",z)){var l=this.createBaseboard(z,t);if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("leftSideBaseboard",(function(A,B){return A[B]?A[B]:null})(t,"attribute"))){this.leftSideBaseboard=l}else{this.rightSideBaseboard=l}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("room",z)){var w=this.createRoom(z,t,this.points.slice(0));this.setRoomAttributes(w,z,t);this.home.addRoom$com_eteks_sweethome3d_model_Room(w);var f=(function(A,B){return A[B]?A[B]:null})(t,"level");if(f!=null){w.setLevel((function(A,B){return A[B]?A[B]:null})(this.levels,f))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("polyline",z)){var p=this.createPolyline(z,t,this.points.slice(0));this.setPolylineAttributes(p,z,t);this.home.addPolyline$com_eteks_sweethome3d_model_Polyline(p);var f=(function(A,B){return A[B]?A[B]:null})(t,"level");if(f!=null){p.setLevel((function(A,B){return A[B]?A[B]:null})(this.levels,f))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("dimensionLine",z)){var j=this.createDimensionLine(z,t);this.setDimensionLineAttributes(j,z,t);this.home.addDimensionLine(j);var f=(function(A,B){return A[B]?A[B]:null})(t,"level");if(f!=null){j.setLevel((function(A,B){return A[B]?A[B]:null})(this.levels,f))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("label",z)){var m=this.createLabel(z,t,this.labelText);this.setLabelAttributes(m,z,t);this.home.addLabel(m);var f=(function(A,B){return A[B]?A[B]:null})(t,"level");if(f!=null){m.setLevel((function(A,B){return A[B]?A[B]:null})(this.levels,f))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("text",z)){this.labelText=this.getCharacters()}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("textStyle",z)){var o=(function(A,B){return A[B]?A[B]:null})(t,"attribute");(this.textStyles[o!=null?o:a.UNIQUE_ATTRIBUTE]=this.createTextStyle(z,t))}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("texture",z)){if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("material",n)){this.materialTexture=this.createTexture(z,t)}else{var o=(function(A,B){return A[B]?A[B]:null})(t,"attribute");(this.textures[o!=null?o:a.UNIQUE_ATTRIBUTE]=this.createTexture(z,t))}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("material",z)){(this.materials.push(this.createMaterial(z,t))>0)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("point",z)){(this.points.push([this.parseFloat(t,"x"),this.parseFloat(t,"y")])>0)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("sash",z)){var r=new Sash(this.parseFloat(t,"xAxis"),this.parseFloat(t,"yAxis"),this.parseFloat(t,"width"),this.parseFloat(t,"startAngle"),this.parseFloat(t,"endAngle"));(this.sashes.push(this.resolveObject(r,z,t))>0)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("lightSource",z)){var i=new LightSource(this.parseFloat(t,"x"),this.parseFloat(t,"y"),this.parseFloat(t,"z"),this.parseOptionalColor(t,"color"),this.parseOptionalFloat(t,"diameter"));(this.lightSources.push(this.resolveObject(i,z,t))>0)}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("backgroundImage",z)){var d=new BackgroundImage(this.parseContent((function(A,B){return A[B]?A[B]:null})(t,"image"),null),this.parseFloat(t,"scaleDistance"),this.parseFloat(t,"scaleDistanceXStart"),this.parseFloat(t,"scaleDistanceYStart"),this.parseFloat(t,"scaleDistanceXEnd"),this.parseFloat(t,"scaleDistanceYEnd"),(function(A,B){return A[B]?A[B]:null})(t,"xOrigin")!=null?this.parseFloat(t,"xOrigin"):0,(function(A,B){return A[B]?A[B]:null})(t,"yOrigin")!=null?this.parseFloat(t,"yOrigin"):0,!(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("false",(function(A,B){return A[B]?A[B]:null})(t,"visible")));d=this.resolveObject(d,z,t);if(this.homeElementName!=null&&(function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})(this.homeElementName,n)){this.homeBackgroundImage=d}else{this.backgroundImage=d}}else{if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})("property",z)){if(this.homeElementName!=null){if((function(B,A){if(B&&B.equals){return B.equals(A)}else{return B===A}})(this.homeElementName,n)){(this.homeProperties[(function(A,B){return A[B]?A[B]:null})(t,"name")]=(function(A,B){return A[B]?A[B]:null})(t,"value"))}else{(this.properties[(function(A,B){return A[B]?A[B]:null})(t,"name")]=(function(A,B){return A[B]?A[B]:null})(t,"value"))}}}}}}}}}}}}}}}}}}}}}}}}}};a.prototype.getCharacters=function(){return this.buffer.str.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};a.prototype.endDocument=function(){var e=(function(i){return Object.keys(i).map(function(j){return i[j]})})(this.joinedWalls);for(var h=0;h<e.length;h++){var f=e[h];var c=f.getWall();if(f.getWallAtStartId()!=null){var d=(function(i,j){return i[j]?i[j]:null})(this.joinedWalls,f.getWallAtStartId());if(d!=null){c.setWallAtStart(d.getWall())}}if(f.getWallAtEndId()!=null){var g=(function(i,j){return i[j]?i[j]:null})(this.joinedWalls,f.getWallAtEndId());if(g!=null){c.setWallAtEnd(g.getWall())}}}};a.prototype.resolveObject=function(e,c,d){return e};a.prototype.createHome=function(c,e){var g;if((function(h,i){return h[i]?h[i]:null})(e,"wallHeight")!=null){g=new Home(this.parseFloat(e,"wallHeight"))}else{g=new Home()}var d=(function(h,i){return h[i]?h[i]:null})(e,"version");if(d!=null){try{g.setVersion(parseInt(d))}catch(f){throw new SAXException("Invalid value for integer attribute version",f)}}return this.resolveObject(g,c,e)};a.prototype.setHomeAttributes=function(h,k,d){var e=(function(n){var l=[];for(var m in n){l.push({k:m,v:n[m],getKey:function(){return this.k},getValue:function(){return this.v}})}return l})(this.homeProperties);for(var f=0;f<e.length;f++){var j=e[f];h.setProperty(j.getKey(),j.getValue())}if(this.furnitureVisibleProperties.length>0){this.home.setFurnitureVisibleProperties(this.furnitureVisibleProperties)}this.home.setBackgroundImage(this.homeBackgroundImage);h.setName((function(l,n){return l[n]?l[n]:null})(d,"name"));var i=(function(l,n){return l[n]?l[n]:null})(d,"selectedLevel");if(i!=null){this.home.setSelectedLevel((function(l,n){return l[n]?l[n]:null})(this.levels,i))}if((function(m,l){if(m&&m.equals){return m.equals(l)}else{return m===l}})("observerCamera",(function(l,n){return l[n]?l[n]:null})(d,"camera"))){this.home.setCamera(this.home.getObserverCamera())}h.setBasePlanLocked((function(m,l){if(m&&m.equals){return m.equals(l)}else{return m===l}})("true",(function(l,n){return l[n]?l[n]:null})(d,"basePlanLocked")));var c=(function(l,n){return l[n]?l[n]:null})(d,"furnitureSortedProperty");if(c!=null){try{h.setFurnitureSortedProperty(c)}catch(g){}}h.setFurnitureDescendingSorted((function(m,l){if(m&&m.equals){return m.equals(l)}else{return m===l}})("true",(function(l,n){return l[n]?l[n]:null})(d,"furnitureDescendingSorted")));if(d.structure){h.structure=this.parseContent(d.structure,null)}};a.prototype.setEnvironmentAttributes=function(s,j,h){var t=this.parseOptionalColor(h,"groundColor");if(t!=null){s.setGroundColor(t)}s.setGroundTexture((function(v,w){return v[w]?v[w]:null})(this.textures,"groundTexture"));var q=this.parseOptionalColor(h,"skyColor");if(q!=null){s.setSkyColor(q)}s.setSkyTexture((function(v,w){return v[w]?v[w]:null})(this.textures,"skyTexture"));var l=this.parseOptionalColor(h,"lightColor");if(l!=null){s.setLightColor(l)}var i=this.parseOptionalFloat(h,"wallsAlpha");if(i!=null){s.setWallsAlpha(i)}s.setAllLevelsVisible((function(w,v){if(w&&w.equals){return w.equals(v)}else{return w===v}})("true",(function(v,w){return v[w]?v[w]:null})(h,"allLevelsVisible")));s.setObserverCameraElevationAdjusted(!(function(w,v){if(w&&w.equals){return w.equals(v)}else{return w===v}})("false",(function(v,w){return v[w]?v[w]:null})(h,"observerCameraElevationAdjusted")));var d=this.parseOptionalColor(h,"ceillingLightColor");if(d!=null){s.setCeillingLightColor(d)}var c=(function(v,w){return v[w]?v[w]:null})(h,"drawingMode");if(c!=null){try{s.setDrawingMode(HomeEnvironment.DrawingMode[c])}catch(o){}}var g=this.parseOptionalFloat(h,"subpartSizeUnderLight");if(g!=null){s.setSubpartSizeUnderLight(g)}var n=this.parseOptionalInteger(h,"photoWidth");if(n!=null){s.setPhotoWidth(n)}var m=this.parseOptionalInteger(h,"photoHeight");if(m!=null){s.setPhotoHeight(m)}var p=(function(v,w){return v[w]?v[w]:null})(h,"photoAspectRatio");if(p!=null){try{s.setPhotoAspectRatio(AspectRatio[p])}catch(o){}}var u=this.parseOptionalInteger(h,"photoQuality");if(u!=null){s.setPhotoQuality(u)}var f=this.parseOptionalInteger(h,"videoWidth");if(f!=null){s.setVideoWidth(f)}var e=(function(v,w){return v[w]?v[w]:null})(h,"videoAspectRatio");if(e!=null){try{s.setVideoAspectRatio(AspectRatio[e])}catch(o){}}var r=this.parseOptionalInteger(h,"videoQuality");if(r!=null){s.setVideoQuality(r)}var k=this.parseOptionalInteger(h,"videoFrameRate");if(k!=null){s.setVideoFrameRate(k)}};a.prototype.createPrint=function(c){var f=HomePrint.PaperOrientation.PORTRAIT;try{if((function(g,h){return g[h]?g[h]:null})(c,"paperOrientation")==null){throw new SAXException("Missing paperOrientation attribute")}f=HomePrint.PaperOrientation[(function(g,h){return g[h]?g[h]:null})(c,"paperOrientation")]}catch(e){}var d=new HomePrint(f,this.parseFloat(c,"paperWidth"),this.parseFloat(c,"paperHeight"),this.parseFloat(c,"paperTopMargin"),this.parseFloat(c,"paperLeftMargin"),this.parseFloat(c,"paperBottomMargin"),this.parseFloat(c,"paperRightMargin"),!(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("false",(function(g,h){return g[h]?g[h]:null})(c,"furniturePrinted")),!(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("false",(function(g,h){return g[h]?g[h]:null})(c,"planPrinted")),!(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("false",(function(g,h){return g[h]?g[h]:null})(c,"view3DPrinted")),this.parseOptionalFloat(c,"planScale"),(function(g,h){return g[h]?g[h]:null})(c,"headerFormat"),(function(g,h){return g[h]?g[h]:null})(c,"footerFormat"));return this.resolveObject(d,"print",c)};a.prototype.setCompassAttributes=function(g,c,d){this.setProperties(g);g.setX(this.parseOptionalFloat(d,"x"));g.setY(this.parseOptionalFloat(d,"y"));g.setDiameter(this.parseOptionalFloat(d,"diameter"));var f=this.parseOptionalFloat(d,"northDirection");if(f!=null){g.setNorthDirection(f)}var h=this.parseOptionalFloat(d,"longitude");if(h!=null){g.setLongitude(h)}var i=this.parseOptionalFloat(d,"latitude");if(i!=null){g.setLatitude(i)}var e=(function(j,l){return j[l]?j[l]:null})(d,"timeZone");if(e!=null){g.setTimeZone(e)}g.setVisible(!(function(k,j){if(k&&k.equals){return k.equals(j)}else{return k===j}})("false",(function(j,l){return j[l]?j[l]:null})(d,"visible")))};a.prototype.createCamera=function(c,d){var e;if((function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("observerCamera",c)){e=new ObserverCamera(this.parseFloat(d,"x"),this.parseFloat(d,"y"),this.parseFloat(d,"z"),this.parseFloat(d,"yaw"),this.parseFloat(d,"pitch"),this.parseFloat(d,"fieldOfView"))}else{e=new Camera(this.parseFloat(d,"x"),this.parseFloat(d,"y"),this.parseFloat(d,"z"),this.parseFloat(d,"yaw"),this.parseFloat(d,"pitch"),this.parseFloat(d,"fieldOfView"))}return this.resolveObject(e,c,d)};a.prototype.setCameraAttributes=function(g,c,d){this.setProperties(g);if(g!=null&&g instanceof ObserverCamera){g.setFixedSize((function(j,i){if(j&&j.equals){return j.equals(i)}else{return j===i}})("true",(function(i,j){return i[j]?i[j]:null})(d,"fixedSize")))}var e=(function(i,j){return i[j]?i[j]:null})(d,"lens");if(e!=null){try{g.setLens(Camera.Lens[e])}catch(f){}}var h=(function(i,j){return i[j]?i[j]:null})(d,"time");if(h!=null){try{g.setTime(parseInt(h))}catch(f){throw new SAXException("Invalid value for long attribute time",f)}}g.setName((function(i,j){return i[j]?i[j]:null})(d,"name"))};a.prototype.createLevel=function(c,d){var e=new Level((function(f,g){return f[g]?f[g]:null})(d,"name"),this.parseFloat(d,"elevation"),this.parseFloat(d,"floorThickness"),this.parseFloat(d,"height"));return this.resolveObject(e,c,d)};a.prototype.setLevelAttributes=function(f,c,e){this.setProperties(f);f.setBackgroundImage(this.backgroundImage);var d=this.parseOptionalInteger(e,"elevationIndex");if(d!=null){f.setElevationIndex(d)}f.setVisible(!(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("false",(function(g,h){return g[h]?g[h]:null})(e,"visible")));f.setViewable(!(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("false",(function(g,h){return g[h]?g[h]:null})(e,"viewable")))};a.prototype.createPieceOfFurniture=function(o,f){var e=(function(p,q){return p[q]?p[q]:null})(f,"catalogId");var n=(function(p,q){return p[q]?p[q]:null})(f,"tags")!=null?(function(p,q){return p[q]?p[q]:null})(f,"tags").split(" "):null;var l=(function(p,q){return p[q]?p[q]:null})(f,"elevation")!=null?this.parseFloat(f,"elevation"):0;var d=(function(p,q){return p[q]?p[q]:null})(f,"dropOnTopElevation")!=null?this.parseFloat(f,"dropOnTopElevation"):1;var c=null;if((function(p,q){return p[q]?p[q]:null})(f,"modelRotation")!=null){var k=(function(p,q){return p[q]?p[q]:null})(f,"modelRotation").split(" ",9);if(k.length<9){throw new SAXException("Missing values for attribute modelRotation")}try{c=[[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])],[parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])],[parseFloat(k[6]),parseFloat(k[7]),parseFloat(k[8])]]}catch(i){throw new SAXException("Invalid value for attribute modelRotation",i)}}var m;if((function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("doorOrWindow",o)||(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("true",(function(p,q){return p[q]?p[q]:null})(f,"doorOrWindow"))){var h=(function(p,q){return p[q]?p[q]:null})(f,"wallThickness")!=null?this.parseFloat(f,"wallThickness"):1;var j=(function(p,q){return p[q]?p[q]:null})(f,"wallDistance")!=null?this.parseFloat(f,"wallDistance"):0;var g=(function(p,q){return p[q]?p[q]:null})(f,"cutOutShape");if(g==null&&!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("doorOrWindow",o)){g="M0,0 v1 h1 v-1 z"}m=new HomeDoorOrWindow(new CatalogDoorOrWindow(e,(function(p,q){return p[q]?p[q]:null})(f,"name"),(function(p,q){return p[q]?p[q]:null})(f,"description"),(function(p,q){return p[q]?p[q]:null})(f,"information"),n,this.parseOptionalLong(f,"creationDate"),this.parseOptionalFloat(f,"grade"),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"icon"),e),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"planIcon"),e),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"model"),e),this.parseFloat(f,"width"),this.parseFloat(f,"depth"),this.parseFloat(f,"height"),l,d,!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"movable")),g,h,j,(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("true",(function(p,q){return p[q]?p[q]:null})(f,"wallCutOutOnBothSides")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"widthDepthDeformable")),this.sashes.slice(0),c,(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("true",(function(p,q){return p[q]?p[q]:null})(f,"backFaceShown")),this.parseOptionalLong(f,"modelSize"),(function(p,q){return p[q]?p[q]:null})(f,"creator"),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"resizable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"deformable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"texturable")),this.parseOptionalDecimal(f,"price"),this.parseOptionalDecimal(f,"valueAddedTaxPercentage"),(function(p,q){return p[q]?p[q]:null})(f,"currency")))}else{if((function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("light",o)){m=new HomeLight(new CatalogLight(e,(function(p,q){return p[q]?p[q]:null})(f,"name"),(function(p,q){return p[q]?p[q]:null})(f,"description"),(function(p,q){return p[q]?p[q]:null})(f,"information"),n,this.parseOptionalLong(f,"creationDate"),this.parseOptionalFloat(f,"grade"),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"icon"),e),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"planIcon"),e),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"model"),e),this.parseFloat(f,"width"),this.parseFloat(f,"depth"),this.parseFloat(f,"height"),l,d,!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"movable")),this.lightSources.slice(0),(function(p,q){return p[q]?p[q]:null})(f,"staircaseCutOutShape"),c,(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("true",(function(p,q){return p[q]?p[q]:null})(f,"backFaceShown")),this.parseOptionalLong(f,"modelSize"),(function(p,q){return p[q]?p[q]:null})(f,"creator"),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"resizable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"deformable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"texturable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"horizontallyRotatable")),this.parseOptionalDecimal(f,"price"),this.parseOptionalDecimal(f,"valueAddedTaxPercentage"),(function(p,q){return p[q]?p[q]:null})(f,"currency")))}else{m=new HomePieceOfFurniture(new CatalogPieceOfFurniture(e,(function(p,q){return p[q]?p[q]:null})(f,"name"),(function(p,q){return p[q]?p[q]:null})(f,"description"),(function(p,q){return p[q]?p[q]:null})(f,"information"),n,this.parseOptionalLong(f,"creationDate"),this.parseOptionalFloat(f,"grade"),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"icon"),e),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"planIcon"),e),this.parseContent((function(p,q){return p[q]?p[q]:null})(f,"model"),e),this.parseFloat(f,"width"),this.parseFloat(f,"depth"),this.parseFloat(f,"height"),l,d,!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"movable")),(function(p,q){return p[q]?p[q]:null})(f,"staircaseCutOutShape"),c,(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("true",(function(p,q){return p[q]?p[q]:null})(f,"backFaceShown")),this.parseOptionalLong(f,"modelSize"),(function(p,q){return p[q]?p[q]:null})(f,"creator"),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"resizable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"deformable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"texturable")),!(function(q,p){if(q&&q.equals){return q.equals(p)}else{return q===p}})("false",(function(p,q){return p[q]?p[q]:null})(f,"horizontallyRotatable")),this.parseOptionalDecimal(f,"price"),this.parseOptionalDecimal(f,"valueAddedTaxPercentage"),(function(p,q){return p[q]?p[q]:null})(f,"currency")))}}return this.resolveObject(m,o,f)};a.prototype.createFurnitureGroup=function(c,d,f){var e=new HomeFurnitureGroup(f,(function(g,h){return g[h]?g[h]:null})(d,"angle")!=null?this.parseFloat(d,"angle"):0,(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("true",(function(g,h){return g[h]?g[h]:null})(d,"modelMirrored")),(function(g,h){return g[h]?g[h]:null})(d,"name"));return this.resolveObject(e,c,d)};a.prototype.setPieceOfFurnitureAttributes=function(r,s,k){this.setProperties(r);r.setNameStyle((function(t,u){return t[u]?t[u]:null})(this.textStyles,"nameStyle"));r.setNameVisible((function(u,t){if(u&&u.equals){return u.equals(t)}else{return u===t}})("true",(function(t,u){return t[u]?t[u]:null})(k,"nameVisible")));var i=this.parseOptionalFloat(k,"nameAngle");if(i!=null){r.setNameAngle(i)}var g=this.parseOptionalFloat(k,"nameXOffset");if(g!=null){r.setNameXOffset(g)}var q=this.parseOptionalFloat(k,"nameYOffset");if(q!=null){r.setNameYOffset(q)}r.setVisible(!(function(u,t){if(u&&u.equals){return u.equals(t)}else{return u===t}})("false",(function(t,u){return t[u]?t[u]:null})(k,"visible")));if(!(r!=null&&r instanceof HomeFurnitureGroup)){var o=this.parseOptionalFloat(k,"x");if(o!=null){r.setX(o)}var n=this.parseOptionalFloat(k,"y");if(n!=null){r.setY(n)}var f=this.parseOptionalFloat(k,"angle");if(f!=null){r.setAngle(f)}if(r.isHorizontallyRotatable()){var e=this.parseOptionalFloat(k,"pitch");if(e!=null){r.setPitch(e)}var d=this.parseOptionalFloat(k,"roll");if(d!=null){r.setRoll(d)}}var m=this.parseOptionalFloat(k,"widthInPlan");if(m!=null){r.setWidthInPlan(m)}var c=this.parseOptionalFloat(k,"depthInPlan");if(c!=null){r.setDepthInPlan(c)}var j=this.parseOptionalFloat(k,"heightInPlan");if(j!=null){r.setHeightInPlan(j)}if(this.home.getVersion()<5500||(function(u,t){if(u&&u.equals){return u.equals(t)}else{return u===t}})("false",(function(t,u){return t[u]?t[u]:null})(k,"modelCenteredAtOrigin"))){r.setModelCenteredAtOrigin((function(t,u){return t[u]?t[u]:null})(k,"modelRotation")==null)}if(r.isResizable()){r.setModelMirrored((function(u,t){if(u&&u.equals){return u.equals(t)}else{return u===t}})("true",(function(t,u){return t[u]?t[u]:null})(k,"modelMirrored")))}if(r.isTexturable()){if(this.materials.length>0){r.setModelMaterials(this.materials.slice(0))}var h=this.parseOptionalColor(k,"color");if(h!=null){r.setColor(h)}var l=(function(t,u){return t[u]?t[u]:null})(this.textures,a.UNIQUE_ATTRIBUTE);if(l!=null){r.setTexture(l)}var p=this.parseOptionalFloat(k,"shininess");if(p!=null){r.setShininess(p)}}if((r!=null&&r instanceof HomeLight)&&(function(t,u){return t[u]?t[u]:null})(k,"power")!=null){r.setPower(this.parseFloat(k,"power"))}else{if((r!=null&&r instanceof HomeDoorOrWindow)&&(function(u,t){if(u&&u.equals){return u.equals(t)}else{return u===t}})("doorOrWindow",s)){r.setBoundToWall(!(function(u,t){if(u&&u.equals){return u.equals(t)}else{return u===t}})("false",(function(t,u){return t[u]?t[u]:null})(k,"boundToWall")))}}}};a.prototype.createWall=function(d,e){var c=new Wall(this.parseFloat(e,"xStart"),this.parseFloat(e,"yStart"),this.parseFloat(e,"xEnd"),this.parseFloat(e,"yEnd"),this.parseFloat(e,"thickness"),0);return this.resolveObject(c,d,e)};a.prototype.setWallAttributes=function(d,c,f){this.setProperties(d);d.setLeftSideBaseboard(this.leftSideBaseboard);d.setRightSideBaseboard(this.rightSideBaseboard);d.setHeight(this.parseOptionalFloat(f,"height"));d.setHeightAtEnd(this.parseOptionalFloat(f,"heightAtEnd"));d.setArcExtent(this.parseOptionalFloat(f,"arcExtent"));d.setTopColor(this.parseOptionalColor(f,"topColor"));d.setLeftSideColor(this.parseOptionalColor(f,"leftSideColor"));d.setLeftSideTexture((function(j,l){return j[l]?j[l]:null})(this.textures,"leftSideTexture"));var e=this.parseOptionalFloat(f,"leftSideShininess");if(e!=null){d.setLeftSideShininess(e)}d.setRightSideColor(this.parseOptionalColor(f,"rightSideColor"));d.setRightSideTexture((function(j,l){return j[l]?j[l]:null})(this.textures,"rightSideTexture"));var i=this.parseOptionalFloat(f,"rightSideShininess");if(i!=null){d.setRightSideShininess(i)}var h=(function(j,l){return j[l]?j[l]:null})(f,"pattern");if(h!=null){try{d.setPattern(this.preferences.getPatternsCatalog().getPattern$java_lang_String(h))}catch(g){}}};a.prototype.createRoom=function(c,d,e){var f=new Room(e);return this.resolveObject(f,c,d)};a.prototype.setRoomAttributes=function(c,m,f){this.setProperties(c);c.setNameStyle((function(n,o){return n[o]?n[o]:null})(this.textStyles,"nameStyle"));c.setAreaStyle((function(n,o){return n[o]?n[o]:null})(this.textStyles,"areaStyle"));c.setName((function(n,o){return n[o]?n[o]:null})(f,"name"));var e=this.parseOptionalFloat(f,"nameAngle");if(e!=null){c.setNameAngle(e)}var d=this.parseOptionalFloat(f,"nameXOffset");if(d!=null){c.setNameXOffset(d)}var j=this.parseOptionalFloat(f,"nameYOffset");if(j!=null){c.setNameYOffset(j)}c.setAreaVisible((function(o,n){if(o&&o.equals){return o.equals(n)}else{return o===n}})("true",(function(n,o){return n[o]?n[o]:null})(f,"areaVisible")));var k=this.parseOptionalFloat(f,"areaAngle");if(k!=null){c.setAreaAngle(k)}var l=this.parseOptionalFloat(f,"areaXOffset");if(l!=null){c.setAreaXOffset(l)}var g=this.parseOptionalFloat(f,"areaYOffset");if(g!=null){c.setAreaYOffset(g)}c.setFloorVisible(!(function(o,n){if(o&&o.equals){return o.equals(n)}else{return o===n}})("false",(function(n,o){return n[o]?n[o]:null})(f,"floorVisible")));c.setFloorColor(this.parseOptionalColor(f,"floorColor"));c.setFloorTexture((function(n,o){return n[o]?n[o]:null})(this.textures,"floorTexture"));var h=this.parseOptionalFloat(f,"floorShininess");if(h!=null){c.setFloorShininess(h)}c.setCeilingVisible(!(function(o,n){if(o&&o.equals){return o.equals(n)}else{return o===n}})("false",(function(n,o){return n[o]?n[o]:null})(f,"ceilingVisible")));c.setCeilingColor(this.parseOptionalColor(f,"ceilingColor"));c.setCeilingTexture((function(n,o){return n[o]?n[o]:null})(this.textures,"ceilingTexture"));var i=this.parseOptionalFloat(f,"ceilingShininess");if(i!=null){c.setCeilingShininess(i)}};a.prototype.createPolyline=function(c,e,f){var d=new Polyline(f);return this.resolveObject(d,c,e)};a.prototype.setPolylineAttributes=function(j,m,e){this.setProperties(j);var i=this.parseOptionalFloat(e,"thickness");if(i!=null){j.setThickness(i)}var k=(function(n,o){return n[o]?n[o]:null})(e,"capStyle");if(k!=null){try{j.setCapStyle(Polyline.CapStyle[k])}catch(h){}}var f=(function(n,o){return n[o]?n[o]:null})(e,"joinStyle");if(f!=null){try{j.setJoinStyle(Polyline.JoinStyle[f])}catch(h){}}var l=(function(n,o){return n[o]?n[o]:null})(e,"dashStyle");if(l!=null){try{j.setDashStyle(Polyline.DashStyle[l])}catch(h){}}var g=(function(n,o){return n[o]?n[o]:null})(e,"startArrowStyle");if(g!=null){try{j.setStartArrowStyle(Polyline.ArrowStyle[g])}catch(h){}}var c=(function(n,o){return n[o]?n[o]:null})(e,"endArrowStyle");if(c!=null){try{j.setEndArrowStyle(Polyline.ArrowStyle[c])}catch(h){}}var d=this.parseOptionalColor(e,"color");if(d!=null){j.setColor(d)}j.setClosedPath((function(o,n){if(o&&o.equals){return o.equals(n)}else{return o===n}})("true",(function(n,o){return n[o]?n[o]:null})(e,"closedPath")))};a.prototype.createDimensionLine=function(d,e){var c=new DimensionLine(this.parseFloat(e,"xStart"),this.parseFloat(e,"yStart"),this.parseFloat(e,"xEnd"),this.parseFloat(e,"yEnd"),this.parseFloat(e,"offset"));return this.resolveObject(c,d,e)};a.prototype.setDimensionLineAttributes=function(d,c,e){this.setProperties(d);d.setLengthStyle((function(f,g){return f[g]?f[g]:null})(this.textStyles,"lengthStyle"))};a.prototype.createLabel=function(c,d,f){var e=new Label(f,this.parseFloat(d,"x"),this.parseFloat(d,"y"));return this.resolveObject(e,c,d)};a.prototype.setLabelAttributes=function(e,c,d){this.setProperties(e);e.setStyle((function(i,j){return i[j]?i[j]:null})(this.textStyles,a.UNIQUE_ATTRIBUTE));var h=this.parseOptionalFloat(d,"angle");if(h!=null){e.setAngle(h)}var f=this.parseOptionalFloat(d,"elevation");if(f!=null){e.setElevation(f)}var g=this.parseOptionalFloat(d,"pitch");if(g!=null){e.setPitch(g)}e.setColor(this.parseOptionalColor(d,"color"));e.setOutlineColor(this.parseOptionalColor(d,"outlineColor"))};a.prototype.createBaseboard=function(c,d){var e=Baseboard.getInstance(this.parseFloat(d,"thickness"),this.parseFloat(d,"height"),this.parseOptionalColor(d,"color"),(function(f,g){return f[g]?f[g]:null})(this.textures,a.UNIQUE_ATTRIBUTE));return this.resolveObject(e,c,d)};a.prototype.createTextStyle=function(c,d){var e=new TextStyle((function(f,g){return f[g]?f[g]:null})(d,"fontName"),this.parseFloat(d,"fontSize"),(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("true",(function(f,g){return f[g]?f[g]:null})(d,"bold")),(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("true",(function(f,g){return f[g]?f[g]:null})(d,"italic")));return this.resolveObject(e,c,d)};a.prototype.createTexture=function(c,d){var f=(function(g,h){return g[h]?g[h]:null})(d,"catalogId");var e=new HomeTexture(new CatalogTexture(f,(function(g,h){return g[h]?g[h]:null})(d,"name"),this.parseContent((function(g,h){return g[h]?g[h]:null})(d,"image"),f),this.parseFloat(d,"width"),this.parseFloat(d,"height"),(function(g,h){return g[h]?g[h]:null})(d,"creator")),(function(g,h){return g[h]?g[h]:null})(d,"angle")!=null?this.parseFloat(d,"angle"):0,(function(g,h){return g[h]?g[h]:null})(d,"scale")!=null?this.parseFloat(d,"scale"):1,!(function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})("false",(function(g,h){return g[h]?g[h]:null})(d,"leftToRightOriented")));return this.resolveObject(e,c,d)};a.prototype.createMaterial=function(c,d){var e=new HomeMaterial((function(f,g){return f[g]?f[g]:null})(d,"name"),(function(f,g){return f[g]?f[g]:null})(d,"key"),this.parseOptionalColor(d,"color"),this.materialTexture,this.parseOptionalFloat(d,"shininess"));return this.resolveObject(e,c,d)};a.prototype.setProperties=function(d){var c=(function(i){var g=[];for(var h in i){g.push({k:h,v:i[h],getKey:function(){return this.k},getValue:function(){return this.v}})}return g})(this.properties);for(var e=0;e<c.length;e++){var f=c[e];d.setProperty(f.getKey(),f.getValue())}};a.prototype.parseOptionalColor=function(d,e){var c=(function(g,h){return g[h]?g[h]:null})(d,e);if(c!=null){try{return(parseInt(c,16)|0)}catch(f){throw new SAXException("Invalid value for color attribute "+e,f)}}else{return null}};a.prototype.parseOptionalInteger=function(c,d){var f=(function(g,h){return g[h]?g[h]:null})(c,d);if(f!=null){try{return parseInt(f)}catch(e){throw new SAXException("Invalid value for integer attribute "+d,e)}}else{return null}};a.prototype.parseOptionalLong=function(c,d){var f=(function(g,h){return g[h]?g[h]:null})(c,d);if(f!=null){try{return parseInt(f)}catch(e){throw new SAXException("Invalid value for long attribute "+d,e)}}else{return null}};a.prototype.parseOptionalDecimal=function(c,d){var f=(function(g,h){return g[h]?g[h]:null})(c,d);if(f!=null){try{return new Big(f)}catch(e){throw new SAXException("Invalid value for decimal attribute "+d,e)}}else{return null}};a.prototype.parseOptionalFloat=function(c,d){var f=(function(g,h){return g[h]?g[h]:null})(c,d);if(f!=null){try{return parseFloat(f)}catch(e){throw new SAXException("Invalid value for float attribute "+d,e)}}else{return null}};a.prototype.parseFloat=function(c,d){var f=(function(g,h){return g[h]?g[h]:null})(c,d);if(f!=null){try{return parseFloat(f)}catch(e){throw new SAXException("Invalid value for float attribute "+d,e)}}else{throw new SAXException("Missing float attribute "+d)}};a.prototype.parseContent=function(c,d){if(c==null){return null}else{if(c.indexOf("://")>=0){return new URLContent(c)}else{return new HomeURLContent("jar:"+this["homeUrl"]+"!/"+c)}}};a.prototype.setHome=function(c){this.home=c;this.homeElementName=(function(d){return d[d.length-1]})(this.elements)};a.prototype.getHome=function(){return this.home};return a}(DefaultHandler));HomeXMLHandler.UNIQUE_ATTRIBUTE="@&unique&@";HomeXMLHandler.__class="com.eteks.sweethome3d.io.HomeXMLHandler";HomeXMLHandler.__interfaces=["org.xml.sax.ErrorHandler","org.xml.sax.DTDHandler","org.xml.sax.ContentHandler","org.xml.sax.EntityResolver"];(function(b){var a=(function(){function c(d,f,e){this.wall=null;this.wallAtStartId=null;this.wallAtEndId=null;this.wall=d;this.wallAtStartId=f;this.wallAtEndId=e}c.prototype.getWall=function(){return this.wall};c.prototype.getWallAtStartId=function(){return this.wallAtStartId};c.prototype.getWallAtEndId=function(){return this.wallAtEndId};return c}());b.JoinedWall=a;a.__class="com.eteks.sweethome3d.io.HomeXMLHandler.JoinedWall"})(HomeXMLHandler||(HomeXMLHandler={}));var AspectRatio;(function(a){a[a.FREE_RATIO=0]="FREE_RATIO";a[a.VIEW_3D_RATIO=1]="VIEW_3D_RATIO";a[a.RATIO_4_3=2]="RATIO_4_3";a[a.RATIO_3_2=3]="RATIO_3_2";a[a.RATIO_16_9=4]="RATIO_16_9";a[a.RATIO_2_1=5]="RATIO_2_1";a[a.SQUARE_RATIO=6]="SQUARE_RATIO"})(AspectRatio||(AspectRatio={}));var AspectRatio_$WRAPPER=(function(){function a(d,b,c){this._$ordinal=d;this._$name=b;this.value=null;this.value=c}a.prototype.getValue=function(){return this.value};a.prototype.name=function(){return this._$name};a.prototype.ordinal=function(){return this._$ordinal};return a}());AspectRatio.__class="com.eteks.sweethome3d.model.AspectRatio";AspectRatio.__interfaces=["java.lang.Comparable","java.io.Serializable"];AspectRatio["_$wrappers"]=[new AspectRatio_$WRAPPER(0,"FREE_RATIO",null),new AspectRatio_$WRAPPER(1,"VIEW_3D_RATIO",null),new AspectRatio_$WRAPPER(2,"RATIO_4_3",4/3),new AspectRatio_$WRAPPER(3,"RATIO_3_2",1.5),new AspectRatio_$WRAPPER(4,"RATIO_16_9",16/9),new AspectRatio_$WRAPPER(5,"RATIO_2_1",2/1),new AspectRatio_$WRAPPER(6,"SQUARE_RATIO",1)];var BackgroundImage=(function(){function a(g,n,m,c,h,d,b,k,f){var j=this;if(((g!=null&&(g.__interfaces!=null&&g.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||g.constructor!=null&&g.constructor.__interfaces!=null&&g.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||g===null)&&((typeof n==="number")||n===null)&&((typeof m==="number")||m===null)&&((typeof c==="number")||c===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&((typeof b==="number")||b===null)&&((typeof k==="number")||k===null)&&((typeof f==="boolean")||f===null)){var i=Array.prototype.slice.call(arguments);this.image=null;this.scaleDistance=0;this.scaleDistanceXStart=0;this.scaleDistanceYStart=0;this.scaleDistanceXEnd=0;this.scaleDistanceYEnd=0;this.xOrigin=0;this.yOrigin=0;this.invisible=false;this.image=null;this.scaleDistance=0;this.scaleDistanceXStart=0;this.scaleDistanceYStart=0;this.scaleDistanceXEnd=0;this.scaleDistanceYEnd=0;this.xOrigin=0;this.yOrigin=0;this.invisible=false;(function(){j.image=g;j.scaleDistance=n;j.scaleDistanceXStart=m;j.scaleDistanceYStart=c;j.scaleDistanceXEnd=h;j.scaleDistanceYEnd=d;j.xOrigin=b;j.yOrigin=k;j.invisible=!f})()}else{if(((g!=null&&(g.__interfaces!=null&&g.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||g.constructor!=null&&g.constructor.__interfaces!=null&&g.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||g===null)&&((typeof n==="number")||n===null)&&((typeof m==="number")||m===null)&&((typeof c==="number")||c===null)&&((typeof h==="number")||h===null)&&((typeof d==="number")||d===null)&&((typeof b==="number")||b===null)&&((typeof k==="number")||k===null)&&f===undefined){var i=Array.prototype.slice.call(arguments);var e=Array.prototype.slice.call(arguments);var l=true;this.image=null;this.scaleDistance=0;this.scaleDistanceXStart=0;this.scaleDistanceYStart=0;this.scaleDistanceXEnd=0;this.scaleDistanceYEnd=0;this.xOrigin=0;this.yOrigin=0;this.invisible=false;this.image=null;this.scaleDistance=0;this.scaleDistanceXStart=0;this.scaleDistanceYStart=0;this.scaleDistanceXEnd=0;this.scaleDistanceYEnd=0;this.xOrigin=0;this.yOrigin=0;this.invisible=false;(function(){j.image=g;j.scaleDistance=n;j.scaleDistanceXStart=m;j.scaleDistanceYStart=c;j.scaleDistanceXEnd=h;j.scaleDistanceYEnd=d;j.xOrigin=b;j.yOrigin=k;j.invisible=!l})()}else{throw new Error("invalid overload")}}}a.prototype.getImage=function(){return this.image};a.prototype.getScaleDistance=function(){return this.scaleDistance};a.prototype.getScaleDistanceXStart=function(){return this.scaleDistanceXStart};a.prototype.getScaleDistanceYStart=function(){return this.scaleDistanceYStart};a.prototype.getScaleDistanceXEnd=function(){return this.scaleDistanceXEnd};a.prototype.getScaleDistanceYEnd=function(){return this.scaleDistanceYEnd};a.prototype.getScale=function(){return a.getScale(this.scaleDistance,this.scaleDistanceXStart,this.scaleDistanceYStart,this.scaleDistanceXEnd,this.scaleDistanceYEnd)};a.getScale=function(e,b,f,d,c){return(e/java.awt.geom.Point2D.distance(b,f,d,c))};a.prototype.getXOrigin=function(){return this.xOrigin};a.prototype.getYOrigin=function(){return this.yOrigin};a.prototype.isVisible=function(){return !this.invisible};return a}());BackgroundImage.__class="com.eteks.sweethome3d.model.BackgroundImage";BackgroundImage.__interfaces=["java.io.Serializable"];var Baseboard=(function(){function a(j,k,f,i,d){var g=this;if(((typeof j==="number")||j===null)&&((typeof k==="number")||k===null)&&((typeof f==="number")||f===null)&&((i!=null&&i instanceof HomeTexture)||i===null)&&((typeof d==="boolean")||d===null)){var h=Array.prototype.slice.call(arguments);this.thickness=0;this.height=0;this.color=null;this.texture=null;this.thickness=0;this.height=0;this.color=null;this.texture=null;(function(){g.height=k;g.thickness=j;g.color=f;g.texture=i;if(d){(a.baseboardsCache_$LI$().push(g)>0)}})()}else{if(((typeof j==="number")||j===null)&&((typeof k==="number")||k===null)&&((typeof f==="number")||f===null)&&((i!=null&&i instanceof HomeTexture)||i===null)&&d===undefined){var h=Array.prototype.slice.call(arguments);var b=Array.prototype.slice.call(arguments);var l=b[1];var c=b[0];var e=true;this.thickness=0;this.height=0;this.color=null;this.texture=null;this.thickness=0;this.height=0;this.color=null;this.texture=null;(function(){g.height=c;g.thickness=l;g.color=f;g.texture=i;if(e){(a.baseboardsCache_$LI$().push(g)>0)}})()}else{throw new Error("invalid overload")}}}a.baseboardsCache_$LI$=function(){if(a.baseboardsCache==null){a.baseboardsCache=([])}return a.baseboardsCache};a.getInstance=function(e,b,c,g){var h=new a(e,b,c,g,false);for(var d=a.baseboardsCache_$LI$().length-1;d>=0;d--){var f=a.baseboardsCache_$LI$()[d];if(f==null){a.baseboardsCache_$LI$().splice(d,1)}else{if(f.equals(h)){return h}}}(a.baseboardsCache_$LI$().push(h)>0);return h};a.prototype.getThickness=function(){return this.thickness};a.prototype.getHeight=function(){return this.height};a.prototype.getColor=function(){return this.color};a.prototype.getTexture=function(){return this.texture};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return c.thickness===this.thickness&&c.height===this.height&&(c.color===this.color||c.color!=null&&(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(c.color,this.color))&&(c.texture===this.texture||c.texture!=null&&c.texture.equals(this.texture))}return false};return a}());Baseboard.__class="com.eteks.sweethome3d.model.Baseboard";Baseboard.__interfaces=["java.io.Serializable"];var CatalogPieceOfFurniture=(function(){function a(I,ag,U,P,w,aF,bA,j,au,bG,aQ,b,bz,aP,a4,bH,i,av,bx,V,v,aH,ab,bd,ba,c,y,an,h,by,E,H,bm,aC){var aO=this;if(((typeof I==="string")||I===null)&&((typeof ag==="string")||ag===null)&&((typeof U==="string")||U===null)&&((typeof P==="string")||P===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof aF==="number")||aF===null)&&((typeof bA==="number")||bA===null)&&((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((au!=null&&(au.__interfaces!=null&&au.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||au.constructor!=null&&au.constructor.__interfaces!=null&&au.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||au===null)&&((bG!=null&&(bG.__interfaces!=null&&bG.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||bG.constructor!=null&&bG.constructor.__interfaces!=null&&bG.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bG===null)&&((typeof aQ==="number")||aQ===null)&&((typeof b==="number")||b===null)&&((typeof bz==="number")||bz===null)&&((typeof aP==="number")||aP===null)&&((typeof a4==="number")||a4===null)&&((typeof bH==="boolean")||bH===null)&&((typeof i==="boolean")||i===null)&&((typeof av==="string")||av===null)&&((typeof bx==="number")||bx===null)&&((V!=null&&V instanceof Array&&(V.length==0||V[0]==null||V[0] instanceof Array))||V===null)&&((typeof v==="boolean")||v===null)&&((typeof aH==="number")||aH===null)&&((typeof ab==="string")||ab===null)&&((typeof bd==="boolean")||bd===null)&&((typeof ba==="boolean")||ba===null)&&((typeof c==="boolean")||c===null)&&((typeof y==="boolean")||y===null)&&((an!=null&&an instanceof Big)||an===null)&&((h!=null&&h instanceof Big)||h===null)&&((typeof by==="string")||by===null)&&((E!=null&&(E instanceof Object))||E===null)&&((typeof H==="number")||H===null)&&((typeof bm==="boolean")||bm===null)&&((typeof aC==="boolean")||aC===null)){var e=Array.prototype.slice.call(arguments);this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;(function(){aO.id=I;aO.name=ag;aO.description=U;aO.information=P;aO.tags=w;aO.creationDate=aF;aO.grade=bA;aO.icon=j;aO.planIcon=au;aO.model=bG;aO.width=aQ;aO.depth=b;aO.height=bz;aO.elevation=aP;aO.dropOnTopElevation=a4;aO.movable=bH;aO.doorOrWindow=i;aO.color=bx;aO.staircaseCutOutShape=av;aO.creator=ab;aO.horizontallyRotatable=y;aO.price=an;aO.valueAddedTaxPercentage=h;aO.currency=by;aO.properties=E==null||Object.keys(E).length===0?{}:(Object.keys(E).length===1?(function(bI){var bJ={};bJ[bI]=(function(bK){var bL=0;return{next:function(){return bL<bK.length?bK[bL++]:null},hasNext:function(){return bL<bK.length}}})((function(bK){return Object.keys(bK).map(function(bL){return bK[bL]})})(E)).next();return bJ})((function(bI){var bJ=0;return{next:function(){return bJ<bI.length?bI[bJ++]:null},hasNext:function(){return bJ<bI.length}}})(Object.keys(E)).next()):({}));if(V==null){aO.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{aO.modelRotation=aO.deepCopy(V)}aO.backFaceShown=v;aO.modelSize=aH;aO.resizable=bd;aO.deformable=ba;aO.texturable=c;aO.iconYaw=H;aO.proportional=bm;aO.modifiable=aC})()}else{if(((typeof I==="string")||I===null)&&((typeof ag==="string")||ag===null)&&((typeof U==="string")||U===null)&&((typeof P==="string")||P===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof aF==="number")||aF===null)&&((typeof bA==="number")||bA===null)&&((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((au!=null&&(au.__interfaces!=null&&au.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||au.constructor!=null&&au.constructor.__interfaces!=null&&au.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||au===null)&&((bG!=null&&(bG.__interfaces!=null&&bG.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||bG.constructor!=null&&bG.constructor.__interfaces!=null&&bG.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bG===null)&&((typeof aQ==="number")||aQ===null)&&((typeof b==="number")||b===null)&&((typeof bz==="number")||bz===null)&&((typeof aP==="number")||aP===null)&&((typeof a4==="number")||a4===null)&&((typeof bH==="boolean")||bH===null)&&((typeof i==="string")||i===null)&&((av!=null&&av instanceof Array&&(av.length==0||av[0]==null||av[0] instanceof Array))||av===null)&&((typeof bx==="boolean")||bx===null)&&((typeof V==="number")||V===null)&&((typeof v==="string")||v===null)&&((typeof aH==="boolean")||aH===null)&&((typeof ab==="boolean")||ab===null)&&((typeof bd==="boolean")||bd===null)&&((typeof ba==="boolean")||ba===null)&&((c!=null&&c instanceof Big)||c===null)&&((y!=null&&y instanceof Big)||y===null)&&((typeof an==="string")||an===null)&&((h!=null&&(h instanceof Object))||h===null)&&by===undefined&&E===undefined&&H===undefined&&bm===undefined&&aC===undefined){var e=Array.prototype.slice.call(arguments);var ao=e[16];var bk=e[17];var aM=e[18];var bF=e[19];var bc=e[20];var aV=e[21];var D=e[22];var a1=e[23];var bw=e[24];var aA=e[25];var af=e[26];var a6=e[27];var at=e[28];var O=Array.prototype.slice.call(arguments);var T=false;var t=null;var ac=Math.PI/8;var u=true;var bq=false;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;(function(){aO.id=I;aO.name=ag;aO.description=U;aO.information=P;aO.tags=w;aO.creationDate=aF;aO.grade=bA;aO.icon=j;aO.planIcon=au;aO.model=bG;aO.width=aQ;aO.depth=b;aO.height=bz;aO.elevation=aP;aO.dropOnTopElevation=a4;aO.movable=bH;aO.doorOrWindow=T;aO.color=t;aO.staircaseCutOutShape=ao;aO.creator=bc;aO.horizontallyRotatable=bw;aO.price=aA;aO.valueAddedTaxPercentage=af;aO.currency=a6;aO.properties=at==null||Object.keys(at).length===0?{}:(Object.keys(at).length===1?(function(bI){var bJ={};bJ[bI]=(function(bK){var bL=0;return{next:function(){return bL<bK.length?bK[bL++]:null},hasNext:function(){return bL<bK.length}}})((function(bK){return Object.keys(bK).map(function(bL){return bK[bL]})})(at)).next();return bJ})((function(bI){var bJ=0;return{next:function(){return bJ<bI.length?bI[bJ++]:null},hasNext:function(){return bJ<bI.length}}})(Object.keys(at)).next()):({}));if(bk==null){aO.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{aO.modelRotation=aO.deepCopy(bk)}aO.backFaceShown=aM;aO.modelSize=bF;aO.resizable=aV;aO.deformable=D;aO.texturable=a1;aO.iconYaw=ac;aO.proportional=u;aO.modifiable=bq})()}else{if(((typeof I==="string")||I===null)&&((typeof ag==="string")||ag===null)&&((typeof U==="string")||U===null)&&((typeof P==="string")||P===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof aF==="number")||aF===null)&&((typeof bA==="number")||bA===null)&&((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((au!=null&&(au.__interfaces!=null&&au.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||au.constructor!=null&&au.constructor.__interfaces!=null&&au.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||au===null)&&((bG!=null&&(bG.__interfaces!=null&&bG.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||bG.constructor!=null&&bG.constructor.__interfaces!=null&&bG.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bG===null)&&((typeof aQ==="number")||aQ===null)&&((typeof b==="number")||b===null)&&((typeof bz==="number")||bz===null)&&((typeof aP==="number")||aP===null)&&((typeof a4==="number")||a4===null)&&((typeof bH==="boolean")||bH===null)&&((typeof i==="string")||i===null)&&((av!=null&&av instanceof Array&&(av.length==0||av[0]==null||av[0] instanceof Array))||av===null)&&((typeof bx==="boolean")||bx===null)&&((typeof V==="number")||V===null)&&((typeof v==="string")||v===null)&&((typeof aH==="boolean")||aH===null)&&((typeof ab==="boolean")||ab===null)&&((typeof bd==="boolean")||bd===null)&&((typeof ba==="boolean")||ba===null)&&((c!=null&&c instanceof Big)||c===null)&&((y!=null&&y instanceof Big)||y===null)&&((typeof an==="string")||an===null)&&h===undefined&&by===undefined&&E===undefined&&H===undefined&&bm===undefined&&aC===undefined){var e=Array.prototype.slice.call(arguments);var am=e[16];var bj=e[17];var aJ=e[18];var bE=e[19];var bb=e[20];var aU=e[21];var C=e[22];var aZ=e[23];var bv=e[24];var az=e[25];var ae=e[26];var a5=e[27];var N=Array.prototype.slice.call(arguments);var bu=true;var ar=null;var M=Array.prototype.slice.call(arguments);var S=false;var r=null;var Z=Math.PI/8;var s=true;var bp=false;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;(function(){aO.id=I;aO.name=ag;aO.description=U;aO.information=P;aO.tags=w;aO.creationDate=aF;aO.grade=bA;aO.icon=j;aO.planIcon=au;aO.model=bG;aO.width=aQ;aO.depth=b;aO.height=bz;aO.elevation=aP;aO.dropOnTopElevation=a4;aO.movable=bH;aO.doorOrWindow=S;aO.color=r;aO.staircaseCutOutShape=am;aO.creator=bb;aO.horizontallyRotatable=bu;aO.price=az;aO.valueAddedTaxPercentage=ae;aO.currency=a5;aO.properties=ar==null||Object.keys(ar).length===0?{}:(Object.keys(ar).length===1?(function(bI){var bJ={};bJ[bI]=(function(bK){var bL=0;return{next:function(){return bL<bK.length?bK[bL++]:null},hasNext:function(){return bL<bK.length}}})((function(bK){return Object.keys(bK).map(function(bL){return bK[bL]})})(ar)).next();return bJ})((function(bI){var bJ=0;return{next:function(){return bJ<bI.length?bI[bJ++]:null},hasNext:function(){return bJ<bI.length}}})(Object.keys(ar)).next()):({}));if(bj==null){aO.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{aO.modelRotation=aO.deepCopy(bj)}aO.backFaceShown=aJ;aO.modelSize=bE;aO.resizable=aU;aO.deformable=C;aO.texturable=aZ;aO.iconYaw=Z;aO.proportional=s;aO.modifiable=bp})()}else{if(((typeof I==="string")||I===null)&&((typeof ag==="string")||ag===null)&&((typeof U==="string")||U===null)&&((typeof P==="string")||P===null)&&((w!=null&&w instanceof Array&&(w.length==0||w[0]==null||(typeof w[0]==="string")))||w===null)&&((typeof aF==="number")||aF===null)&&((typeof bA==="number")||bA===null)&&((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||j===null)&&((au!=null&&(au.__interfaces!=null&&au.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||au.constructor!=null&&au.constructor.__interfaces!=null&&au.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||au===null)&&((bG!=null&&(bG.__interfaces!=null&&bG.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||bG.constructor!=null&&bG.constructor.__interfaces!=null&&bG.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||bG===null)&&((typeof aQ==="number")||aQ===null)&&((typeof b==="number")||b===null)&&((typeof bz==="number")||bz===null)&&((typeof aP==="number")||aP===null)&&((typeof a4==="number")||a4===null)&&((typeof bH==="boolean")||bH===null)&&((typeof i==="string")||i===null)&&((av!=null&&av instanceof Array&&(av.length==0||av[0]==null||av[0] instanceof Array))||av===null)&&((typeof bx==="boolean")||bx===null)&&((typeof V==="string")||V===null)&&((typeof v==="boolean")||v===null)&&((typeof aH==="boolean")||aH===null)&&((typeof ab==="boolean")||ab===null)&&((bd!=null&&bd instanceof Big)||bd===null)&&((ba!=null&&ba instanceof Big)||ba===null)&&((typeof c==="string")||c===null)&&y===undefined&&an===undefined&&h===undefined&&by===undefined&&E===undefined&&H===undefined&&bm===undefined&&aC===undefined){var e=Array.prototype.slice.call(arguments);var al=e[16];var bi=e[17];var aI=e[18];var a9=e[19];var aT=e[20];var B=e[21];var aX=e[22];var ay=e[23];var ad=e[24];var a3=e[25];var L=Array.prototype.slice.call(arguments);var bD=null;var bt=true;var K=Array.prototype.slice.call(arguments);var bs=true;var aq=null;var J=Array.prototype.slice.call(arguments);var R=false;var o=null;var X=Math.PI/8;var p=true;var bo=false;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;(function(){aO.id=I;aO.name=ag;aO.description=U;aO.information=P;aO.tags=w;aO.creationDate=aF;aO.grade=bA;aO.icon=j;aO.planIcon=au;aO.model=bG;aO.width=aQ;aO.depth=b;aO.height=bz;aO.elevation=aP;aO.dropOnTopElevation=a4;aO.movable=bH;aO.doorOrWindow=R;aO.color=o;aO.staircaseCutOutShape=al;aO.creator=a9;aO.horizontallyRotatable=bs;aO.price=ay;aO.valueAddedTaxPercentage=ad;aO.currency=a3;aO.properties=aq==null||Object.keys(aq).length===0?{}:(Object.keys(aq).length===1?(function(bI){var bJ={};bJ[bI]=(function(bK){var bL=0;return{next:function(){return bL<bK.length?bK[bL++]:null},hasNext:function(){return bL<bK.length}}})((function(bK){return Object.keys(bK).map(function(bL){return bK[bL]})})(aq)).next();return bJ})((function(bI){var bJ=0;return{next:function(){return bJ<bI.length?bI[bJ++]:null},hasNext:function(){return bJ<bI.length}}})(Object.keys(aq)).next()):({}));if(bi==null){aO.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{aO.modelRotation=aO.deepCopy(bi)}aO.backFaceShown=aI;aO.modelSize=bD;aO.resizable=aT;aO.deformable=B;aO.texturable=aX;aO.iconYaw=X;aO.proportional=p;aO.modifiable=bo})()}else{if(((typeof I==="string")||I===null)&&((ag!=null&&(ag.__interfaces!=null&&ag.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||ag.constructor!=null&&ag.constructor.__interfaces!=null&&ag.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||ag===null)&&((U!=null&&(U.__interfaces!=null&&U.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||U.constructor!=null&&U.constructor.__interfaces!=null&&U.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||U===null)&&((typeof P==="number")||P===null)&&((typeof w==="number")||w===null)&&((typeof aF==="number")||aF===null)&&((typeof bA==="number")||bA===null)&&((typeof j==="boolean")||j===null)&&((typeof au==="string")||au===null)&&((typeof bG==="number")||bG===null)&&((aQ!=null&&aQ instanceof Array&&(aQ.length==0||aQ[0]==null||aQ[0] instanceof Array))||aQ===null)&&((typeof b==="boolean")||b===null)&&((typeof bz==="number")||bz===null)&&((typeof aP==="string")||aP===null)&&((typeof a4==="number")||a4===null)&&((typeof bH==="boolean")||bH===null)&&i===undefined&&av===undefined&&bx===undefined&&V===undefined&&v===undefined&&aH===undefined&&ab===undefined&&bd===undefined&&ba===undefined&&c===undefined&&y===undefined&&an===undefined&&h===undefined&&by===undefined&&E===undefined&&H===undefined&&bm===undefined&&aC===undefined){var e=Array.prototype.slice.call(arguments);var aj=e[0];var ai=e[1];var g=e[2];var aE=e[3];var aN=e[4];var a0=e[5];var G=e[6];var bf=e[7];var ak=e[8];var k=e[9];var bh=e[10];var aG=e[11];var bC=e[12];var a8=e[13];var W=e[14];var m=e[15];var z=Array.prototype.slice.call(arguments);var d=null;var bB=null;var bl=null;var aB=new Array(0);var aK=Date.now();var l=null;var q=null;var x=1;var Q=false;var aS=true;var A=true;var aW=true;var br=true;var ax=null;var aa=null;var a2=null;var ap=null;var bn=true;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null;(function(){aO.id=d;aO.name=aj;aO.description=bB;aO.information=bl;aO.tags=aB;aO.creationDate=aK;aO.grade=l;aO.icon=ai;aO.planIcon=q;aO.model=g;aO.width=aE;aO.depth=aN;aO.height=a0;aO.elevation=G;aO.dropOnTopElevation=x;aO.movable=bf;aO.doorOrWindow=Q;aO.color=k;aO.staircaseCutOutShape=ak;aO.creator=a8;aO.horizontallyRotatable=br;aO.price=ax;aO.valueAddedTaxPercentage=aa;aO.currency=a2;aO.properties=ap==null||Object.keys(ap).length===0?{}:(Object.keys(ap).length===1?(function(bI){var bJ={};bJ[bI]=(function(bK){var bL=0;return{next:function(){return bL<bK.length?bK[bL++]:null},hasNext:function(){return bL<bK.length}}})((function(bK){return Object.keys(bK).map(function(bL){return bK[bL]})})(ap)).next();return bJ})((function(bI){var bJ=0;return{next:function(){return bJ<bI.length?bI[bJ++]:null},hasNext:function(){return bJ<bI.length}}})(Object.keys(ap)).next()):({}));if(bh==null){aO.modelRotation=a.INDENTITY_ROTATION_$LI$()}else{aO.modelRotation=aO.deepCopy(bh)}aO.backFaceShown=aG;aO.modelSize=bC;aO.resizable=aS;aO.deformable=A;aO.texturable=aW;aO.iconYaw=W;aO.proportional=m;aO.modifiable=bn})()}else{if(((typeof I==="string")||I===null)&&((typeof ag==="string")||ag===null)&&((typeof U==="string")||U===null)&&((P!=null&&(P.__interfaces!=null&&P.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||P.constructor!=null&&P.constructor.__interfaces!=null&&P.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||P===null)&&((w!=null&&(w.__interfaces!=null&&w.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||w===null)&&((aF!=null&&(aF.__interfaces!=null&&aF.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||aF.constructor!=null&&aF.constructor.__interfaces!=null&&aF.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||aF===null)&&((typeof bA==="number")||bA===null)&&((typeof j==="number")||j===null)&&((typeof au==="number")||au===null)&&((typeof bG==="number")||bG===null)&&((typeof aQ==="boolean")||aQ===null)&&((b!=null&&b instanceof Array&&(b.length==0||b[0]==null||b[0] instanceof Array))||b===null)&&((typeof bz==="string")||bz===null)&&((typeof aP==="boolean")||aP===null)&&((a4!=null&&a4 instanceof Big)||a4===null)&&((bH!=null&&bH instanceof Big)||bH===null)&&i===undefined&&av===undefined&&bx===undefined&&V===undefined&&v===undefined&&aH===undefined&&ab===undefined&&bd===undefined&&ba===undefined&&c===undefined&&y===undefined&&an===undefined&&h===undefined&&by===undefined&&E===undefined&&H===undefined&&bm===undefined&&aC===undefined){var e=Array.prototype.slice.call(arguments);var ah=e[3];var n=e[4];var f=e[5];var aD=e[6];var aL=e[7];var aY=e[8];var F=e[9];var be=e[10];var bg=e[11];var a7=e[12];var aR=e[13];var aw=e[14];var Y=e[15];this.id=null;this.name=null;this.description=null;this.information=null;this.tags=null;this.creationDate=null;this.grade=null;this.icon=null;this.planIcon=null;this.model=null;this.width=0;this.depth=0;this.height=0;this.proportional=false;this.elevation=0;this.dropOnTopElevation=0;this.movable=false;this.doorOrWindow=false;this.staircaseCutOutShape=null;this.modelRotation=null;this.modelSize=null;this.creator=null;this.backFaceShown=false;this.color=null;this.iconYaw=0;this.modifiable=false;this.resizable=false;this.deformable=false;this.texturable=false;this.horizontallyRotatable=false;this.price=null;this.valueAddedTaxPercentage=null;this.currency=null;this.properties=null;this.category=null;this.filterCollationKey=null}else{throw new Error("invalid overload")}}}}}}}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.INDENTITY_ROTATION_$LI$=function(){a.__static_initialize();if(a.INDENTITY_ROTATION==null){a.INDENTITY_ROTATION=[[1,0,0],[0,1,0],[0,0,1]]}return a.INDENTITY_ROTATION};a.EMPTY_CRITERIA_$LI$=function(){a.__static_initialize();if(a.EMPTY_CRITERIA==null){a.EMPTY_CRITERIA=new Array(0)}return a.EMPTY_CRITERIA};a.COMPARATOR_$LI$=function(){a.__static_initialize();return a.COMPARATOR};a.recentFilters_$LI$=function(){a.__static_initialize();return a.recentFilters};a.__static_initializer_0=function(){a.COMPARATOR=(function(c,b){return c.toString().localeCompare(b.toString())});a.COMPARATOR_$LI$();a.recentFilters=({})};a.prototype.getId=function(){return this.id};a.prototype.getName=function(){return this.name};a.prototype.getDescription=function(){return this.description};a.prototype.getInformation=function(){return this.information};a.prototype.getTags=function(){return this.tags};a.prototype.getCreationDate=function(){return this.creationDate};a.prototype.getGrade=function(){return this.grade};a.prototype.getDepth=function(){return this.depth};a.prototype.getHeight=function(){return this.height};a.prototype.getWidth=function(){return this.width};a.prototype.getElevation=function(){return this.elevation};a.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation};a.prototype.isMovable=function(){return this.movable};a.prototype.isDoorOrWindow=function(){return this.doorOrWindow};a.prototype.getIcon=function(){return this.icon};a.prototype.getPlanIcon=function(){return this.planIcon};a.prototype.getModel=function(){return this.model};a.prototype.getModelSize=function(){return this.modelSize};a.prototype.getModelRotation=function(){return this.deepCopy(this.modelRotation)};a.prototype.deepCopy=function(b){return[[b[0][0],b[0][1],b[0][2]],[b[1][0],b[1][1],b[1][2]],[b[2][0],b[2][1],b[2][2]]]};a.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape};a.prototype.getCreator=function(){return this.creator};a.prototype.isBackFaceShown=function(){return this.backFaceShown};a.prototype.getColor=function(){return this.color};a.prototype.getIconYaw=function(){return this.iconYaw};a.prototype.isProportional=function(){return this.proportional};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.isResizable=function(){return this.resizable};a.prototype.isDeformable=function(){return this.deformable};a.prototype.isWidthDepthDeformable=function(){return this.isDeformable()};a.prototype.isTexturable=function(){return this.texturable};a.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable};a.prototype.getPrice=function(){return this.price};a.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage};a.prototype.getCurrency=function(){return this.currency};a.prototype.getProperty=function(b){return(function(c,d){return c[d]?c[d]:null})(this.properties,b)};a.prototype.getPropertyNames=function(){return Object.keys(this.properties)};a.prototype.getCategory=function(){return this.category};a.prototype.setCategory=function(b){this.category=b};a.prototype.equals=function(b){return(function(d,c){if(d&&d.equals){return d.equals(c)}else{return d===c}})(this,b)};a.prototype.compareTo=function(c){var b=a.COMPARATOR_$LI$().compare(this.name,c.name);if(b!==0){return b}else{return this.modifiable===c.modifiable?0:(this.modifiable?1:-1)}};a.prototype.matchesFilter=function(d){var e=this.getFilterCollationKeys(d);var f=0;if(e.length>0){var b=this.getPieceOfFurnitureCollationKey();for(var c=0;c<e.length;c++){if(this.isSubCollationKey(b,e[c],0)){f++}else{break}}}return f===e.length};a.prototype.getFilterCollationKeys=function(d){if(d.length===0){return a.EMPTY_CRITERIA_$LI$()}var b=(function(h,i){return h[i]?h[i]:null})(a.recentFilters_$LI$(),d);if(b==null){var g=d.split("\\s|\\p{Punct}|\\|");var f=([]);for(var c=0;c<g.length;c++){var e=g[c];if(e.length>0){(f.push(a.COMPARATOR_$LI$().getCollationKey(e).toByteArray())>0)}}if(f.length===0){b=a.EMPTY_CRITERIA_$LI$()}else{b=f.slice(0)}(a.recentFilters_$LI$()[d]=b)}return b};a.prototype.getPieceOfFurnitureCollationKey=function(){var f=this;if(this.filterCollationKey==null){var d={str:"",toString:function(){return this.str}};(function(g){g.str=g.str.concat(f.getName());return g})(d);(function(g){g.str=g.str.concat("|");return g})(d);if(this.getCategory()!=null){(function(g){g.str=g.str.concat(f.getCategory().getName());return g})(d);(function(g){g.str=g.str.concat("|");return g})(d)}if(this.getCreator()!=null){(function(g){g.str=g.str.concat(f.getCreator());return g})(d);(function(g){g.str=g.str.concat("|");return g})(d)}if(this.getDescription()!=null){(function(g){g.str=g.str.concat(f.getDescription());return g})(d);(function(g){g.str=g.str.concat("|");return g})(d)}var e=this.getTags();var b=function(h){var g=e[h];(function(i){i.str=i.str.concat(g);return i})(d);(function(i){i.str=i.str.concat("|");return i})(d)};for(var c=0;c<e.length;c++){b(c)}this.filterCollationKey=a.COMPARATOR_$LI$().getCollationKey(d.str).toByteArray()}return this.filterCollationKey};a.prototype.isSubCollationKey=function(e,h,g){for(var d=g,f=e.length-4,b=h.length-4;d<f&&d<f-b+1;d++){if(e[d]===h[0]){for(var c=1;c<b;c++){if(e[d+c]!==h[c]){return this.isSubCollationKey(e,h,d+1)}}return true}}return false};return a}());CatalogPieceOfFurniture.__static_initialized=false;CatalogPieceOfFurniture.__class="com.eteks.sweethome3d.model.CatalogPieceOfFurniture";CatalogPieceOfFurniture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture","java.lang.Comparable"];var CatalogTexture=(function(){function a(u,C,t,v,s,k,w){var A=this;if(((typeof u==="string")||u===null)&&((typeof C==="string")||C===null)&&((t!=null&&(t.__interfaces!=null&&t.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||t.constructor!=null&&t.constructor.__interfaces!=null&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||t===null)&&((typeof v==="number")||v===null)&&((typeof s==="number")||s===null)&&((typeof k==="string")||k===null)&&((typeof w==="boolean")||w===null)){var j=Array.prototype.slice.call(arguments);this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;(function(){A.id=u;A.name=C;A.image=t;A.width=v;A.height=s;A.creator=k;A.modifiable=w})()}else{if(((typeof u==="string")||u===null)&&((typeof C==="string")||C===null)&&((t!=null&&(t.__interfaces!=null&&t.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||t.constructor!=null&&t.constructor.__interfaces!=null&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||t===null)&&((typeof v==="number")||v===null)&&((typeof s==="number")||s===null)&&((typeof k==="string")||k===null)&&w===undefined){var j=Array.prototype.slice.call(arguments);var i=Array.prototype.slice.call(arguments);var r=false;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;(function(){A.id=u;A.name=C;A.image=t;A.width=v;A.height=s;A.creator=k;A.modifiable=r})()}else{if(((typeof u==="string")||u===null)&&((C!=null&&(C.__interfaces!=null&&C.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||C.constructor!=null&&C.constructor.__interfaces!=null&&C.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||C===null)&&((typeof t==="number")||t===null)&&((typeof v==="number")||v===null)&&((typeof s==="boolean")||s===null)&&k===undefined&&w===undefined){var j=Array.prototype.slice.call(arguments);var z=j[0];var o=j[1];var n=j[2];var B=j[3];var q=j[4];var h=Array.prototype.slice.call(arguments);var g=null;var f=null;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;(function(){A.id=g;A.name=z;A.image=o;A.width=n;A.height=B;A.creator=f;A.modifiable=q})()}else{if(((typeof u==="string")||u===null)&&((C!=null&&(C.__interfaces!=null&&C.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||C.constructor!=null&&C.constructor.__interfaces!=null&&C.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||C===null)&&((typeof t==="number")||t===null)&&((typeof v==="number")||v===null)&&s===undefined&&k===undefined&&w===undefined){var j=Array.prototype.slice.call(arguments);var y=j[0];var m=j[1];var l=j[2];var x=j[3];var e=Array.prototype.slice.call(arguments);var d=null;var c=null;var b=Array.prototype.slice.call(arguments);var p=false;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;this.id=null;this.name=null;this.image=null;this.width=0;this.height=0;this.creator=null;this.modifiable=false;this.category=null;this.filterCollationKey=null;(function(){A.id=d;A.name=y;A.image=m;A.width=l;A.height=x;A.creator=c;A.modifiable=p})()}else{throw new Error("invalid overload")}}}}}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.EMPTY_CRITERIA_$LI$=function(){a.__static_initialize();if(a.EMPTY_CRITERIA==null){a.EMPTY_CRITERIA=new Array(0)}return a.EMPTY_CRITERIA};a.COMPARATOR_$LI$=function(){a.__static_initialize();return a.COMPARATOR};a.recentFilters_$LI$=function(){a.__static_initialize();return a.recentFilters};a.__static_initializer_0=function(){a.COMPARATOR=(function(c,b){return c.toString().localeCompare(b.toString())});a.COMPARATOR_$LI$();a.recentFilters=({})};a.prototype.getId=function(){return this.id};a.prototype.getName=function(){return this.name};a.prototype.getImage=function(){return this.image};a.prototype.getIcon=function(){return this.getImage()};a.prototype.getWidth=function(){return this.width};a.prototype.getHeight=function(){return this.height};a.prototype.getCreator=function(){return this.creator};a.prototype.isModifiable=function(){return this.modifiable};a.prototype.getCategory=function(){return this.category};a.prototype.setCategory=function(b){this.category=b};a.prototype.equals=function(b){return(function(d,c){if(d&&d.equals){return d.equals(c)}else{return d===c}})(this,b)};a.prototype.compareTo=function(c){var b=a.COMPARATOR_$LI$().compare(this.name,c.name);if(b!==0){return b}else{return this.modifiable===c.modifiable?0:(this.modifiable?1:-1)}};a.prototype.matchesFilter=function(d){var e=this.getFilterCollationKeys(d);var f=0;if(e.length>0){var b=this.getTextureCollationKey();for(var c=0;c<e.length;c++){if(this.isSubCollationKey(b,e[c],0)){f++}else{break}}}return f===e.length};a.prototype.getFilterCollationKeys=function(d){if(d.length===0){return a.EMPTY_CRITERIA_$LI$()}var c=(function(h,i){return h[i]?h[i]:null})(a.recentFilters_$LI$(),d);if(c==null){var g=d.split("\\s|\\p{Punct}|\\|");var f=([]);for(var b=0;b<g.length;b++){var e=g[b];if(e.length>0){(f.push(a.COMPARATOR_$LI$().getCollationKey(e).toByteArray())>0)}}if(f.length===0){c=a.EMPTY_CRITERIA_$LI$()}else{c=f.slice(0)}(a.recentFilters_$LI$()[d]=c)}return c};a.prototype.getTextureCollationKey=function(){var c=this;if(this.filterCollationKey==null){var b={str:"",toString:function(){return this.str}};(function(d){d.str=d.str.concat(c.getName());return d})(b);(function(d){d.str=d.str.concat("|");return d})(b);if(this.getCategory()!=null){(function(d){d.str=d.str.concat(c.getCategory().getName());return d})(b);(function(d){d.str=d.str.concat("|");return d})(b)}if(this.getCreator()!=null){(function(d){d.str=d.str.concat(c.getCreator());return d})(b);(function(d){d.str=d.str.concat("|");return d})(b)}this.filterCollationKey=a.COMPARATOR_$LI$().getCollationKey(b.str).toByteArray()}return this.filterCollationKey};a.prototype.isSubCollationKey=function(e,h,g){for(var d=g,f=e.length-4,b=h.length-4;d<f&&d<f-b+1;d++){if(e[d]===h[0]){for(var c=1;c<b;c++){if(e[d+c]!==h[c]){return this.isSubCollationKey(e,h,d+1)}}return true}}return false};return a}());CatalogTexture.__static_initialized=false;CatalogTexture.__class="com.eteks.sweethome3d.model.CatalogTexture";CatalogTexture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","java.lang.Comparable","com.eteks.sweethome3d.model.TextureImage","java.io.Serializable"];var CollectionChangeSupport=(function(){function a(b){this.source=null;this.collectionListeners=null;this.source=b;this.collectionListeners=([])}a.prototype.addCollectionListener=function(b){(this.collectionListeners.push(b)>0)};a.prototype.removeCollectionListener=function(b){(function(c){return c.splice(c.indexOf(b),1)})(this.collectionListeners)};a.prototype.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type=function(c,b){this.fireCollectionChanged(c,-1,b)};a.prototype.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type=function(g,d,e){if(!(this.collectionListeners.length==0)){var c=(new CollectionEvent(this.source,g,d,e));var f=this.collectionListeners.slice(0);for(var b=0;b<f.length;b++){var h=f[b];h(c)}}};a.prototype.fireCollectionChanged=function(d,b,c){if(((d!=null)||d===null)&&((typeof b==="number")||b===null)&&((typeof c==="number")||c===null)){return this.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type(d,b,c)}else{if(((d!=null)||d===null)&&((typeof b==="number")||b===null)&&c===undefined){return this.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type(d,b)}else{throw new Error("invalid overload")}}};return a}());CollectionChangeSupport.__class="com.eteks.sweethome3d.model.CollectionChangeSupport";var CollectionEvent=(function(a){__extends(b,a);function b(c,k,g,i){var e=this;if(((c!=null)||c===null)&&((k!=null)||k===null)&&((typeof g==="number")||g===null)&&((typeof i==="number")||i===null)){var f=Array.prototype.slice.call(arguments);e=a.call(this,c)||this;e.item=null;e.index=0;e.type=null;e.item=null;e.index=0;e.type=null;(function(){e.item=k;e.index=g;e.type=i})()}else{if(((c!=null)||c===null)&&((k!=null)||k===null)&&((typeof g==="number")||g===null)&&i===undefined){var f=Array.prototype.slice.call(arguments);var h=f[2];var j=Array.prototype.slice.call(arguments);var d=-1;e=a.call(this,c)||this;e.item=null;e.index=0;e.type=null;e.item=null;e.index=0;e.type=null;(function(){e.item=k;e.index=d;e.type=h})()}else{throw new Error("invalid overload")}}return e}b.prototype.getItem=function(){return this.item};b.prototype.getIndex=function(){return this.index};b.prototype.getType=function(){return this.type};return b}(EventObject));CollectionEvent.__class="com.eteks.sweethome3d.model.CollectionEvent";CollectionEvent.__interfaces=["java.io.Serializable"];(function(b){var a;(function(c){c[c.ADD=0]="ADD";c[c.DELETE=1]="DELETE"})(a=b.Type||(b.Type={}))})(CollectionEvent||(CollectionEvent={}));var FurnitureCatalog=(function(){function a(){this.categories=([]);this.furnitureChangeSupport=(new CollectionChangeSupport(this))}a.prototype.getCategories=function(){return this.categories.slice(0)};a.prototype.getCategoriesCount=function(){return this.categories.length};a.prototype.getCategory=function(b){return this.categories[b]};a.prototype.addFurnitureListener=function(b){this.furnitureChangeSupport.addCollectionListener((b))};a.prototype.removeFurnitureListener=function(b){this.furnitureChangeSupport.removeCollectionListener((b))};a.prototype.add=function(d,c){var b=(function(f,i){var g=function(n,l){return n.localeCompare(l)};var e=0;var k=f.length-1;while(e<=k){var h=(e+k)>>>1;var m=f[h];var j=g(m,i);if(j<0){e=h+1}else{if(j>0){k=h-1}else{return h}}}return -(e+1)})(this.categories,d);if(b<0){d=new FurnitureCategory(d.getName());this.categories.splice(-b-1,0,d)}else{d=this.categories[b]}d.add(c);this.furnitureChangeSupport.fireCollectionChanged(c,d.getIndexOfPieceOfFurniture(c),CollectionEvent.Type.ADD)};a.prototype["delete"]=function(b){var d=b.getCategory();if(d!=null){var c=d.getIndexOfPieceOfFurniture(b);if(c>=0){d["delete"](b);if(d.getFurnitureCount()===0){this.categories=(this.categories.slice(0));(function(e){return e.splice(e.indexOf(d),1)})(this.categories)}this.furnitureChangeSupport.fireCollectionChanged(b,c,CollectionEvent.Type.DELETE);return}}throw new IllegalArgumentException("catalog doesn't contain piece "+b.getName())};return a}());FurnitureCatalog.__class="com.eteks.sweethome3d.model.FurnitureCatalog";var FurnitureCategory=(function(){function a(b){this.name=null;this.furniture=null;this.name=b;this.furniture=([])}a.COMPARATOR_$LI$=function(){if(a.COMPARATOR==null){a.COMPARATOR=(function(c,b){return c.toString().localeCompare(b.toString())})}return a.COMPARATOR};a.prototype.getName=function(){return this.name};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.getFurnitureCount=function(){return this.furniture.length};a.prototype.getPieceOfFurniture=function(b){return this.furniture[b]};a.prototype.getIndexOfPieceOfFurniture=function(b){return this.furniture.indexOf(b)};a.prototype.add=function(c){c.setCategory(this);var b=(function(e,h){var f=function(m,l){return m.localeCompare(l)};var d=0;var j=e.length-1;while(d<=j){var g=(d+j)>>>1;var k=e[g];var i=f(k,h);if(i<0){d=g+1}else{if(i>0){j=g-1}else{return g}}}return -(d+1)})(this.furniture,c);if(b<0){b=-b-1}this.furniture.splice(b,0,c)};a.prototype["delete"]=function(b){var c=this.furniture.indexOf(b);if(c===-1){throw new IllegalArgumentException(this.name+" doesn't contain piece "+b.getName())}this.furniture=(this.furniture.slice(0));this.furniture.splice(c,1)};a.prototype.equals=function(b){return(b!=null&&b instanceof a)&&a.COMPARATOR_$LI$().equals(this.name,b.name)};a.prototype.compareTo=function(b){return a.COMPARATOR_$LI$().compare(this.name,b.name)};return a}());FurnitureCategory.__class="com.eteks.sweethome3d.model.FurnitureCategory";FurnitureCategory.__interfaces=["java.lang.Comparable"];var HomeDescriptor=(function(){function a(b,d,c){this.name=null;this.content=null;this.icon=null;this.name=b;this.content=d;this.icon=c}a.prototype.getName=function(){return this.name};a.prototype.getContent=function(){return this.content};a.prototype.getIcon=function(){return this.icon};return a}());HomeDescriptor.__class="com.eteks.sweethome3d.model.HomeDescriptor";var HomeEnvironment=(function(){function a(u,l,t,n,q,j){var s=this;this.propertyChangeSupport=new PropertyChangeSupport(this);if(((typeof u==="number")||u===null)&&((l!=null&&l instanceof HomeTexture)||l===null)&&((typeof t==="number")||t===null)&&((n!=null&&n instanceof HomeTexture)||n===null)&&((typeof q==="number")||q===null)&&((typeof j==="number")||j===null)){var i=Array.prototype.slice.call(arguments);this.observerCameraElevationAdjusted=false;this.groundColor=0;this.groundTexture=null;this.skyColor=0;this.skyTexture=null;this.lightColor=0;this.ceilingLightColor=0;this.wallsAlpha=0;this.drawingMode=null;this.subpartSizeUnderLight=0;this.allLevelsVisible=false;this.photoWidth=0;this.photoHeight=0;this.photoAspectRatio=null;this.photoAspectRatioName=null;this.photoQuality=0;this.videoWidth=0;this.videoAspectRatio=null;this.videoAspectRatioName=null;this.videoQuality=0;this.videoFrameRate=0;this.cameraPath=null;this.propertyChangeSupport=new PropertyChangeSupport(this);this.observerCameraElevationAdjusted=false;this.groundColor=0;this.groundTexture=null;this.skyColor=0;this.skyTexture=null;this.lightColor=0;this.ceilingLightColor=0;this.wallsAlpha=0;this.drawingMode=null;this.subpartSizeUnderLight=0;this.allLevelsVisible=false;this.photoWidth=0;this.photoHeight=0;this.photoAspectRatio=null;this.photoAspectRatioName=null;this.photoQuality=0;this.videoWidth=0;this.videoAspectRatio=null;this.videoAspectRatioName=null;this.videoQuality=0;this.videoFrameRate=0;this.cameraPath=null;(function(){s.observerCameraElevationAdjusted=true;s.groundColor=u;s.groundTexture=l;s.skyColor=t;s.skyTexture=n;s.lightColor=q;s.ceilingLightColor=13684944;s.wallsAlpha=j;s.drawingMode=a.DrawingMode.FILL;s.photoWidth=400;s.photoHeight=300;s.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;s.videoWidth=320;s.videoAspectRatio=AspectRatio.RATIO_4_3;s.videoFrameRate=25;s.cameraPath=[]})()}else{if(((typeof u==="number")||u===null)&&((l!=null&&l instanceof HomeTexture)||l===null)&&((typeof t==="number")||t===null)&&((typeof n==="number")||n===null)&&((typeof q==="number")||q===null)&&j===undefined){var i=Array.prototype.slice.call(arguments);var p=i[3];var g=i[4];var d=Array.prototype.slice.call(arguments);var m=null;this.observerCameraElevationAdjusted=false;this.groundColor=0;this.groundTexture=null;this.skyColor=0;this.skyTexture=null;this.lightColor=0;this.ceilingLightColor=0;this.wallsAlpha=0;this.drawingMode=null;this.subpartSizeUnderLight=0;this.allLevelsVisible=false;this.photoWidth=0;this.photoHeight=0;this.photoAspectRatio=null;this.photoAspectRatioName=null;this.photoQuality=0;this.videoWidth=0;this.videoAspectRatio=null;this.videoAspectRatioName=null;this.videoQuality=0;this.videoFrameRate=0;this.cameraPath=null;this.propertyChangeSupport=new PropertyChangeSupport(this);this.observerCameraElevationAdjusted=false;this.groundColor=0;this.groundTexture=null;this.skyColor=0;this.skyTexture=null;this.lightColor=0;this.ceilingLightColor=0;this.wallsAlpha=0;this.drawingMode=null;this.subpartSizeUnderLight=0;this.allLevelsVisible=false;this.photoWidth=0;this.photoHeight=0;this.photoAspectRatio=null;this.photoAspectRatioName=null;this.photoQuality=0;this.videoWidth=0;this.videoAspectRatio=null;this.videoAspectRatioName=null;this.videoQuality=0;this.videoFrameRate=0;this.cameraPath=null;(function(){s.observerCameraElevationAdjusted=true;s.groundColor=u;s.groundTexture=l;s.skyColor=t;s.skyTexture=m;s.lightColor=p;s.ceilingLightColor=13684944;s.wallsAlpha=g;s.drawingMode=a.DrawingMode.FILL;s.photoWidth=400;s.photoHeight=300;s.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;s.videoWidth=320;s.videoAspectRatio=AspectRatio.RATIO_4_3;s.videoFrameRate=25;s.cameraPath=[]})()}else{if(u===undefined&&l===undefined&&t===undefined&&n===undefined&&q===undefined&&j===undefined){var i=Array.prototype.slice.call(arguments);var c=Array.prototype.slice.call(arguments);var e=11053224;var r=null;var h=13427964;var o=13684944;var f=0;var b=Array.prototype.slice.call(arguments);var k=null;this.observerCameraElevationAdjusted=false;this.groundColor=0;this.groundTexture=null;this.skyColor=0;this.skyTexture=null;this.lightColor=0;this.ceilingLightColor=0;this.wallsAlpha=0;this.drawingMode=null;this.subpartSizeUnderLight=0;this.allLevelsVisible=false;this.photoWidth=0;this.photoHeight=0;this.photoAspectRatio=null;this.photoAspectRatioName=null;this.photoQuality=0;this.videoWidth=0;this.videoAspectRatio=null;this.videoAspectRatioName=null;this.videoQuality=0;this.videoFrameRate=0;this.cameraPath=null;this.propertyChangeSupport=new PropertyChangeSupport(this);this.observerCameraElevationAdjusted=false;this.groundColor=0;this.groundTexture=null;this.skyColor=0;this.skyTexture=null;this.lightColor=0;this.ceilingLightColor=0;this.wallsAlpha=0;this.drawingMode=null;this.subpartSizeUnderLight=0;this.allLevelsVisible=false;this.photoWidth=0;this.photoHeight=0;this.photoAspectRatio=null;this.photoAspectRatioName=null;this.photoQuality=0;this.videoWidth=0;this.videoAspectRatio=null;this.videoAspectRatioName=null;this.videoQuality=0;this.videoFrameRate=0;this.cameraPath=null;(function(){s.observerCameraElevationAdjusted=true;s.groundColor=e;s.groundTexture=r;s.skyColor=h;s.skyTexture=k;s.lightColor=o;s.ceilingLightColor=13684944;s.wallsAlpha=f;s.drawingMode=a.DrawingMode.FILL;s.photoWidth=400;s.photoHeight=300;s.photoAspectRatio=AspectRatio.VIEW_3D_RATIO;s.videoWidth=320;s.videoAspectRatio=AspectRatio.RATIO_4_3;s.videoFrameRate=25;s.cameraPath=[]})()}else{throw new Error("invalid overload")}}}}a.prototype.addPropertyChangeListener=function(c,b){this.propertyChangeSupport.addPropertyChangeListener(c,b)};a.prototype.removePropertyChangeListener=function(c,b){this.propertyChangeSupport.removePropertyChangeListener(c,b)};a.prototype.isObserverCameraElevationAdjusted=function(){return this.observerCameraElevationAdjusted};a.prototype.setObserverCameraElevationAdjusted=function(b){if(this.observerCameraElevationAdjusted!==b){this.observerCameraElevationAdjusted=b;this.propertyChangeSupport.firePropertyChange("OBSERVER_CAMERA_ELEVATION_ADJUSTED",!b,b)}};a.prototype.getGroundColor=function(){return this.groundColor};a.prototype.setGroundColor=function(b){if(b!==this.groundColor){var c=this.groundColor;this.groundColor=b;this.propertyChangeSupport.firePropertyChange("GROUND_COLOR",c,b)}};a.prototype.getGroundTexture=function(){return this.groundTexture};a.prototype.setGroundTexture=function(c){if(c!==this.groundTexture){var b=this.groundTexture;this.groundTexture=c;this.propertyChangeSupport.firePropertyChange("GROUND_TEXTURE",b,c)}};a.prototype.getSkyColor=function(){return this.skyColor};a.prototype.setSkyColor=function(c){if(c!==this.skyColor){var b=this.skyColor;this.skyColor=c;this.propertyChangeSupport.firePropertyChange("SKY_COLOR",b,c)}};a.prototype.getSkyTexture=function(){return this.skyTexture};a.prototype.setSkyTexture=function(b){if(b!==this.skyTexture){var c=this.skyTexture;this.skyTexture=b;this.propertyChangeSupport.firePropertyChange("SKY_TEXTURE",c,b)}};a.prototype.getLightColor=function(){return this.lightColor};a.prototype.setLightColor=function(b){if(b!==this.lightColor){var c=this.lightColor;this.lightColor=b;this.propertyChangeSupport.firePropertyChange("LIGHT_COLOR",c,b)}};a.prototype.getCeillingLightColor=function(){return this.ceilingLightColor};a.prototype.setCeillingLightColor=function(b){if(b!==this.ceilingLightColor){var c=this.ceilingLightColor;this.ceilingLightColor=b;this.propertyChangeSupport.firePropertyChange("CEILING_LIGHT_COLOR",c,b)}};a.prototype.getWallsAlpha=function(){return this.wallsAlpha};a.prototype.setWallsAlpha=function(c){if(c!==this.wallsAlpha){var b=this.wallsAlpha;this.wallsAlpha=c;this.propertyChangeSupport.firePropertyChange("WALLS_ALPHA",b,c)}};a.prototype.getDrawingMode=function(){return this.drawingMode};a.prototype.setDrawingMode=function(b){if(b!==this.drawingMode){var c=this.drawingMode;this.drawingMode=b;this.propertyChangeSupport.firePropertyChange("DRAWING_MODE",c,b)}};a.prototype.getSubpartSizeUnderLight=function(){return this.subpartSizeUnderLight};a.prototype.setSubpartSizeUnderLight=function(b){if(b!==this.subpartSizeUnderLight){var c=this.subpartSizeUnderLight;this.subpartSizeUnderLight=b;this.propertyChangeSupport.firePropertyChange("SUBPART_SIZE_UNDER_LIGHT",c,b)}};a.prototype.isAllLevelsVisible=function(){return this.allLevelsVisible};a.prototype.setAllLevelsVisible=function(b){if(b!==this.allLevelsVisible){this.allLevelsVisible=b;this.propertyChangeSupport.firePropertyChange("ALL_LEVELS_VISIBLE",!b,b)}};a.prototype.getPhotoWidth=function(){return this.photoWidth};a.prototype.setPhotoWidth=function(c){if(this.photoWidth!==c){var b=this.photoWidth;this.photoWidth=c;this.propertyChangeSupport.firePropertyChange("PHOTO_WIDTH",b,c)}};a.prototype.getPhotoHeight=function(){return this.photoHeight};a.prototype.setPhotoHeight=function(b){if(this.photoHeight!==b){var c=this.photoHeight;this.photoHeight=b;this.propertyChangeSupport.firePropertyChange("PHOTO_HEIGHT",c,b)}};a.prototype.getPhotoAspectRatio=function(){return this.photoAspectRatio};a.prototype.setPhotoAspectRatio=function(b){if(this.photoAspectRatio!==b){var c=this.photoAspectRatio;this.photoAspectRatio=b;this.propertyChangeSupport.firePropertyChange("PHOTO_ASPECT_RATIO",c,b)}};a.prototype.getPhotoQuality=function(){return this.photoQuality};a.prototype.setPhotoQuality=function(b){if(this.photoQuality!==b){var c=this.photoQuality;this.photoQuality=b;this.propertyChangeSupport.firePropertyChange("PHOTO_QUALITY",c,b)}};a.prototype.getVideoWidth=function(){return this.videoWidth};a.prototype.setVideoWidth=function(c){if(this.videoWidth!==c){var b=this.videoWidth;this.videoWidth=c;this.propertyChangeSupport.firePropertyChange("VIDEO_WIDTH",b,c)}};a.prototype.getVideoHeight=function(){return Math.round(this.getVideoWidth()/{FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2/1,SQUARE_RATIO:1}[this.getVideoAspectRatio()])};a.prototype.getVideoAspectRatio=function(){return this.videoAspectRatio};a.prototype.setVideoAspectRatio=function(c){if(this.videoAspectRatio!==c){if({FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2/1,SQUARE_RATIO:1}[c]==null){throw new IllegalArgumentException("Unsupported aspect ratio "+c)}var b=this.videoAspectRatio;this.videoAspectRatio=c;this.propertyChangeSupport.firePropertyChange("VIDEO_ASPECT_RATIO",b,c)}};a.prototype.getVideoQuality=function(){return this.videoQuality};a.prototype.setVideoQuality=function(b){if(this.videoQuality!==b){var c=this.videoQuality;this.videoQuality=b;this.propertyChangeSupport.firePropertyChange("VIDEO_QUALITY",c,b)}};a.prototype.getVideoFrameRate=function(){return this.videoFrameRate};a.prototype.setVideoFrameRate=function(c){if(this.videoFrameRate!==c){var b=this.videoFrameRate;this.videoFrameRate=c;this.propertyChangeSupport.firePropertyChange("VIDEO_FRAME_RATE",b,c)}};a.prototype.getVideoCameraPath=function(){return this.cameraPath.slice(0)};a.prototype.setVideoCameraPath=function(b){if(this.cameraPath!==b){var c=this.cameraPath;if(b!=null){this.cameraPath=(b.slice(0))}else{this.cameraPath=[]}this.propertyChangeSupport.firePropertyChange("VIDEO_CAMERA_PATH",c,b)}};a.prototype.clone=function(){try{var e=(function(g){var h=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){h[f]=g[f]}}return h})(this);e.cameraPath=([]);for(var b=0;b<this.cameraPath.length;b++){var d=this.cameraPath[b];(e.cameraPath.push((function(h){if(h.clone!=undefined){return h.clone()}else{var f=Object.create(h);for(var g in h){if(h.hasOwnProperty(g)){f[g]=h[g]}}return f}})(d))>0)}e.propertyChangeSupport=new PropertyChangeSupport(e);return e}catch(c){throw new IllegalStateException("Super class isn't cloneable")}};return a}());HomeEnvironment.__class="com.eteks.sweethome3d.model.HomeEnvironment";HomeEnvironment.__interfaces=["java.lang.Cloneable","java.io.Serializable"];(function(a){var b;(function(c){c[c.FILL=0]="FILL";c[c.OUTLINE=1]="OUTLINE";c[c.FILL_AND_OUTLINE=2]="FILL_AND_OUTLINE"})(b=a.DrawingMode||(a.DrawingMode={}))})(HomeEnvironment||(HomeEnvironment={}));var HomeMaterial=(function(){function a(b,k,d,i,m){var f=this;if(((typeof b==="string")||b===null)&&((typeof k==="string")||k===null)&&((typeof d==="number")||d===null)&&((i!=null&&i instanceof HomeTexture)||i===null)&&((typeof m==="number")||m===null)){var g=Array.prototype.slice.call(arguments);this.name=null;this.key=null;this.color=null;this.texture=null;this.shininess=null;this.name=null;this.key=null;this.color=null;this.texture=null;this.shininess=null;(function(){f.name=b;f.key=k;f.color=d;f.texture=i;f.shininess=m})()}else{if(((typeof b==="string")||b===null)&&((typeof k==="number")||k===null)&&((d!=null&&d instanceof HomeTexture)||d===null)&&((typeof i==="number")||i===null)&&m===undefined){var g=Array.prototype.slice.call(arguments);var l=g[1];var h=g[2];var c=g[3];var j=Array.prototype.slice.call(arguments);var e=null;this.name=null;this.key=null;this.color=null;this.texture=null;this.shininess=null;this.name=null;this.key=null;this.color=null;this.texture=null;this.shininess=null;(function(){f.name=b;f.key=e;f.color=l;f.texture=h;f.shininess=c})()}else{throw new Error("invalid overload")}}}a.prototype.getName=function(){return this.name};a.prototype.getKey=function(){return this.key};a.prototype.getColor=function(){return this.color};a.prototype.getTexture=function(){return this.texture};a.prototype.getShininess=function(){return this.shininess};return a}());HomeMaterial.__class="com.eteks.sweethome3d.model.HomeMaterial";HomeMaterial.__interfaces=["java.io.Serializable"];var HomeObject=(function(){function a(){this.properties=null}a.prototype.getProperty=function(b){if(this.properties!=null){return(function(c,d){return c[d]?c[d]:null})(this.properties,b)}else{return null}};a.prototype.setProperty=function(b,c){if(c==null){if(this.properties!=null&&this.properties.hasOwnProperty(b)){delete this.properties[b];if(Object.keys(this.properties).length===0){this.properties=null}}}else{if(this.properties==null){this.properties=(function(d){var e={};e[d]=c;return e})(b)}else{if(Object.keys(this.properties).length===1){this.properties=({})}(this.properties[b]=c)}}};a.prototype.getPropertyNames=function(){if(this.properties!=null){return Object.keys(this.properties)}else{return[]}};a.prototype.clone=function(){var d=this;try{var c=(function(f){var g=Object.create(f);for(var e in f){if(f.hasOwnProperty(e)){g[e]=f[e]}}return g})(this);if(this.properties!=null){c.properties=Object.keys(c.properties).length===1?(function(e){var f={};f[e]=(function(g){var h=0;return{next:function(){return h<g.length?g[h++]:null},hasNext:function(){return h<g.length}}})((function(g){return Object.keys(g).map(function(h){return g[h]})})(d.properties)).next();return f})((function(e){var f=0;return{next:function(){return f<e.length?e[f++]:null},hasNext:function(){return f<e.length}}})(Object.keys(this.properties)).next()):({})}return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};return a}());HomeObject.__class="com.eteks.sweethome3d.model.HomeObject";HomeObject.__interfaces=["java.lang.Cloneable","java.io.Serializable"];var HomePrint=(function(){function a(b,g,k,l,n,c,h,m,f,j,e,d,i){this.paperOrientation=null;this.paperWidth=0;this.paperHeight=0;this.paperTopMargin=0;this.paperLeftMargin=0;this.paperBottomMargin=0;this.paperRightMargin=0;this.furniturePrinted=false;this.planPrinted=false;this.view3DPrinted=false;this.planScale=null;this.headerFormat=null;this.footerFormat=null;this.paperOrientation=b;this.paperWidth=g;this.paperHeight=k;this.paperTopMargin=l;this.paperLeftMargin=n;this.paperBottomMargin=c;this.paperRightMargin=h;this.furniturePrinted=m;this.planPrinted=f;this.view3DPrinted=j;this.planScale=e;this.headerFormat=d;this.footerFormat=i}a.prototype.getPaperOrientation=function(){return this.paperOrientation};a.prototype.getPaperBottomMargin=function(){return this.paperBottomMargin};a.prototype.getPaperHeight=function(){return this.paperHeight};a.prototype.getPaperLeftMargin=function(){return this.paperLeftMargin};a.prototype.getPaperRightMargin=function(){return this.paperRightMargin};a.prototype.getPaperTopMargin=function(){return this.paperTopMargin};a.prototype.getPaperWidth=function(){return this.paperWidth};a.prototype.isFurniturePrinted=function(){return this.furniturePrinted};a.prototype.isPlanPrinted=function(){return this.planPrinted};a.prototype.isView3DPrinted=function(){return this.view3DPrinted};a.prototype.getPlanScale=function(){return this.planScale};a.prototype.getHeaderFormat=function(){return this.headerFormat};a.prototype.getFooterFormat=function(){return this.footerFormat};return a}());HomePrint.__class="com.eteks.sweethome3d.model.HomePrint";HomePrint.__interfaces=["java.io.Serializable"];(function(a){var b;(function(c){c[c.PORTRAIT=0]="PORTRAIT";c[c.LANDSCAPE=1]="LANDSCAPE";c[c.REVERSE_LANDSCAPE=2]="REVERSE_LANDSCAPE"})(b=a.PaperOrientation||(a.PaperOrientation={}))})(HomePrint||(HomePrint={}));var HomeTexture=(function(){function a(j,s,t,g){var p=this;if(((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||j===null)&&((typeof s==="number")||s===null)&&((typeof t==="number")||t===null)&&((typeof g==="boolean")||g===null)){var f=Array.prototype.slice.call(arguments);this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;(function(){p.name=j.getName();p.creator=j.getCreator();p.image=j.getImage();p.width=j.getWidth();p.height=j.getHeight();p.angle=s;p.scale=t;p.leftToRightOriented=g;if(j!=null&&j instanceof a){p.catalogId=j.getCatalogId()}else{if(j!=null&&j instanceof CatalogTexture){p.catalogId=j.getId()}else{p.catalogId=null}}})()}else{if(((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||j===null)&&((typeof s==="number")||s===null)&&((typeof t==="boolean")||t===null)&&g===undefined){var f=Array.prototype.slice.call(arguments);var r=f[2];var n=Array.prototype.slice.call(arguments);var e=1;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;(function(){p.name=j.getName();p.creator=j.getCreator();p.image=j.getImage();p.width=j.getWidth();p.height=j.getHeight();p.angle=s;p.scale=e;p.leftToRightOriented=r;if(j!=null&&j instanceof a){p.catalogId=j.getCatalogId()}else{if(j!=null&&j instanceof CatalogTexture){p.catalogId=j.getId()}else{p.catalogId=null}}})()}else{if(((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||j===null)&&((typeof s==="number")||s===null)&&t===undefined&&g===undefined){var f=Array.prototype.slice.call(arguments);var m=Array.prototype.slice.call(arguments);var q=true;var l=Array.prototype.slice.call(arguments);var d=1;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;(function(){p.name=j.getName();p.creator=j.getCreator();p.image=j.getImage();p.width=j.getWidth();p.height=j.getHeight();p.angle=s;p.scale=d;p.leftToRightOriented=q;if(j!=null&&j instanceof a){p.catalogId=j.getCatalogId()}else{if(j!=null&&j instanceof CatalogTexture){p.catalogId=j.getId()}else{p.catalogId=null}}})()}else{if(((j!=null&&(j.__interfaces!=null&&j.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||j.constructor!=null&&j.constructor.__interfaces!=null&&j.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||j===null)&&s===undefined&&t===undefined&&g===undefined){var f=Array.prototype.slice.call(arguments);var k=Array.prototype.slice.call(arguments);var b=0;var i=Array.prototype.slice.call(arguments);var o=true;var h=Array.prototype.slice.call(arguments);var c=1;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;this.catalogId=null;this.name=null;this.creator=null;this.image=null;this.width=0;this.height=0;this.angle=0;this.scale=0;this.leftToRightOriented=false;(function(){p.name=j.getName();p.creator=j.getCreator();p.image=j.getImage();p.width=j.getWidth();p.height=j.getHeight();p.angle=b;p.scale=c;p.leftToRightOriented=o;if(j!=null&&j instanceof a){p.catalogId=j.getCatalogId()}else{if(j!=null&&j instanceof CatalogTexture){p.catalogId=j.getId()}else{p.catalogId=null}}})()}else{throw new Error("invalid overload")}}}}}a.prototype.getCatalogId=function(){return this.catalogId};a.prototype.getName=function(){return this.name};a.prototype.getCreator=function(){return this.creator};a.prototype.getImage=function(){return this.image};a.prototype.getWidth=function(){return this.width};a.prototype.getHeight=function(){return this.height};a.prototype.getAngle=function(){return this.angle};a.prototype.getScale=function(){return this.scale};a.prototype.isLeftToRightOriented=function(){return this.leftToRightOriented};a.prototype.equals=function(c){if(c===this){return true}else{if(c!=null&&c instanceof a){var b=c;return(b.name===this.name||b.name!=null&&(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(b.name,this.name))&&(b.image===this.image||b.image!=null&&(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(b.image,this.image))&&b.width===this.width&&b.height===this.height&&b.leftToRightOriented===this.leftToRightOriented&&b.angle===this.angle&&b.scale===this.scale}else{return false}}};return a}());HomeTexture.__class="com.eteks.sweethome3d.model.HomeTexture";HomeTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage","java.io.Serializable"];var LightSource=(function(){function a(i,h,g,c,j){var e=this;if(((typeof i==="number")||i===null)&&((typeof h==="number")||h===null)&&((typeof g==="number")||g===null)&&((typeof c==="number")||c===null)&&((typeof j==="number")||j===null)){var f=Array.prototype.slice.call(arguments);this.x=0;this.y=0;this.z=0;this.color=0;this.diameter=null;this.x=0;this.y=0;this.z=0;this.color=0;this.diameter=null;(function(){e.x=i;e.y=h;e.z=g;e.color=c;e.diameter=j})()}else{if(((typeof i==="number")||i===null)&&((typeof h==="number")||h===null)&&((typeof g==="number")||g===null)&&((typeof c==="number")||c===null)&&j===undefined){var f=Array.prototype.slice.call(arguments);var d=Array.prototype.slice.call(arguments);var b=null;this.x=0;this.y=0;this.z=0;this.color=0;this.diameter=null;this.x=0;this.y=0;this.z=0;this.color=0;this.diameter=null;(function(){e.x=i;e.y=h;e.z=g;e.color=c;e.diameter=b})()}else{throw new Error("invalid overload")}}}a.prototype.getX=function(){return this.x};a.prototype.getY=function(){return this.y};a.prototype.getZ=function(){return this.z};a.prototype.getColor=function(){return this.color};a.prototype.getDiameter=function(){return this.diameter};return a}());LightSource.__class="com.eteks.sweethome3d.model.LightSource";LightSource.__interfaces=["java.io.Serializable"];var PatternsCatalog=(function(){function a(b){this.patterns=null;this.patterns=(b.slice(0))}a.prototype.getPatterns=function(){return this.patterns.slice(0)};a.prototype.getPatternsCount=function(){return this.patterns.length};a.prototype.getPattern$int=function(b){return this.patterns[b]};a.prototype.getPattern$java_lang_String=function(b){for(var d=0;d<this.patterns.length;d++){var c=this.patterns[d];if((function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(b,c.getName())){return c}}throw new IllegalArgumentException("No pattern with name "+b)};a.prototype.getPattern=function(b){if(((typeof b==="string")||b===null)){return this.getPattern$java_lang_String(b)}else{if(((typeof b==="number")||b===null)){return this.getPattern$int(b)}else{throw new Error("invalid overload")}}};return a}());PatternsCatalog.__class="com.eteks.sweethome3d.model.PatternsCatalog";var Sash=(function(){function a(f,c,e,d,b){this.xAxis=0;this.yAxis=0;this.width=0;this.startAngle=0;this.endAngle=0;this.xAxis=f;this.yAxis=c;this.width=e;this.startAngle=d;this.endAngle=b}a.prototype.getXAxis=function(){return this.xAxis};a.prototype.getYAxis=function(){return this.yAxis};a.prototype.getWidth=function(){return this.width};a.prototype.getStartAngle=function(){return this.startAngle};a.prototype.getEndAngle=function(){return this.endAngle};return a}());Sash.__class="com.eteks.sweethome3d.model.Sash";Sash.__interfaces=["java.io.Serializable"];var SelectionEvent=(function(b){__extends(a,b);function a(c,e){var d=b.call(this,c)||this;d.selectedItems=null;d.selectedItems=e;return d}a.prototype.getSelectedItems=function(){return this.selectedItems};return a}(EventObject));SelectionEvent.__class="com.eteks.sweethome3d.model.SelectionEvent";SelectionEvent.__interfaces=["java.io.Serializable"];var TextStyle=(function(){function a(p,e,s,h,n){var u=this;if(((typeof p==="string")||p===null)&&((typeof e==="number")||e===null)&&((typeof s==="boolean")||s===null)&&((typeof h==="boolean")||h===null)&&((typeof n==="boolean")||n===null)){var j=Array.prototype.slice.call(arguments);this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;(function(){u.fontName=p;u.fontSize=e;u.bold=s;u.italic=h;if(n){(a.textStylesCache_$LI$().push(u)>0)}})()}else{if(((typeof p==="string")||p===null)&&((typeof e==="number")||e===null)&&((typeof s==="boolean")||s===null)&&((typeof h==="boolean")||h===null)&&n===undefined){var j=Array.prototype.slice.call(arguments);var m=Array.prototype.slice.call(arguments);var r=true;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;(function(){u.fontName=p;u.fontSize=e;u.bold=s;u.italic=h;if(r){(a.textStylesCache_$LI$().push(u)>0)}})()}else{if(((typeof p==="number")||p===null)&&((typeof e==="boolean")||e===null)&&((typeof s==="boolean")||s===null)&&h===undefined&&n===undefined){var j=Array.prototype.slice.call(arguments);var i=j[0];var f=j[1];var d=j[2];var l=Array.prototype.slice.call(arguments);var v=null;var k=Array.prototype.slice.call(arguments);var q=true;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;(function(){u.fontName=v;u.fontSize=i;u.bold=f;u.italic=d;if(q){(a.textStylesCache_$LI$().push(u)>0)}})()}else{if(((typeof p==="number")||p===null)&&e===undefined&&s===undefined&&h===undefined&&n===undefined){var j=Array.prototype.slice.call(arguments);var g=j[0];var y=Array.prototype.slice.call(arguments);var c=false;var b=false;var x=Array.prototype.slice.call(arguments);var t=null;var w=Array.prototype.slice.call(arguments);var o=true;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;this.fontName=null;this.fontSize=0;this.bold=false;this.italic=false;(function(){u.fontName=t;u.fontSize=g;u.bold=c;u.italic=b;if(o){(a.textStylesCache_$LI$().push(u)>0)}})()}else{throw new Error("invalid overload")}}}}}a.textStylesCache_$LI$=function(){if(a.textStylesCache==null){a.textStylesCache=([])}return a.textStylesCache};a.prototype.getInstance=function(e,f,d,b){var h=new a(e,f,d,b,false);for(var c=a.textStylesCache_$LI$().length-1;c>=0;c--){var g=a.textStylesCache_$LI$()[c];if(g==null){a.textStylesCache_$LI$().splice(c,1)}else{if(g.equals(h)){return h}}}(a.textStylesCache_$LI$().push(h)>0);return h};a.prototype.getFontName=function(){return this.fontName};a.prototype.getFontSize=function(){return this.fontSize};a.prototype.isBold=function(){return this.bold};a.prototype.isItalic=function(){return this.italic};a.prototype.deriveStyle$java_lang_String=function(b){if(this.getFontName()===b||(b!=null&&(function(d,c){if(d&&d.equals){return d.equals(c)}else{return d===c}})(b,this.getFontName()))){return this}else{return this.getInstance(b,this.getFontSize(),this.isBold(),this.isItalic())}};a.prototype.deriveStyle=function(b){if(((typeof b==="string")||b===null)){return this.deriveStyle$java_lang_String(b)}else{if(((typeof b==="number")||b===null)){return this.deriveStyle$float(b)}else{throw new Error("invalid overload")}}};a.prototype.deriveStyle$float=function(b){if(this.getFontSize()===b){return this}else{return this.getInstance(this.getFontName(),b,this.isBold(),this.isItalic())}};a.prototype.deriveBoldStyle=function(b){if(this.isBold()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),b,this.isItalic())}};a.prototype.deriveItalicStyle=function(b){if(this.isItalic()===b){return this}else{return this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),b)}};a.prototype.equals=function(b){if(b!=null&&b instanceof a){var c=b;return(c.fontName===this.fontName||(c.fontName!=null&&(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(c.fontName,this.fontName)))&&c.fontSize===this.fontSize&&c.bold===this.bold&&c.italic===this.italic}return false};return a}());TextStyle.__class="com.eteks.sweethome3d.model.TextStyle";TextStyle.__interfaces=["java.io.Serializable"];var TexturesCatalog=(function(){function a(){this.categories=([]);this.texturesChangeSupport=(new CollectionChangeSupport(this))}a.prototype.getCategories=function(){return this.categories.slice(0)};a.prototype.getCategoriesCount=function(){return this.categories.length};a.prototype.getCategory=function(b){return this.categories[b]};a.prototype.addTexturesListener=function(b){this.texturesChangeSupport.addCollectionListener((b))};a.prototype.removeTexturesListener=function(b){this.texturesChangeSupport.removeCollectionListener((b))};a.prototype.add=function(d,c){var b=(function(f,i){var g=function(n,l){return n.localeCompare(l)};var e=0;var k=f.length-1;while(e<=k){var h=(e+k)>>>1;var m=f[h];var j=g(m,i);if(j<0){e=h+1}else{if(j>0){k=h-1}else{return h}}}return -(e+1)})(this.categories,d);if(b<0){d=new TexturesCategory(d.getName());this.categories.splice(-b-1,0,d)}else{d=this.categories[b]}d.add(c);this.texturesChangeSupport.fireCollectionChanged(c,d.getIndexOfTexture(c),CollectionEvent.Type.ADD)};a.prototype["delete"]=function(c){var b=c.getCategory();if(b!=null){var d=b.getIndexOfTexture(c);if(d>=0){b["delete"](c);if(b.getTexturesCount()===0){this.categories=(this.categories.slice(0));(function(e){return e.splice(e.indexOf(b),1)})(this.categories)}this.texturesChangeSupport.fireCollectionChanged(c,d,CollectionEvent.Type.DELETE);return}}throw new IllegalArgumentException("catalog doesn't contain texture "+c.getName())};return a}());TexturesCatalog.__class="com.eteks.sweethome3d.model.TexturesCatalog";var TexturesCategory=(function(){function a(b){this.name=null;this.textures=null;this.name=b;this.textures=([])}a.COMPARATOR_$LI$=function(){if(a.COMPARATOR==null){a.COMPARATOR=(function(c,b){return c.toString().localeCompare(b.toString())})}return a.COMPARATOR};a.prototype.getName=function(){return this.name};a.prototype.getTextures=function(){return this.textures.slice(0)};a.prototype.getTexturesCount=function(){return this.textures.length};a.prototype.getTexture=function(b){return this.textures[b]};a.prototype.getIndexOfTexture=function(b){return this.textures.indexOf(b)};a.prototype.add=function(c){c.setCategory(this);var b=(function(e,h){var f=function(m,l){return m.localeCompare(l)};var d=0;var j=e.length-1;while(d<=j){var g=(d+j)>>>1;var k=e[g];var i=f(k,h);if(i<0){d=g+1}else{if(i>0){j=g-1}else{return g}}}return -(d+1)})(this.textures,c);if(b<0){b=-b-1}this.textures.splice(b,0,c)};a.prototype["delete"]=function(b){var c=this.textures.indexOf(b);if(c===-1){throw new IllegalArgumentException(this.name+" doesn't contain texture "+b.getName())}this.textures=(this.textures.slice(0));this.textures.splice(c,1)};a.prototype.equals=function(b){return(b!=null&&b instanceof a)&&a.COMPARATOR_$LI$().equals(this.name,b.name)};a.prototype.compareTo=function(b){return a.COMPARATOR_$LI$().compare(this.name,b.name)};return a}());TexturesCategory.__class="com.eteks.sweethome3d.model.TexturesCategory";TexturesCategory.__interfaces=["java.lang.Comparable"];var HomeController3D=(function(){function a(f,c,b,e,d){this.home=null;this.preferences=null;this.viewFactory=null;this.contentManager=null;this.undoSupport=null;this.home3DView=null;this.topCameraState=null;this.observerCameraState=null;this.cameraState=null;this.home=f;this.preferences=c;this.viewFactory=b;this.contentManager=e;this.undoSupport=d;this.topCameraState=new a.TopCameraState(this,c);this.observerCameraState=new a.ObserverCameraState(this);this.setCameraState(f.getCamera()===f.getTopCamera()?this.topCameraState:this.observerCameraState);this.addModelListeners(f)}a.prototype.addModelListeners=function(e){e.addPropertyChangeListener("CAMERA",new a.HomeController3D$0(this,e));var c=new a.HomeController3D$1(this,e);var d=e.getSelectedLevel();if(d!=null){d.addPropertyChangeListener(c)}e.addPropertyChangeListener("SELECTED_LEVEL",new a.HomeController3D$2(this,e,c));var b=new a.HomeController3D$3(this,e);e.addPropertyChangeListener("SELECTED_LEVEL",b);e.getEnvironment().addPropertyChangeListener("ALL_LEVELS_VISIBLE",b)};a.prototype.getObserverCameraMinimumElevation=function(d){var c=d.getLevels();var b=c.length===0?10:10+c[0].getElevation();return b};a.prototype.getView=function(){if(this.home3DView==null){this.home3DView=this.viewFactory.createView3D(this.home,this.preferences,this)}return this.home3DView};a.prototype.viewFromTop=function(){this.home.setCamera(this.home.getTopCamera())};a.prototype.viewFromObserver=function(){this.home.setCamera(this.home.getObserverCamera())};a.prototype.storeCamera=function(c){var f=(function(i){if(i.clone!=undefined){return i.clone()}else{var j=Object.create(i);for(var h in i){if(i.hasOwnProperty(h)){j[h]=i[h]}}return j}})(this.home.getCamera());f.setName(c);var e=this.home.getStoredCameras();var b=([]);(function(i,h){return i.push.apply(i,h)})(b,e);for(var d=b.length-1;d>=0;d--){var g=b[d];if((function(i,h){if(i&&i.equals){return i.equals(h)}else{return i===h}})(c,g.getName())||(f.getX()===g.getX()&&f.getY()===g.getY()&&f.getZ()===g.getZ()&&f.getPitch()===g.getPitch()&&f.getYaw()===g.getYaw()&&f.getFieldOfView()===g.getFieldOfView()&&f.getTime()===g.getTime()&&f.getLens()===g.getLens())){b.splice(d,1)}}b.splice(0,0,f);while((b.length>this.preferences.getStoredCamerasMaxCount())){b.splice(b.length-1,1)}this.home.setStoredCameras(b)};a.prototype.goToCamera=function(c){if(c!=null&&c instanceof ObserverCamera){this.viewFromObserver()}else{this.viewFromTop()}this.cameraState.goToCamera(c);var b=(this.home.getStoredCameras().slice(0));(function(d){return d.splice(d.indexOf(c),1)})(b);b.splice(0,0,c);this.home.setStoredCameras(b)};a.prototype.deleteCameras=function(d){var c=this.home.getStoredCameras();var b=([]);for(var f=0;f<c.length;f++){var e=c[f];if(!(d.indexOf((e))>=0)){(b.push(e)>0)}}this.home.setStoredCameras(b)};a.prototype.displayAllLevels=function(){this.home.getEnvironment().setAllLevelsVisible(true)};a.prototype.displaySelectedLevel=function(){this.home.getEnvironment().setAllLevelsVisible(false)};a.prototype.setCameraState=function(b){if(this.cameraState!=null){this.cameraState.exit()}this.cameraState=b;this.cameraState.enter()};a.prototype.moveCamera=function(b){this.cameraState.moveCamera(b)};a.prototype.moveCameraSideways=function(b){this.cameraState.moveCameraSideways(b)};a.prototype.elevateCamera=function(b){this.cameraState.elevateCamera(b)};a.prototype.rotateCameraYaw=function(b){this.cameraState.rotateCameraYaw(b)};a.prototype.rotateCameraPitch=function(b){this.cameraState.rotateCameraPitch(b)};a.prototype.modifyFieldOfView=function(b){this.cameraState.modifyFieldOfView(b)};a.prototype.getObserverCameraState=function(){return this.observerCameraState};a.prototype.getTopCameraState=function(){return this.topCameraState};return a}());HomeController3D.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D";HomeController3D.__interfaces=["com.eteks.sweethome3d.viewcontroller.Controller"];(function(g){var i=(function(){function j(){}j.prototype.enter=function(){};j.prototype.exit=function(){};j.prototype.moveCamera=function(k){};j.prototype.moveCameraSideways=function(k){};j.prototype.elevateCamera=function(k){};j.prototype.rotateCameraYaw=function(k){};j.prototype.rotateCameraPitch=function(k){};j.prototype.modifyFieldOfView=function(k){};j.prototype.goToCamera=function(k){};return j}());g.CameraControllerState=i;i.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.CameraControllerState";var h=(function(){function j(k){this.topCameraState=null;this.topCameraState=(k)}j.prototype.propertyChange=function(l){var m=this.topCameraState;var k=l.getSource();if(m==null){k.removePropertyChangeListener(l.getPropertyName(),this)}else{m.setAerialViewCenteredOnSelectionEnabled(k.isAerialViewCenteredOnSelectionEnabled())}};return j}());g.UserPreferencesChangeListener=h;h.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.UserPreferencesChangeListener";h.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var f=(function(k){__extends(j,k);function j(m,l){var n=k.call(this)||this;n.MIN_WIDTH=100;n.MIN_HEIGHT=20;n.__parent=m;n.MIN_DEPTH=n.MIN_WIDTH;n.topCamera=null;n.aerialViewBoundsLowerPoint=null;n.aerialViewBoundsUpperPoint=null;n.minDistanceToAerialViewCenter=0;n.maxDistanceToAerialViewCenter=0;n.aerialViewCenteredOnSelectionEnabled=false;n.objectChangeListener=new j.TopCameraState$0(n);n.levelsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false)};n.wallsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false)};n.furnitureListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener);n.updateCameraFromHomeBounds(m.home.getFurniture().length===1&&(m.home.getWalls().length==0)&&(m.home.getRooms().length==0))}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener);n.updateCameraFromHomeBounds(false)}}};n.roomsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false)};n.labelsListener=function(o){if(o.getType()===CollectionEvent.Type.ADD){o.getItem().addPropertyChangeListener(n.objectChangeListener)}else{if(o.getType()===CollectionEvent.Type.DELETE){o.getItem().removePropertyChangeListener(n.objectChangeListener)}}n.updateCameraFromHomeBounds(false)};n.selectionListener=new j.TopCameraState$1(n);n.userPreferencesChangeListener=null;n.aerialViewCenteredOnSelectionEnabled=l.isAerialViewCenteredOnSelectionEnabled();n.userPreferencesChangeListener=new g.UserPreferencesChangeListener(n);return n}j.prototype.enter=function(){this.topCamera=this.__parent.home.getCamera();this.updateCameraFromHomeBounds(false);var z=this.__parent.home.getLevels();for(var o=0;o<z.length;o++){var n=z[o];n.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLevelsListener((this.levelsListener));var v=this.__parent.home.getWalls();for(var m=0;m<v.length;m++){var r=v[m];r.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addWallsListener((this.wallsListener));var u=this.__parent.home.getFurniture();for(var x=0;x<u.length;x++){var y=u[x];y.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addFurnitureListener((this.furnitureListener));var s=this.__parent.home.getRooms();for(var w=0;w<s.length;w++){var l=s[w];l.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addRoomsListener((this.roomsListener));var p=this.__parent.home.getLabels();for(var t=0;t<p.length;t++){var q=p[t];q.addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLabelsListener((this.labelsListener));this.__parent.home.addSelectionListener(this.selectionListener);this.__parent.preferences.addPropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)};j.prototype.setAerialViewCenteredOnSelectionEnabled=function(l){this.aerialViewCenteredOnSelectionEnabled=l;this.updateCameraFromHomeBounds(false)};j.prototype.updateCameraFromHomeBounds=function(m){if(this.aerialViewBoundsLowerPoint==null){this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled)}var l=this.getCameraToAerialViewCenterDistance();this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled);this.updateCameraIntervalToAerialViewCenter();this.placeCameraAt(l,m)};j.prototype.getCameraToAerialViewCenterDistance=function(){return Math.sqrt(Math.pow((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.topCamera.getX(),2)+Math.pow((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.topCamera.getY(),2)+Math.pow((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.topCamera.getZ(),2))};j.prototype.updateAerialViewBoundsFromHomeBounds=function(z){this.aerialViewBoundsLowerPoint=this.aerialViewBoundsUpperPoint=null;var x=[];if(z){x=([]);var m=this.__parent.home.getSelectedItems();for(var v=0;v<m.length;v++){var Q=m[v];if((Q!=null&&(Q.__interfaces!=null&&Q.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0||Q.constructor!=null&&Q.constructor.__interfaces!=null&&Q.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0))&&this.isItemAtVisibleLevel(Q)&&(!(Q!=null&&Q instanceof HomePieceOfFurniture)||Q.isVisible())&&(!(Q!=null&&Q instanceof Label)||Q.getPitch()!=null)){(x.push(Q)>0)}}}var u=x.length===0||!z;var D=false;var l=u?this.__parent.home.getWalls():Home.getWallsSubList(x);for(var r=0;r<l.length;r++){var N=l[r];if(this.isItemAtVisibleLevel(N)){D=true;var S=N.getLevel()!=null?N.getLevel().getElevation():0;var O=u?0:S;var C=N.getHeight();var L=void 0;if(C!=null){L=S+C}else{L=S+this.__parent.home.getWallHeight()}var F=N.getHeightAtEnd();if(F!=null){L=Math.max(L,S+F)}var B=N.getPoints();for(var q=0;q<B.length;q++){var H=B[q];this.updateAerialViewBounds(H[0],H[1],O,L)}}}var A=u?this.__parent.home.getFurniture():Home.getFurnitureSubList(x);for(var K=0;K<A.length;K++){var o=A[K];if(o.isVisible()&&this.isItemAtVisibleLevel(o)){var O=void 0;var L=void 0;if(u){O=Math.max(0,o.getGroundElevation());L=Math.max(0,o.getGroundElevation()+o.getHeightInPlan())}else{O=o.getGroundElevation();L=o.getGroundElevation()+o.getHeightInPlan()}var y=o.getPoints();for(var J=0;J<y.length;J++){var H=y[J];this.updateAerialViewBounds(H[0],H[1],O,L)}}}var w=u?this.__parent.home.getRooms():Home.getRoomsSubList(x);for(var I=0;I<w.length;I++){var M=w[I];if(this.isItemAtVisibleLevel(M)){var O=0;var L=this.MIN_HEIGHT;var p=M.getLevel();if(p!=null){O=p.getElevation()-p.getFloorThickness();L=p.getElevation();if(u){O=Math.max(0,O);L=Math.max(this.MIN_HEIGHT,p.getElevation())}}var t=M.getPoints();for(var G=0;G<t.length;G++){var H=t[G];this.updateAerialViewBounds(H[0],H[1],O,L)}}}var R=u?this.__parent.home.getLabels():Home.getLabelsSubList(x);for(var E=0;E<R.length;E++){var s=R[E];if(s.getPitch()!=null&&this.isItemAtVisibleLevel(s)){var O=void 0;var L=void 0;if(u){O=Math.max(0,s.getGroundElevation());L=Math.max(this.MIN_HEIGHT,s.getGroundElevation())}else{O=L=s.getGroundElevation()}var P=s.getPoints();for(var n=0;n<P.length;n++){var H=P[n];this.updateAerialViewBounds(H[0],H[1],O,L)}}}if(this.aerialViewBoundsLowerPoint==null){this.aerialViewBoundsLowerPoint=[0,0,0];this.aerialViewBoundsUpperPoint=[this.MIN_WIDTH,this.MIN_DEPTH,this.MIN_HEIGHT]}else{if(D&&u){if(this.MIN_WIDTH>this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0]){this.aerialViewBoundsLowerPoint[0]=(this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.MIN_WIDTH/2;this.aerialViewBoundsUpperPoint[0]=this.aerialViewBoundsLowerPoint[0]+this.MIN_WIDTH}if(this.MIN_DEPTH>this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1]){this.aerialViewBoundsLowerPoint[1]=(this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.MIN_DEPTH/2;this.aerialViewBoundsUpperPoint[1]=this.aerialViewBoundsLowerPoint[1]+this.MIN_DEPTH}if(this.MIN_HEIGHT>this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2]){this.aerialViewBoundsLowerPoint[2]=(this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.MIN_HEIGHT/2;this.aerialViewBoundsUpperPoint[2]=this.aerialViewBoundsLowerPoint[2]+this.MIN_HEIGHT}}}};j.prototype.updateAerialViewBounds=function(l,o,n,m){if(this.aerialViewBoundsLowerPoint==null){this.aerialViewBoundsLowerPoint=[l,o,n];this.aerialViewBoundsUpperPoint=[l,o,m]}else{this.aerialViewBoundsLowerPoint[0]=Math.min(this.aerialViewBoundsLowerPoint[0],l);this.aerialViewBoundsUpperPoint[0]=Math.max(this.aerialViewBoundsUpperPoint[0],l);this.aerialViewBoundsLowerPoint[1]=Math.min(this.aerialViewBoundsLowerPoint[1],o);this.aerialViewBoundsUpperPoint[1]=Math.max(this.aerialViewBoundsUpperPoint[1],o);this.aerialViewBoundsLowerPoint[2]=Math.min(this.aerialViewBoundsLowerPoint[2],n);this.aerialViewBoundsUpperPoint[2]=Math.max(this.aerialViewBoundsUpperPoint[2],m)}};j.prototype.isItemAtVisibleLevel=function(l){return l.getLevel()==null||l.getLevel().isViewableAndVisible()};j.prototype.updateCameraIntervalToAerialViewCenter=function(){var m=this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0];var o=this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1];var l=this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2];var n=Math.sqrt(m*m+o*o+l*l)/2;this.minDistanceToAerialViewCenter=n*1.05;this.maxDistanceToAerialViewCenter=Math.max(5*this.minDistanceToAerialViewCenter,2500)};j.prototype.moveCamera=function(m){m*=5;var l=this.getCameraToAerialViewCenterDistance()-m;this.placeCameraAt(l,false)};j.prototype.placeCameraAt=function(l,n){l=Math.max(l,this.minDistanceToAerialViewCenter);l=Math.min(l,this.maxDistanceToAerialViewCenter);if(n){l=Math.min(l,3*this.minDistanceToAerialViewCenter)}var m=l*Math.cos(this.topCamera.getPitch());this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(this.topCamera.getYaw())*m));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(this.topCamera.getYaw())*m));this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+Math.sin(this.topCamera.getPitch())*l)};j.prototype.rotateCameraYaw=function(n){var l=this.topCamera.getYaw()+n;var m=this.getCameraToAerialViewCenterDistance()*Math.cos(this.topCamera.getPitch());this.topCamera.setYaw(l);this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(l)*m));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(l)*m))};j.prototype.rotateCameraPitch=function(o){var n=this.topCamera.getPitch()+o;n=Math.max(n,0);n=Math.min(n,Math.PI/2);var l=this.getCameraToAerialViewCenterDistance();var m=l*Math.cos(n);this.topCamera.setPitch(n);this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+(Math.sin(this.topCamera.getYaw())*m));this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-(Math.cos(this.topCamera.getYaw())*m));this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+(l*Math.sin(n)))};j.prototype.goToCamera=function(l){this.topCamera.setCamera(l);this.topCamera.setTime(l.getTime());this.topCamera.setLens(l.getLens());this.updateCameraFromHomeBounds(false)};j.prototype.exit=function(){this.topCamera=null;var m=this.__parent.home.getWalls();for(var p=0;p<m.length;p++){var s=m[p];s.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeWallsListener((this.wallsListener));var x=this.__parent.home.getFurniture();for(var o=0;o<x.length;o++){var y=x[o];y.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeFurnitureListener((this.furnitureListener));var u=this.__parent.home.getRooms();for(var z=0;z<u.length;z++){var l=u[z];l.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeRoomsListener((this.roomsListener));var t=this.__parent.home.getLabels();for(var w=0;w<t.length;w++){var r=t[w];r.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLabelsListener((this.labelsListener));var q=this.__parent.home.getLevels();for(var v=0;v<q.length;v++){var n=q[v];n.removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLevelsListener((this.levelsListener));this.__parent.home.removeSelectionListener(this.selectionListener);this.__parent.preferences.removePropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)};return j}(g.CameraControllerState));g.TopCameraState=f;f.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.TopCameraState";(function(j){var l=(function(){function m(n){this.__parent=n}m.prototype.propertyChange=function(n){this.__parent.updateCameraFromHomeBounds(false)};return m}());j.TopCameraState$0=l;l.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var k=(function(){function m(n){this.__parent=n}m.prototype.selectionChanged=function(n){this.__parent.updateCameraFromHomeBounds(false)};return m}());j.TopCameraState$1=k;k.__interfaces=["java.util.EventListener","com.eteks.sweethome3d.model.SelectionListener"]})(f=g.TopCameraState||(g.TopCameraState={}));var e=(function(k){__extends(j,k);function j(l){var m=k.call(this)||this;m.__parent=l;m.observerCamera=null;m.levelElevationChangeListener=new j.ObserverCameraState$0(m);m.levelsListener=function(n){if(n.getType()===CollectionEvent.Type.ADD){n.getItem().addPropertyChangeListener(m.levelElevationChangeListener)}else{if(n.getType()===CollectionEvent.Type.DELETE){n.getItem().removePropertyChangeListener(m.levelElevationChangeListener)}}m.updateCameraMinimumElevation()};return m}j.prototype.enter=function(){this.observerCamera=this.__parent.home.getCamera();var l=this.__parent.home.getLevels();for(var m=0;m<l.length;m++){var n=l[m];n.addPropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.addLevelsListener((this.levelsListener));if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.moveCamera=function(l){this.observerCamera.setX(this.observerCamera.getX()-Math.sin(this.observerCamera.getYaw())*l);this.observerCamera.setY(this.observerCamera.getY()+Math.cos(this.observerCamera.getYaw())*l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.moveCameraSideways=function(l){this.observerCamera.setX(this.observerCamera.getX()-Math.cos(this.observerCamera.getYaw())*l);this.observerCamera.setY(this.observerCamera.getY()-Math.sin(this.observerCamera.getYaw())*l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.elevateCamera=function(m){var l=this.observerCamera.getZ()+m;l=Math.min(Math.max(l,this.getMinimumElevation()),this.__parent.preferences.getLengthUnit().getMaximumElevation());this.observerCamera.setZ(l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.updateCameraMinimumElevation=function(){this.observerCamera.setZ(Math.max(this.observerCamera.getZ(),this.getMinimumElevation()))};j.prototype.getMinimumElevation=function(){var l=this.__parent.home.getLevels();if(l.length>0){return 10+l[0].getElevation()}else{return 10}};j.prototype.rotateCameraYaw=function(l){this.observerCamera.setYaw(this.observerCamera.getYaw()+l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.rotateCameraPitch=function(m){var l=this.observerCamera.getPitch()+m;l=Math.min(Math.max(-Math.PI/2,l),Math.PI/2);this.observerCamera.setPitch(l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.modifyFieldOfView=function(m){var l=this.observerCamera.getFieldOfView()+m;l=Math.min(Math.max((function(n){return n*Math.PI/180})(2),l),(function(n){return n*Math.PI/180})(120));this.observerCamera.setFieldOfView(l);if(this.__parent.preferences.isObserverCameraSelectedAtChange()){this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}};j.prototype.goToCamera=function(l){this.observerCamera.setCamera(l);this.observerCamera.setTime(l.getTime());this.observerCamera.setLens(l.getLens())};j.prototype.exit=function(){var p=this;var o=this.__parent.home.getSelectedItems();if((o.indexOf((this.observerCamera))>=0)){o=(o.slice(0));(function(q){return q.splice(q.indexOf(p.observerCamera),1)})(o);this.__parent.home.setSelectedItems(o)}var n=this.__parent.home.getLevels();for(var l=0;l<n.length;l++){var m=n[l];m.removePropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.removeLevelsListener((this.levelsListener));this.observerCamera=null};return j}(g.CameraControllerState));g.ObserverCameraState=e;e.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.ObserverCameraState";(function(j){var k=(function(){function l(m){this.__parent=m}l.prototype.propertyChange=function(m){if((function(o,n){if(o&&o.equals){return o.equals(n)}else{return o===n}})("ELEVATION",m.getPropertyName())){this.__parent.updateCameraMinimumElevation()}};return l}());j.ObserverCameraState$0=k;k.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(e=g.ObserverCameraState||(g.ObserverCameraState={}));var d=(function(){function j(k,l){this.home=l;this.__parent=k}j.prototype.propertyChange=function(k){this.__parent.setCameraState(this.home.getCamera()===this.home.getTopCamera()?this.__parent.topCameraState:this.__parent.observerCameraState)};return j}());g.HomeController3D$0=d;d.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var c=(function(){function j(k,l){this.home=l;this.__parent=k}j.prototype.propertyChange=function(k){if((function(m,l){if(m&&m.equals){return m.equals(l)}else{return m===l}})("ELEVATION",k.getPropertyName())&&this.home.getEnvironment().isObserverCameraElevationAdjusted()){this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+k.getNewValue()-k.getOldValue()))}};return j}());g.HomeController3D$1=c;c.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var b=(function(){function j(l,m,k){this.home=m;this.levelElevationChangeListener=k;this.__parent=l}j.prototype.propertyChange=function(l){var k=l.getOldValue();var m=this.home.getSelectedLevel();if(this.home.getEnvironment().isObserverCameraElevationAdjusted()){this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+(m==null?0:m.getElevation())-(k==null?0:k.getElevation())))}if(k!=null){k.removePropertyChangeListener(this.levelElevationChangeListener)}if(m!=null){m.addPropertyChangeListener(this.levelElevationChangeListener)}};return j}());g.HomeController3D$2=b;b.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"];var a=(function(){function j(k,l){this.home=l;this.__parent=k}j.prototype.propertyChange=function(l){var n=this.home.getLevels();var m=this.home.getSelectedLevel();var o=true;for(var k=0;k<n.length;k++){n[k].setVisible(o);if(n[k]===m&&!this.home.getEnvironment().isAllLevelsVisible()){o=false}}};return j}());g.HomeController3D$3=a;a.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(HomeController3D||(HomeController3D={}));var CatalogDoorOrWindow=(function(b){__extends(a,b);function a(U,v,w,an,M,W,V,u,m,g,c,r,f,q,i,G,F,at,ak,D,ag,ai,ap,x,au,E,X,t,p,R,l,am,d){var k=this;if(((typeof U==="string")||U===null)&&((typeof v==="string")||v===null)&&((typeof w==="string")||w===null)&&((typeof an==="string")||an===null)&&((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||(typeof M[0]==="string")))||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((u!=null&&(u.__interfaces!=null&&u.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((m!=null&&(m.__interfaces!=null&&m.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||m.constructor!=null&&m.constructor.__interfaces!=null&&m.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||m===null)&&((g!=null&&(g.__interfaces!=null&&g.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||g.constructor!=null&&g.constructor.__interfaces!=null&&g.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||g===null)&&((typeof c==="number")||c===null)&&((typeof r==="number")||r===null)&&((typeof f==="number")||f===null)&&((typeof q==="number")||q===null)&&((typeof i==="number")||i===null)&&((typeof G==="boolean")||G===null)&&((typeof F==="string")||F===null)&&((typeof at==="number")||at===null)&&((typeof ak==="number")||ak===null)&&((typeof D==="boolean")||D===null)&&((typeof ag==="boolean")||ag===null)&&((ai!=null&&ai instanceof Array&&(ai.length==0||ai[0]==null||(ai[0]!=null&&ai[0] instanceof Sash)))||ai===null)&&((ap!=null&&ap instanceof Array&&(ap.length==0||ap[0]==null||ap[0] instanceof Array))||ap===null)&&((typeof x==="boolean")||x===null)&&((typeof au==="number")||au===null)&&((typeof E==="string")||E===null)&&((typeof X==="boolean")||X===null)&&((typeof t==="boolean")||t===null)&&((typeof p==="boolean")||p===null)&&((R!=null&&R instanceof Big)||R===null)&&((l!=null&&l instanceof Big)||l===null)&&((typeof am==="string")||am===null)&&((d!=null&&(d instanceof Object))||d===null)){var al=Array.prototype.slice.call(arguments);k=b.call(this,U,v,w,an,M,W,V,u,m,g,c,r,f,q,i,G,null,ap,x,au,E,X,t,p,false,R,l,am,d)||this;k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null;k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null;(function(){k.cutOutShape=F;k.wallThickness=at;k.wallDistance=ak;k.wallCutOutOnBothSides=D;k.widthDepthDeformable=ag;k.sashes=ai})()}else{if(((typeof U==="string")||U===null)&&((typeof v==="string")||v===null)&&((typeof w==="string")||w===null)&&((typeof an==="string")||an===null)&&((M!=null&&M instanceof Array&&(M.length==0||M[0]==null||(typeof M[0]==="string")))||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((u!=null&&(u.__interfaces!=null&&u.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||u.constructor!=null&&u.constructor.__interfaces!=null&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||u===null)&&((m!=null&&(m.__interfaces!=null&&m.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||m.constructor!=null&&m.constructor.__interfaces!=null&&m.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||m===null)&&((g!=null&&(g.__interfaces!=null&&g.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||g.constructor!=null&&g.constructor.__interfaces!=null&&g.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||g===null)&&((typeof c==="number")||c===null)&&((typeof r==="number")||r===null)&&((typeof f==="number")||f===null)&&((typeof q==="number")||q===null)&&((typeof i==="number")||i===null)&&((typeof G==="boolean")||G===null)&&((typeof F==="string")||F===null)&&((typeof at==="number")||at===null)&&((typeof ak==="number")||ak===null)&&((typeof D==="boolean")||D===null)&&((typeof ag==="boolean")||ag===null)&&((ai!=null&&ai instanceof Array&&(ai.length==0||ai[0]==null||(ai[0]!=null&&ai[0] instanceof Sash)))||ai===null)&&((ap!=null&&ap instanceof Array&&(ap.length==0||ap[0]==null||ap[0] instanceof Array))||ap===null)&&((typeof x==="boolean")||x===null)&&((typeof au==="number")||au===null)&&((typeof E==="string")||E===null)&&((typeof X==="boolean")||X===null)&&((typeof t==="boolean")||t===null)&&((typeof p==="boolean")||p===null)&&((R!=null&&R instanceof Big)||R===null)&&((l!=null&&l instanceof Big)||l===null)&&((typeof am==="string")||am===null)&&d===undefined){var al=Array.prototype.slice.call(arguments);var aj=Array.prototype.slice.call(arguments);var ah=null;k=b.call(this,U,v,w,an,M,W,V,u,m,g,c,r,f,q,i,G,null,ap,x,au,E,X,t,p,false,R,l,am,ah)||this;k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null;k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null;(function(){k.cutOutShape=F;k.wallThickness=at;k.wallDistance=ak;k.wallCutOutOnBothSides=D;k.widthDepthDeformable=ag;k.sashes=ai})()}else{if(((typeof U==="string")||U===null)&&((v!=null&&(v.__interfaces!=null&&v.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||v.constructor!=null&&v.constructor.__interfaces!=null&&v.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||v===null)&&((w!=null&&(w.__interfaces!=null&&w.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||w.constructor!=null&&w.constructor.__interfaces!=null&&w.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||w===null)&&((typeof an==="number")||an===null)&&((typeof M==="number")||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((typeof u==="boolean")||u===null)&&((typeof m==="number")||m===null)&&((typeof g==="number")||g===null)&&((c!=null&&c instanceof Array&&(c.length==0||c[0]==null||(c[0]!=null&&c[0] instanceof Sash)))||c===null)&&((typeof r==="number")||r===null)&&((f!=null&&f instanceof Array&&(f.length==0||f[0]==null||f[0] instanceof Array))||f===null)&&((typeof q==="boolean")||q===null)&&((typeof i==="number")||i===null)&&((typeof G==="string")||G===null)&&((typeof F==="number")||F===null)&&((typeof at==="boolean")||at===null)&&ak===undefined&&D===undefined&&ag===undefined&&ai===undefined&&ap===undefined&&x===undefined&&au===undefined&&E===undefined&&X===undefined&&t===undefined&&p===undefined&&R===undefined&&l===undefined&&am===undefined&&d===undefined){var al=Array.prototype.slice.call(arguments);var Y=al[0];var C=al[1];var Q=al[2];var o=al[3];var ae=al[4];var j=al[5];var K=al[6];var af=al[7];var ar=al[8];var T=al[9];var ac=al[10];var L=al[11];var z=al[12];var N=al[13];var A=al[14];var I=al[15];var ao=al[16];var e=al[17];k=b.call(this,Y,C,Q,o,ae,j,K,af,null,L,z,N,A,I,ao,e)||this;k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null;k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null;(function(){k.wallThickness=ar;k.wallDistance=T;k.wallCutOutOnBothSides=true;k.widthDepthDeformable=true;k.sashes=ac;k.cutOutShape=null})()}else{if(((typeof U==="string")||U===null)&&((typeof v==="string")||v===null)&&((typeof w==="string")||w===null)&&((an!=null&&(an.__interfaces!=null&&an.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||an.constructor!=null&&an.constructor.__interfaces!=null&&an.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||an===null)&&((M!=null&&(M.__interfaces!=null&&M.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||M.constructor!=null&&M.constructor.__interfaces!=null&&M.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||M===null)&&((typeof W==="number")||W===null)&&((typeof V==="number")||V===null)&&((typeof u==="number")||u===null)&&((typeof m==="number")||m===null)&&((typeof g==="boolean")||g===null)&&((typeof c==="number")||c===null)&&((typeof r==="number")||r===null)&&((f!=null&&f instanceof Array&&(f.length==0||f[0]==null||(f[0]!=null&&f[0] instanceof Sash)))||f===null)&&((q!=null&&q instanceof Array&&(q.length==0||q[0]==null||q[0] instanceof Array))||q===null)&&((typeof i==="string")||i===null)&&((typeof G==="boolean")||G===null)&&((F!=null&&F instanceof Big)||F===null)&&((at!=null&&at instanceof Big)||at===null)&&ak===undefined&&D===undefined&&ag===undefined&&ai===undefined&&ap===undefined&&x===undefined&&au===undefined&&E===undefined&&X===undefined&&t===undefined&&p===undefined&&R===undefined&&l===undefined&&am===undefined&&d===undefined){var al=Array.prototype.slice.call(arguments);var B=al[3];var P=al[4];var n=al[5];var ab=al[6];var h=al[7];var J=al[8];var ad=al[9];var aq=al[10];var S=al[11];var Z=al[12];var y=al[13];var H=al[14];var O=al[15];var aa=al[16];var s=al[17];k.wallThickness=0;k.wallDistance=0;k.wallCutOutOnBothSides=false;k.widthDepthDeformable=false;k.sashes=null;k.cutOutShape=null}else{throw new Error("invalid overload")}}}}return k}a.prototype.getWallThickness=function(){return this.wallThickness};a.prototype.getWallDistance=function(){return this.wallDistance};a.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides};a.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable};a.prototype.getSashes=function(){if(this.sashes.length===0){return this.sashes}else{return this.sashes.slice(0)}};a.prototype.getCutOutShape=function(){return this.cutOutShape};a.prototype.isDoorOrWindow=function(){return true};a.prototype.isHorizontallyRotatable=function(){return false};return a}(CatalogPieceOfFurniture));CatalogDoorOrWindow.__class="com.eteks.sweethome3d.model.CatalogDoorOrWindow";CatalogDoorOrWindow.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture","java.lang.Comparable"];var CatalogLight=(function(b){__extends(a,b);function a(t,J,y,F,r,d,c,D,k,h,u,I,s,v,z,f,H,q,e,C,g,o,j,A,G,B,x,p,i,n){var w=this;if(((typeof t==="string")||t===null)&&((typeof J==="string")||J===null)&&((typeof y==="string")||y===null)&&((typeof F==="string")||F===null)&&((r!=null&&r instanceof Array&&(r.length==0||r[0]==null||(typeof r[0]==="string")))||r===null)&&((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)&&((D!=null&&(D.__interfaces!=null&&D.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||D.constructor!=null&&D.constructor.__interfaces!=null&&D.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||D===null)&&((k!=null&&(k.__interfaces!=null&&k.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||k.constructor!=null&&k.constructor.__interfaces!=null&&k.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||k===null)&&((h!=null&&(h.__interfaces!=null&&h.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||h===null)&&((typeof u==="number")||u===null)&&((typeof I==="number")||I===null)&&((typeof s==="number")||s===null)&&((typeof v==="number")||v===null)&&((typeof z==="number")||z===null)&&((typeof f==="boolean")||f===null)&&((H!=null&&H instanceof Array&&(H.length==0||H[0]==null||(H[0]!=null&&H[0] instanceof LightSource)))||H===null)&&((typeof q==="string")||q===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0] instanceof Array))||e===null)&&((typeof C==="boolean")||C===null)&&((typeof g==="number")||g===null)&&((typeof o==="string")||o===null)&&((typeof j==="boolean")||j===null)&&((typeof A==="boolean")||A===null)&&((typeof G==="boolean")||G===null)&&((typeof B==="boolean")||B===null)&&((x!=null&&x instanceof Big)||x===null)&&((p!=null&&p instanceof Big)||p===null)&&((typeof i==="string")||i===null)&&((n!=null&&(n instanceof Object))||n===null)){var m=Array.prototype.slice.call(arguments);w=b.call(this,t,J,y,F,r,d,c,D,k,h,u,I,s,v,z,f,q,e,C,g,o,j,A,G,B,x,p,i,n)||this;w.lightSources=null;w.lightSources=null;(function(){w.lightSources=H})()}else{if(((typeof t==="string")||t===null)&&((typeof J==="string")||J===null)&&((typeof y==="string")||y===null)&&((typeof F==="string")||F===null)&&((r!=null&&r instanceof Array&&(r.length==0||r[0]==null||(typeof r[0]==="string")))||r===null)&&((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)&&((D!=null&&(D.__interfaces!=null&&D.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||D.constructor!=null&&D.constructor.__interfaces!=null&&D.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||D===null)&&((k!=null&&(k.__interfaces!=null&&k.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||k.constructor!=null&&k.constructor.__interfaces!=null&&k.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||k===null)&&((h!=null&&(h.__interfaces!=null&&h.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))||h===null)&&((typeof u==="number")||u===null)&&((typeof I==="number")||I===null)&&((typeof s==="number")||s===null)&&((typeof v==="number")||v===null)&&((typeof z==="number")||z===null)&&((typeof f==="boolean")||f===null)&&((H!=null&&H instanceof Array&&(H.length==0||H[0]==null||(H[0]!=null&&H[0] instanceof LightSource)))||H===null)&&((typeof q==="string")||q===null)&&((e!=null&&e instanceof Array&&(e.length==0||e[0]==null||e[0] instanceof Array))||e===null)&&((typeof C==="boolean")||C===null)&&((typeof g==="number")||g===null)&&((typeof o==="string")||o===null)&&((typeof j==="boolean")||j===null)&&((typeof A==="boolean")||A===null)&&((typeof G==="boolean")||G===null)&&((typeof B==="boolean")||B===null)&&((x!=null&&x instanceof Big)||x===null)&&((p!=null&&p instanceof Big)||p===null)&&((typeof i==="string")||i===null)&&n===undefined){var m=Array.prototype.slice.call(arguments);var E=Array.prototype.slice.call(arguments);var l=null;w=b.call(this,t,J,y,F,r,d,c,D,k,h,u,I,s,v,z,f,q,e,C,g,o,j,A,G,B,x,p,i,l)||this;w.lightSources=null;w.lightSources=null;(function(){w.lightSources=H})()}else{throw new Error("invalid overload")}}return w}a.prototype.getLightSources=function(){if(this.lightSources.length===0){return this.lightSources}else{return this.lightSources.slice(0)}};return a}(CatalogPieceOfFurniture));CatalogLight.__class="com.eteks.sweethome3d.model.CatalogLight";CatalogLight.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture","java.lang.Comparable","com.eteks.sweethome3d.model.Light"];var Camera=(function(b){__extends(a,b);function a(o,m,l,f,c,h,e,i){var k=this;if(((typeof o==="number")||o===null)&&((typeof m==="number")||m===null)&&((typeof l==="number")||l===null)&&((typeof f==="number")||f===null)&&((typeof c==="number")||c===null)&&((typeof h==="number")||h===null)&&((typeof e==="number")||e===null)&&((typeof i==="number")||i===null)){var j=Array.prototype.slice.call(arguments);k=b.call(this)||this;k.name=null;k.x=0;k.y=0;k.z=0;k.yaw=0;k.pitch=0;k.fieldOfView=0;k.time=0;k.lens=null;k.lensName=null;k.propertyChangeSupport=new PropertyChangeSupport(k);k.name=null;k.x=0;k.y=0;k.z=0;k.yaw=0;k.pitch=0;k.fieldOfView=0;k.time=0;k.lens=null;k.lensName=null;(function(){k.x=o;k.y=m;k.z=l;k.yaw=f;k.pitch=c;k.fieldOfView=h;k.time=e;k.lens=i})()}else{if(((typeof o==="number")||o===null)&&((typeof m==="number")||m===null)&&((typeof l==="number")||l===null)&&((typeof f==="number")||f===null)&&((typeof c==="number")||c===null)&&((typeof h==="number")||h===null)&&e===undefined&&i===undefined){var j=Array.prototype.slice.call(arguments);var d=Array.prototype.slice.call(arguments);var n=a.midday();var g=a.Lens.PINHOLE;k=b.call(this)||this;k.name=null;k.x=0;k.y=0;k.z=0;k.yaw=0;k.pitch=0;k.fieldOfView=0;k.time=0;k.lens=null;k.lensName=null;k.propertyChangeSupport=new PropertyChangeSupport(k);k.name=null;k.x=0;k.y=0;k.z=0;k.yaw=0;k.pitch=0;k.fieldOfView=0;k.time=0;k.lens=null;k.lensName=null;(function(){k.x=o;k.y=m;k.z=l;k.yaw=f;k.pitch=c;k.fieldOfView=h;k.time=n;k.lens=g})()}else{throw new Error("invalid overload")}}return k}a.midday=function(){var c=new Date();(function(f,e){return f.UTC?f.setUTCHours(e):f.setHours(e)})(c,12);(function(f,e){return f.UTC?f.setUTCMinutes(e):f.setMinutes(e)})(c,0);(function(f,e){return f.UTC?f.setUTCSeconds(e):f.setSeconds(e)})(c,0);(function(f,e){return f.UTC?f.setUTCMilliseconds(e):f.setMilliseconds(e)})(c,0);return c.getTime()};a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.name))){var d=this.name;this.name=c;this.propertyChangeSupport.firePropertyChange("NAME",d,c)}};a.prototype.getYaw=function(){return this.yaw};a.prototype.setYaw=function(d){if(d!==this.yaw){var c=this.yaw;this.yaw=d;this.propertyChangeSupport.firePropertyChange("YAW",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.propertyChangeSupport.firePropertyChange("PITCH",c,d)}};a.prototype.getFieldOfView=function(){return this.fieldOfView};a.prototype.setFieldOfView=function(c){if(c!==this.fieldOfView){var d=this.fieldOfView;this.fieldOfView=c;this.propertyChangeSupport.firePropertyChange("FIELD_OF_VIEW",d,c)}};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.propertyChangeSupport.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.propertyChangeSupport.firePropertyChange("Y",c,d)}};a.prototype.getZ=function(){return this.z};a.prototype.setZ=function(d){if(d!==this.z){var c=this.z;this.z=d;this.propertyChangeSupport.firePropertyChange("Z",c,d)}};a.prototype.getTime=function(){return this.time};a.prototype.setTime=function(c){if(this.time!==c){var d=this.time;this.time=c;this.propertyChangeSupport.firePropertyChange("TIME",d,c)}};a.convertTimeToTimeZone=function(d,e){var f=new Date();f.setTime(d);var c=new Date();(function(h,g){return h.UTC?h.setUTCFullYear(g):h.setFullYear(g)})(c,(function(g){return g.UTC?g.getUTCFullYear():g.getFullYear()})(f));(function(h,g){return h.UTC?h.setUTCMonth(g):h.setMonth(g)})(c,(function(g){return g.UTC?g.getUTCMonth():g.getMonth()})(f));(function(h,g){return h.UTC?h.setUTCDate(g):h.setDate(g)})(c,(function(g){return g.UTC?g.getUTCDate():g.getDate()})(f));(function(h,g){return h.UTC?h.setUTCHours(g):h.setHours(g)})(c,(function(g){return g.UTC?g.getUTCHours():g.getHours()})(f));(function(h,g){return h.UTC?h.setUTCMinutes(g):h.setMinutes(g)})(c,(function(g){return g.UTC?g.getUTCMinutes():g.getMinutes()})(f));(function(h,g){return h.UTC?h.setUTCSeconds(g):h.setSeconds(g)})(c,(function(g){return g.UTC?g.getUTCSeconds():g.getSeconds()})(f));(function(h,g){return h.UTC?h.setUTCMilliseconds(g):h.setMilliseconds(g)})(c,(function(g){return g.UTC?g.getUTCMilliseconds():g.getMilliseconds()})(f));return c.getTime()};a.prototype.getLens=function(){return this.lens};a.prototype.setLens=function(c){if(c!==this.lens){var d=this.lens;this.lens=c;this.propertyChangeSupport.firePropertyChange("LENS",d,c)}};a.prototype.setCamera=function(c){this.setX(c.getX());this.setY(c.getY());this.setZ(c.getZ());this.setYaw(c.getYaw());this.setPitch(c.getPitch());this.setFieldOfView(c.getFieldOfView())};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);return c};return a}(HomeObject));Camera.__class="com.eteks.sweethome3d.model.Camera";Camera.__interfaces=["java.lang.Cloneable","java.io.Serializable"];(function(b){var a;(function(c){c[c.PINHOLE=0]="PINHOLE";c[c.NORMAL=1]="NORMAL";c[c.FISHEYE=2]="FISHEYE";c[c.SPHERICAL=3]="SPHERICAL"})(a=b.Lens||(b.Lens={}))})(Camera||(Camera={}));var Compass=(function(b){__extends(a,b);function a(c,f,d){var e=b.call(this)||this;e.propertyChangeSupport=new PropertyChangeSupport(e);e.x=0;e.y=0;e.diameter=0;e.visible=false;e.northDirection=0;e.latitude=0;e.longitude=0;e.timeZone=null;e.pointsCache=null;e.dateCache=null;e.sunElevationCache=0;e.sunAzimuthCache=0;e.x=c;e.y=f;e.diameter=d;e.visible=true;e.timeZone="UTC";e.initGeographicPoint();return e}a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.pointsCache=null;this.propertyChangeSupport.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.pointsCache=null;this.propertyChangeSupport.firePropertyChange("Y",c,d)}};a.prototype.getDiameter=function(){return this.diameter};a.prototype.setDiameter=function(c){if(c!==this.diameter){var d=this.diameter;this.diameter=c;this.pointsCache=null;this.propertyChangeSupport.firePropertyChange("DIAMETER",d,c)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.propertyChangeSupport.firePropertyChange("VISIBLE",!c,c)}};a.prototype.getNorthDirection=function(){return this.northDirection};a.prototype.setNorthDirection=function(d){if(d!==this.northDirection){var c=this.northDirection;this.northDirection=d;this.pointsCache=null;this.propertyChangeSupport.firePropertyChange("NORTH_DIRECTION",c,d)}};a.prototype.getLatitude=function(){return this.latitude};a.prototype.setLatitude=function(d){if(d!==this.latitude){var c=this.latitude;this.latitude=d;this.dateCache=null;this.propertyChangeSupport.firePropertyChange("LATITUDE",c,d)}};a.prototype.getLongitude=function(){return this.longitude};a.prototype.setLongitude=function(d){if(d!==this.longitude){var c=this.longitude;this.longitude=d;this.dateCache=null;this.propertyChangeSupport.firePropertyChange("LONGITUDE",c,d)}};a.prototype.getTimeZone=function(){return this.timeZone};a.prototype.setTimeZone=function(c){if(!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(this.timeZone,c)){if(c==null){throw new IllegalArgumentException("Time zone ID can't be null")}var d=this.timeZone;this.timeZone=c;this.dateCache=null;this.propertyChangeSupport.firePropertyChange("TIME_ZONE",d,c)}};a.prototype.getPoints=function(){if(this.pointsCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());var e=java.awt.geom.AffineTransform.getRotateInstance(this.getNorthDirection(),this.getX(),this.getY());this.pointsCache=(function(h){var g=function(k){if(k.length==0){return 0}else{var l=[];for(var j=0;j<k[0];j++){l.push(g(k.slice(1)))}return l}};return g(h)})([4,2]);var f=c.getPathIterator(e);for(var d=0;d<this.pointsCache.length;d++){f.currentSegment(this.pointsCache[d]);f.next()}}return[this.pointsCache[0].slice(0),this.pointsCache[1].slice(0),this.pointsCache[2].slice(0),this.pointsCache[3].slice(0)]};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter()).intersects(d)};a.prototype.containsPoint=function(c,f,e){var d=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);return c};a.prototype.computeJulianDay=function(i,h,k,f,e,c,m,g){var n=k+f/24+e/1440+c/86400;if(h===1||h===2){i-=1;h+=12}var l=(i/100|0);var j=2-l+(l/4|0);var d=((365.25*(i+4716))|0)+(((30.6001*(h+1)))|0)+n+j-1524.5;d-=(m+g)/24;d-=2451545;return d};a.prototype.toSiderealTime=function(c){var d=c/36525;var e=(24110.54841+(8640184.812866*d)+(0.093104*Math.pow(d,2))-(0.0000062*Math.pow(d,3)))/3600;return((e/24)-((e/24)|0))*24};a.prototype.initGeographicPoint=function(){var y;if(a.timeZoneGeographicPointsReference==null||a.timeZoneGeographicPointsReference==null){y=({});var g=new a.GeographicPoint(-13.833333,-171.73334);(y["Etc/GMT+11"]=g);(y["Pacific/Apia"]=g);(y["Pacific/Midway"]=new a.GeographicPoint(28.2,-177.35));(y["Pacific/Niue"]=new a.GeographicPoint(-19.055,-169.92));(y["Pacific/Pago_Pago"]=new a.GeographicPoint(-14.278055,-170.7025));(y["Pacific/Samoa"]=g);(y["US/Samoa"]=g);(y["America/Adak"]=new a.GeographicPoint(51.88,-176.65805));(y["America/Atka"]=new a.GeographicPoint(52.19611,-174.20056));var A=new a.GeographicPoint(21.306944,-157.85834);(y["Etc/GMT+10"]=A);(y["Pacific/Fakaofo"]=new a.GeographicPoint(-9.3653,-171.215));(y["Pacific/Honolulu"]=A);(y["Pacific/Johnston"]=new a.GeographicPoint(16.75,-169.517));(y["Pacific/Rarotonga"]=new a.GeographicPoint(-21.233,-159.783));(y["Pacific/Tahiti"]=new a.GeographicPoint(-17.533333,-149.56667));(y["SystemV/HST10"]=A);(y["US/Aleutian"]=new a.GeographicPoint(54.817,164.033));(y["US/Hawaii"]=A);(y["Pacific/Marquesas"]=new a.GeographicPoint(-9.45,-139.38));var r=new a.GeographicPoint(61.218056,-149.90028);(y["America/Anchorage"]=r);(y["America/Juneau"]=new a.GeographicPoint(58.301945,-134.41972));(y["America/Nome"]=new a.GeographicPoint(64.501114,-165.40639));(y["America/Yakutat"]=new a.GeographicPoint(59.546944,-139.72722));(y["Etc/GMT+9"]=r);(y["Pacific/Gambier"]=new a.GeographicPoint(-23.1178,-134.97));(y["SystemV/YST9"]=r);(y["SystemV/YST9YDT"]=r);(y["US/Alaska"]=r);(y["America/Dawson"]=new a.GeographicPoint(64.066666,-139.41667));(y["America/Ensenada"]=new a.GeographicPoint(31.866667,-116.61667));var f=new a.GeographicPoint(34.052223,-118.242775);(y["America/Los_Angeles"]=f);(y["America/Santa_Isabel"]=new a.GeographicPoint(28.383333,-113.35));(y["America/Tijuana"]=new a.GeographicPoint(32.533333,-117.01667));(y["America/Vancouver"]=new a.GeographicPoint(49.25,-123.13333));(y["America/Whitehorse"]=new a.GeographicPoint(60.716667,-135.05));(y["Canada/Pacific"]=new a.GeographicPoint(49.25,-123.13333));(y["Canada/Yukon"]=new a.GeographicPoint(60.716667,-135.05));(y["Etc/GMT+8"]=f);(y["Mexico/BajaNorte"]=new a.GeographicPoint(32.533333,-117.01667));(y["Pacific/Pitcairn"]=new a.GeographicPoint(-25.0667,-130.1));(y["SystemV/PST8"]=f);(y["SystemV/PST8PDT"]=f);(y["US/Pacific"]=f);(y["US/Pacific-New"]=f);(y["America/Boise"]=new a.GeographicPoint(43.61361,-116.2025));(y["America/Cambridge_Bay"]=new a.GeographicPoint(69.11667,-105.03333));(y["America/Chihuahua"]=new a.GeographicPoint(28.633333,-106.083336));(y["America/Dawson_Creek"]=new a.GeographicPoint(55.766666,-120.23333));var k=new a.GeographicPoint(39.739166,-104.98417);(y["America/Denver"]=k);(y["America/Edmonton"]=new a.GeographicPoint(53.55,-113.5));(y["America/Hermosillo"]=new a.GeographicPoint(29.066668,-110.96667));(y["America/Inuvik"]=new a.GeographicPoint(68.35,-133.7));(y["America/Mazatlan"]=new a.GeographicPoint(23.216667,-106.416664));(y["America/Ojinaga"]=new a.GeographicPoint(29.566668,-104.416664));(y["America/Phoenix"]=new a.GeographicPoint(33.448334,-112.07333));(y["America/Shiprock"]=new a.GeographicPoint(36.785557,-108.686386));(y["America/Yellowknife"]=new a.GeographicPoint(62.45,-114.35));(y["Canada/Mountain"]=new a.GeographicPoint(53.55,-113.5));(y["Etc/GMT+7"]=k);(y["Mexico/BajaSur"]=new a.GeographicPoint(32.567,-116.633));(y["SystemV/MST7"]=k);(y["SystemV/MST7MDT"]=k);(y["US/Arizona"]=new a.GeographicPoint(33.448334,-112.07333));(y["US/Mountain"]=k);(y["America/Belize"]=new a.GeographicPoint(17.483334,-88.183334));(y["America/Cancun"]=new a.GeographicPoint(21.166668,-86.833336));var w=new a.GeographicPoint(41.85,-87.65);(y["America/Chicago"]=w);(y["America/Costa_Rica"]=new a.GeographicPoint(9.933333,-84.083336));(y["America/El_Salvador"]=new a.GeographicPoint(13.7086115,-89.20306));(y["America/Guatemala"]=new a.GeographicPoint(14.621111,-90.52695));(y["America/Knox_IN"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Managua"]=new a.GeographicPoint(12.150833,-86.26833));(y["America/Matamoros"]=new a.GeographicPoint(25.883333,-97.5));(y["America/Menominee"]=new a.GeographicPoint(45.107777,-87.61417));(y["America/Merida"]=new a.GeographicPoint(20.966667,-89.61667));(y["America/Mexico_City"]=new a.GeographicPoint(19.434168,-99.13861));(y["America/Monterrey"]=new a.GeographicPoint(25.666668,-100.316666));(y["America/Rainy_River"]=new a.GeographicPoint(48.716667,-94.566666));(y["America/Rankin_Inlet"]=new a.GeographicPoint(62.816666,-92.083336));(y["America/Regina"]=new a.GeographicPoint(50.45,-104.61667));(y["America/Swift_Current"]=new a.GeographicPoint(50.283333,-107.76667));(y["America/Tegucigalpa"]=new a.GeographicPoint(14.1,-87.21667));(y["America/Winnipeg"]=new a.GeographicPoint(49.88333,-97.166664));(y["Canada/Central"]=new a.GeographicPoint(50.45,-104.61667));(y["Canada/East-Saskatchewan"]=new a.GeographicPoint(51.216667,-102.46667));(y["Canada/Saskatchewan"]=new a.GeographicPoint(50.45,-104.61667));(y["Chile/EasterIsland"]=new a.GeographicPoint(-27.15,-109.425));(y["Etc/GMT+6"]=w);(y["Mexico/General"]=new a.GeographicPoint(19.434168,-99.13861));(y["Pacific/Easter"]=new a.GeographicPoint(-27.15,-109.425));(y["Pacific/Galapagos"]=new a.GeographicPoint(-0.667,-90.55));(y["SystemV/CST6"]=w);(y["SystemV/CST6CDT"]=w);(y["US/Central"]=w);(y["US/Indiana-Starke"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Atikokan"]=new a.GeographicPoint(48.75,-91.61667));(y["America/Bogota"]=new a.GeographicPoint(4.6,-74.083336));(y["America/Cayman"]=new a.GeographicPoint(19.3,-81.38333));(y["America/Coral_Harbour"]=new a.GeographicPoint(64.13333,-83.166664));(y["America/Detroit"]=new a.GeographicPoint(42.33139,-83.04583));(y["America/Fort_Wayne"]=new a.GeographicPoint(41.130554,-85.12889));(y["America/Grand_Turk"]=new a.GeographicPoint(21.466667,-71.13333));(y["America/Guayaquil"]=new a.GeographicPoint(-2.1666667,-79.9));(y["America/Havana"]=new a.GeographicPoint(23.131945,-82.36417));(y["America/Indianapolis"]=new a.GeographicPoint(39.768333,-86.15806));(y["America/Iqaluit"]=new a.GeographicPoint(63.733334,-68.5));(y["America/Jamaica"]=new a.GeographicPoint(18,-76.8));(y["America/Lima"]=new a.GeographicPoint(-12.05,-77.05));(y["America/Louisville"]=new a.GeographicPoint(38.254166,-85.759445));(y["America/Montreal"]=new a.GeographicPoint(45.5,-73.583336));(y["America/Nassau"]=new a.GeographicPoint(25.083334,-77.35));var o=new a.GeographicPoint(40.71417,-74.006386);(y["America/New_York"]=o);(y["America/Nipigon"]=new a.GeographicPoint(49.016666,-88.25));(y["America/Panama"]=new a.GeographicPoint(8.966667,-79.53333));(y["America/Pangnirtung"]=new a.GeographicPoint(66.13333,-65.75));(y["America/Port-au-Prince"]=new a.GeographicPoint(18.539167,-72.335));(y["America/Resolute"]=new a.GeographicPoint(74.683334,-94.9));(y["America/Thunder_Bay"]=new a.GeographicPoint(48.4,-89.23333));(y["America/Toronto"]=new a.GeographicPoint(43.666668,-79.416664));(y["Canada/Eastern"]=new a.GeographicPoint(43.666668,-79.416664));(y["Etc/GMT+5"]=o);(y["SystemV/EST5"]=o);(y["SystemV/EST5EDT"]=o);(y["US/East-Indiana"]=new a.GeographicPoint(36.8381,-84.85));(y["US/Eastern"]=o);(y["US/Michigan"]=new a.GeographicPoint(42.33139,-83.04583));(y["America/Caracas"]=new a.GeographicPoint(10.5,-66.916664));(y["America/Anguilla"]=new a.GeographicPoint(18.216667,-63.05));(y["America/Antigua"]=new a.GeographicPoint(17.116667,-61.85));(y["America/Aruba"]=new a.GeographicPoint(10.541111,-72.9175));(y["America/Asuncion"]=new a.GeographicPoint(-25.266666,-57.666668));(y["America/Barbados"]=new a.GeographicPoint(13.1,-59.616665));(y["America/Blanc-Sablon"]=new a.GeographicPoint(51.433334,-57.11667));(y["America/Boa_Vista"]=new a.GeographicPoint(2.8166666,-60.666668));(y["America/Campo_Grande"]=new a.GeographicPoint(-20.45,-54.616665));(y["America/Cuiaba"]=new a.GeographicPoint(-15.583333,-56.083332));(y["America/Curacao"]=new a.GeographicPoint(12.1167,-68.933));(y["America/Dominica"]=new a.GeographicPoint(15.3,-61.4));(y["America/Eirunepe"]=new a.GeographicPoint(-6.6666665,-69.86667));(y["America/Glace_Bay"]=new a.GeographicPoint(46.2,-59.966667));(y["America/Goose_Bay"]=new a.GeographicPoint(53.333332,-60.416668));(y["America/Grenada"]=new a.GeographicPoint(12.05,-61.75));(y["America/Guadeloupe"]=new a.GeographicPoint(16.233334,-61.516666));(y["America/Guyana"]=new a.GeographicPoint(6.8,-58.166668));(y["America/Halifax"]=new a.GeographicPoint(44.65,-63.6));(y["America/La_Paz"]=new a.GeographicPoint(-16.5,-68.15));(y["America/Manaus"]=new a.GeographicPoint(-3.1133332,-60.025276));(y["America/Marigot"]=new a.GeographicPoint(18.073,63.0844));(y["America/Martinique"]=new a.GeographicPoint(14.6,-61.083332));(y["America/Moncton"]=new a.GeographicPoint(46.083332,-64.76667));(y["America/Montserrat"]=new a.GeographicPoint(16.7,-62.216667));(y["America/Port_of_Spain"]=new a.GeographicPoint(10.65,-61.516666));(y["America/Porto_Acre"]=new a.GeographicPoint(-9.587778,-67.53555));(y["America/Porto_Velho"]=new a.GeographicPoint(-8.766666,-63.9));(y["America/Puerto_Rico"]=new a.GeographicPoint(18.467,66.117));(y["America/Rio_Branco"]=new a.GeographicPoint(-9.966667,-67.8));var l=new a.GeographicPoint(-33.45,-70.666664);(y["America/Santiago"]=l);(y["America/Santo_Domingo"]=new a.GeographicPoint(18.466667,-69.9));(y["America/St_Barthelemy"]=new a.GeographicPoint(17.8978,-62.851));(y["America/St_Kitts"]=new a.GeographicPoint(17.3,-62.733));(y["America/St_Lucia"]=new a.GeographicPoint(14.0167,-60.9833));(y["America/St_Thomas"]=new a.GeographicPoint(18.3333,-64.9167));(y["America/St_Vincent"]=new a.GeographicPoint(13.1667,-61.2333));(y["America/Thule"]=new a.GeographicPoint(-54.27667,-36.511665));(y["America/Tortola"]=new a.GeographicPoint(18.416666,-64.61667));(y["America/Virgin"]=new a.GeographicPoint(18.34389,-64.931114));(y["Antarctica/Palmer"]=new a.GeographicPoint(-64.25,-62.833));(y["Atlantic/Bermuda"]=new a.GeographicPoint(32.294167,-64.78389));(y["Atlantic/Stanley"]=new a.GeographicPoint(-51.7,-57.85));(y["Brazil/Acre"]=new a.GeographicPoint(-10.883333,-45.083332));(y["Brazil/West"]=new a.GeographicPoint(-10.883333,-45.083332));(y["Canada/Atlantic"]=new a.GeographicPoint(44.65,-63.6));(y["Chile/Continental"]=l);(y["Etc/GMT+4"]=l);(y["SystemV/AST4"]=new a.GeographicPoint(44.65,-63.6));(y["SystemV/AST4ADT"]=new a.GeographicPoint(44.65,-63.6));(y["America/St_Johns"]=new a.GeographicPoint(47.5675,-52.7072));(y["Canada/Newfoundland"]=new a.GeographicPoint(47.5675,-52.7072));(y["America/Araguaina"]=new a.GeographicPoint(-7.16,-48.0575));(y["America/Bahia"]=new a.GeographicPoint(-12.983334,-38.516666));(y["America/Belem"]=new a.GeographicPoint(-1.45,-48.483334));(y["America/Buenos_Aires"]=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Catamarca"]=new a.GeographicPoint(-28.466667,-65.78333));(y["America/Cayenne"]=new a.GeographicPoint(4.9333334,-52.333332));(y["America/Cordoba"]=new a.GeographicPoint(-31.4,-64.183334));(y["America/Fortaleza"]=new a.GeographicPoint(-3.7166667,-38.5));(y["America/Godthab"]=new a.GeographicPoint(64.183334,-51.75));(y["America/Jujuy"]=new a.GeographicPoint(-24.183332,-65.3));(y["America/Maceio"]=new a.GeographicPoint(-9.666667,-35.716667));(y["America/Mendoza"]=new a.GeographicPoint(-32.883335,-68.816666));(y["America/Miquelon"]=new a.GeographicPoint(47.0975,-56.38139));(y["America/Montevideo"]=new a.GeographicPoint(-34.858055,-56.170834));(y["America/Paramaribo"]=new a.GeographicPoint(5.8333335,-55.166668));(y["America/Recife"]=new a.GeographicPoint(-8.05,-34.9));(y["America/Rosario"]=new a.GeographicPoint(-32.95111,-60.66639));(y["America/Santarem"]=new a.GeographicPoint(-2.4333334,-54.7));var x=new a.GeographicPoint(-23.533333,-46.616665);(y["America/Sao_Paulo"]=x);(y["Antarctica/Rothera"]=new a.GeographicPoint(67.567,68.133));(y["Brazil/East"]=x);(y["Etc/GMT+3"]=x);(y["America/Noronha"]=new a.GeographicPoint(3.85,25.417));var C=new a.GeographicPoint(54.25,36.75);(y["Atlantic/South_Georgia"]=C);(y["Brazil/DeNoronha"]=new a.GeographicPoint(3.85,25.417));(y["Etc/GMT+2"]=C);(y["America/Scoresbysund"]=new a.GeographicPoint(70.48333,-21.966667));var u=new a.GeographicPoint(37.483334,-2.5666666);(y["Atlantic/Azores"]=u);(y["Atlantic/Cape_Verde"]=new a.GeographicPoint(14.916667,-23.516666));(y["Etc/GMT+1"]=u);(y["Africa/Abidjan"]=new a.GeographicPoint(5.341111,-4.028056));(y["Africa/Accra"]=new a.GeographicPoint(5.55,-0.2166667));(y["Africa/Bamako"]=new a.GeographicPoint(12.65,-8));(y["Africa/Banjul"]=new a.GeographicPoint(13.453055,-16.5775));(y["Africa/Bissau"]=new a.GeographicPoint(11.85,-15.583333));(y["Africa/Casablanca"]=new a.GeographicPoint(33.593056,-7.616389));(y["Africa/Conakry"]=new a.GeographicPoint(9.509167,-13.712222));(y["Africa/Dakar"]=new a.GeographicPoint(14.670834,-17.438055));(y["Africa/El_Aaiun"]=new a.GeographicPoint(27.15361,-13.203333));(y["Africa/Freetown"]=new a.GeographicPoint(8.49,-13.234167));(y["Africa/Lome"]=new a.GeographicPoint(6.131944,1.2227778));(y["Africa/Monrovia"]=new a.GeographicPoint(6.3105555,-10.804722));(y["Africa/Nouakchott"]=new a.GeographicPoint(18.08639,-15.975278));(y["Africa/Ouagadougou"]=new a.GeographicPoint(12.370277,-1.5247222));(y["Africa/Sao_Tome"]=new a.GeographicPoint(0.3333333,6.733333));(y["Africa/Timbuktu"]=new a.GeographicPoint(16.766666,-3.0166667));(y["America/Danmarkshavn"]=new a.GeographicPoint(76.767,18.667));(y["Atlantic/Canary"]=new a.GeographicPoint(28.45,-16.233334));(y["Atlantic/Faeroe"]=new a.GeographicPoint(62.016666,-6.766667));(y["Atlantic/Faroe"]=new a.GeographicPoint(62.016666,-6.766667));(y["Atlantic/Madeira"]=new a.GeographicPoint(32.633335,-16.9));(y["Atlantic/Reykjavik"]=new a.GeographicPoint(64.15,-21.95));(y["Atlantic/St_Helena"]=new a.GeographicPoint(-15.933333,-5.7166667));var q=new a.GeographicPoint(51.466667,0);(y["Etc/GMT"]=q);(y["Etc/GMT+0"]=q);(y["Etc/GMT-0"]=q);(y["Etc/GMT0"]=q);(y["Etc/Greenwich"]=q);(y["Etc/UCT"]=q);(y["Etc/UTC"]=q);(y["Etc/Universal"]=q);(y["Etc/Zulu"]=q);(y["Europe/Belfast"]=new a.GeographicPoint(54.583332,-5.933333));(y["Europe/Dublin"]=new a.GeographicPoint(53.333057,-6.248889));(y["Europe/Guernsey"]=new a.GeographicPoint(49.45,-2.533));(y["Europe/Isle_of_Man"]=new a.GeographicPoint(54.14521,-4.48172));(y["Europe/Jersey"]=new a.GeographicPoint(49.2,-2.117));(y["Europe/Lisbon"]=new a.GeographicPoint(38.716667,-9.133333));(y["Europe/London"]=new a.GeographicPoint(51.5,-0.116667));(y["Africa/Algiers"]=new a.GeographicPoint(36.763054,3.0505557));(y["Africa/Bangui"]=new a.GeographicPoint(4.366667,18.583334));(y["Africa/Brazzaville"]=new a.GeographicPoint(-4.2591667,15.284722));(y["Africa/Ceuta"]=new a.GeographicPoint(35.890278,-5.3075));(y["Africa/Douala"]=new a.GeographicPoint(4.0502777,9.7));(y["Africa/Kinshasa"]=new a.GeographicPoint(-4.3,15.3));(y["Africa/Lagos"]=new a.GeographicPoint(6.4530554,3.3958333));(y["Africa/Libreville"]=new a.GeographicPoint(0.3833333,9.45));(y["Africa/Luanda"]=new a.GeographicPoint(-8.838333,13.234445));(y["Africa/Malabo"]=new a.GeographicPoint(3.75,8.783333));(y["Africa/Ndjamena"]=new a.GeographicPoint(12.113055,15.049167));(y["Africa/Niamey"]=new a.GeographicPoint(13.516666,2.1166668));(y["Africa/Porto-Novo"]=new a.GeographicPoint(6.483333,2.6166668));(y["Africa/Tunis"]=new a.GeographicPoint(36.802776,10.179722));(y["Africa/Windhoek"]=new a.GeographicPoint(-22.57,17.08361));(y["Arctic/Longyearbyen"]=new a.GeographicPoint(78.21667,15.633333));(y["Atlantic/Jan_Mayen"]=new a.GeographicPoint(71,-8.333));var B=new a.GeographicPoint(48.86667,2.333333);(y["Etc/GMT-1"]=B);(y["Europe/Amsterdam"]=new a.GeographicPoint(52.35,4.9166665));(y["Europe/Andorra"]=new a.GeographicPoint(42.5,1.5166667));(y["Europe/Belgrade"]=new a.GeographicPoint(44.81861,20.468056));(y["Europe/Berlin"]=new a.GeographicPoint(52.516666,13.4));(y["Europe/Bratislava"]=new a.GeographicPoint(48.15,17.116667));(y["Europe/Brussels"]=new a.GeographicPoint(50.833332,4.333333));(y["Europe/Budapest"]=new a.GeographicPoint(47.5,19.083334));(y["Europe/Copenhagen"]=new a.GeographicPoint(55.666668,12.583333));(y["Europe/Gibraltar"]=new a.GeographicPoint(36.133335,-5.35));(y["Europe/Ljubljana"]=new a.GeographicPoint(46.05528,14.514444));(y["Europe/Luxembourg"]=new a.GeographicPoint(49.611668,6.13));(y["Europe/Madrid"]=new a.GeographicPoint(40.4,-3.6833334));(y["Europe/Malta"]=new a.GeographicPoint(35.899723,14.514722));(y["Europe/Monaco"]=new a.GeographicPoint(43.733334,7.4166665));(y["Europe/Oslo"]=new a.GeographicPoint(59.916668,10.75));(y["Europe/Paris"]=B);(y["Europe/Podgorica"]=new a.GeographicPoint(42.441113,19.26361));(y["Europe/Prague"]=new a.GeographicPoint(50.083332,14.466667));(y["Europe/Rome"]=new a.GeographicPoint(41.9,12.483334));(y["Europe/San_Marino"]=new a.GeographicPoint(43.933334,12.45));(y["Europe/Sarajevo"]=new a.GeographicPoint(43.85,18.383333));(y["Europe/Skopje"]=new a.GeographicPoint(42,21.433332));(y["Europe/Stockholm"]=new a.GeographicPoint(59.333332,18.05));(y["Europe/Tirane"]=new a.GeographicPoint(41.3275,19.81889));(y["Europe/Vaduz"]=new a.GeographicPoint(47.133335,9.516666));(y["Europe/Vatican"]=new a.GeographicPoint(41.9,12.45));(y["Europe/Vienna"]=new a.GeographicPoint(48.2,16.366667));(y["Europe/Warsaw"]=new a.GeographicPoint(52.25,21));(y["Europe/Zagreb"]=new a.GeographicPoint(45.8,16));(y["Europe/Zurich"]=new a.GeographicPoint(47.366665,8.55));(y["Africa/Blantyre"]=new a.GeographicPoint(-15.783333,35));(y["Africa/Bujumbura"]=new a.GeographicPoint(-3.376111,29.36));(y["Africa/Cairo"]=new a.GeographicPoint(30.05,31.25));(y["Africa/Gaborone"]=new a.GeographicPoint(-24.646389,25.911945));(y["Africa/Harare"]=new a.GeographicPoint(-17.817778,31.044722));(y["Africa/Johannesburg"]=new a.GeographicPoint(-26.2,28.083334));(y["Africa/Kigali"]=new a.GeographicPoint(-1.9536111,30.060556));(y["Africa/Lubumbashi"]=new a.GeographicPoint(-11.666667,27.466667));(y["Africa/Lusaka"]=new a.GeographicPoint(-15.416667,28.283333));(y["Africa/Maputo"]=new a.GeographicPoint(-25.965279,32.58917));(y["Africa/Maseru"]=new a.GeographicPoint(-29.316668,27.483334));(y["Africa/Mbabane"]=new a.GeographicPoint(-26.316668,31.133333));(y["Africa/Tripoli"]=new a.GeographicPoint(32.8925,13.18));(y["Asia/Amman"]=new a.GeographicPoint(31.95,35.933334));(y["Asia/Beirut"]=new a.GeographicPoint(33.871944,35.509724));(y["Asia/Damascus"]=new a.GeographicPoint(33.5,36.3));(y["Asia/Gaza"]=new a.GeographicPoint(31.5,34.466667));(y["Asia/Istanbul"]=new a.GeographicPoint(41.018612,28.964722));(y["Asia/Jerusalem"]=new a.GeographicPoint(31.78,35.23));(y["Asia/Nicosia"]=new a.GeographicPoint(35.166668,33.366665));(y["Asia/Tel_Aviv"]=new a.GeographicPoint(32.066666,34.766666));var z=new a.GeographicPoint(37.983334,23.733334);(y["Etc/GMT-2"]=z);(y["Europe/Athens"]=new a.GeographicPoint(37.983334,23.733334));(y["Europe/Bucharest"]=new a.GeographicPoint(44.433334,26.1));(y["Europe/Chisinau"]=new a.GeographicPoint(47.005554,28.8575));(y["Europe/Helsinki"]=new a.GeographicPoint(60.175556,24.934166));(y["Europe/Istanbul"]=new a.GeographicPoint(41.018612,28.964722));(y["Europe/Kaliningrad"]=new a.GeographicPoint(54.71,20.5));(y["Europe/Kiev"]=new a.GeographicPoint(50.433334,30.516666));(y["Europe/Mariehamn"]=new a.GeographicPoint(60.1,19.95));(y["Europe/Minsk"]=new a.GeographicPoint(53.9,27.566668));(y["Europe/Nicosia"]=new a.GeographicPoint(35.166668,33.366665));(y["Europe/Riga"]=new a.GeographicPoint(56.95,24.1));(y["Europe/Simferopol"]=new a.GeographicPoint(44.95,34.1));(y["Europe/Sofia"]=new a.GeographicPoint(42.683334,23.316668));(y["Europe/Tallinn"]=new a.GeographicPoint(59.433887,24.728056));(y["Europe/Tiraspol"]=new a.GeographicPoint(46.84028,29.643333));(y["Europe/Uzhgorod"]=new a.GeographicPoint(48.616665,22.3));(y["Europe/Vilnius"]=new a.GeographicPoint(54.683334,25.316668));(y["Europe/Zaporozhye"]=new a.GeographicPoint(47.833,35.1667));(y["Africa/Addis_Ababa"]=new a.GeographicPoint(9.033333,38.7));(y["Africa/Asmara"]=new a.GeographicPoint(15.333333,38.933334));(y["Africa/Asmera"]=new a.GeographicPoint(15.333333,38.933334));(y["Africa/Dar_es_Salaam"]=new a.GeographicPoint(-6.8,39.283333));(y["Africa/Djibouti"]=new a.GeographicPoint(11.595,43.148056));(y["Africa/Kampala"]=new a.GeographicPoint(0.3155556,32.565556));(y["Africa/Khartoum"]=new a.GeographicPoint(15.588056,32.53417));(y["Africa/Mogadishu"]=new a.GeographicPoint(2.0666666,45.366665));(y["Africa/Nairobi"]=new a.GeographicPoint(-1.2833333,36.816666));(y["Antarctica/Syowa"]=new a.GeographicPoint(-69,39.5833));(y["Asia/Aden"]=new a.GeographicPoint(12.779445,45.036667));(y["Asia/Baghdad"]=new a.GeographicPoint(33.33861,44.39389));(y["Asia/Bahrain"]=new a.GeographicPoint(26.23611,50.583057));(y["Asia/Kuwait"]=new a.GeographicPoint(29.369722,47.978333));(y["Asia/Qatar"]=new a.GeographicPoint(25.286667,51.533333));(y["Asia/Riyadh"]=new a.GeographicPoint(24.640833,46.772778));var D=new a.GeographicPoint(55.752224,37.615555);(y["Etc/GMT-3"]=D);(y["Europe/Moscow"]=D);(y["Europe/Volgograd"]=new a.GeographicPoint(48.80472,44.585835));(y["Indian/Antananarivo"]=new a.GeographicPoint(-18.916666,47.516666));(y["Indian/Comoro"]=new a.GeographicPoint(-11.704166,43.240276));(y["Indian/Mayotte"]=new a.GeographicPoint(-12.779445,45.227222));(y["Asia/Riyadh87"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Riyadh88"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Riyadh89"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh87"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh88"]=new a.GeographicPoint(24.640833,46.772778));(y["Mideast/Riyadh89"]=new a.GeographicPoint(24.640833,46.772778));(y["Asia/Tehran"]=new a.GeographicPoint(35.671944,51.424446));(y["Asia/Baku"]=new a.GeographicPoint(40.39528,49.88222));var j=new a.GeographicPoint(25.252222,55.28);(y["Asia/Dubai"]=j);(y["Asia/Muscat"]=new a.GeographicPoint(23.613333,58.593334));(y["Asia/Tbilisi"]=new a.GeographicPoint(41.725,44.790833));(y["Asia/Yerevan"]=new a.GeographicPoint(40.18111,44.51361));(y["Etc/GMT-4"]=j);(y["Europe/Samara"]=new a.GeographicPoint(53.2,50.15));(y["Indian/Mahe"]=new a.GeographicPoint(-4.616667,55.45));(y["Indian/Mauritius"]=new a.GeographicPoint(-20.161945,57.49889));(y["Indian/Reunion"]=new a.GeographicPoint(-20.866667,55.466667));(y["Asia/Kabul"]=new a.GeographicPoint(34.516666,69.183334));(y["Antarctica/Davis"]=new a.GeographicPoint(-68.5764,77.9689));(y["Antarctica/Mawson"]=new a.GeographicPoint(-53.104,73.514));(y["Asia/Aqtau"]=new a.GeographicPoint(43.65,51.2));(y["Asia/Aqtobe"]=new a.GeographicPoint(50.298054,57.18139));(y["Asia/Ashgabat"]=new a.GeographicPoint(37.95,58.383335));(y["Asia/Ashkhabad"]=new a.GeographicPoint(37.95,58.383335));(y["Asia/Dushanbe"]=new a.GeographicPoint(38.56,68.77389));(y["Asia/Karachi"]=new a.GeographicPoint(24.866667,67.05));(y["Asia/Oral"]=new a.GeographicPoint(51.233334,51.366665));(y["Asia/Samarkand"]=new a.GeographicPoint(39.654167,66.959724));(y["Asia/Tashkent"]=new a.GeographicPoint(41.316666,69.25));(y["Asia/Yekaterinburg"]=new a.GeographicPoint(56.85,60.6));var d=new a.GeographicPoint(22.569721,88.36972);(y["Etc/GMT-5"]=d);(y["Indian/Kerguelen"]=new a.GeographicPoint(-49.25,69.583));(y["Indian/Maldives"]=new a.GeographicPoint(4.1666665,73.5));(y["Asia/Calcutta"]=d);(y["Asia/Colombo"]=new a.GeographicPoint(6.9319444,79.84778));(y["Asia/Kolkata"]=d);(y["Asia/Kathmandu"]=new a.GeographicPoint(27.716667,85.316666));(y["Asia/Katmandu"]=new a.GeographicPoint(27.716667,85.316666));(y["Antarctica/Vostok"]=new a.GeographicPoint(-78.4644,106.8372));(y["Asia/Almaty"]=new a.GeographicPoint(43.25,76.95));(y["Asia/Bishkek"]=new a.GeographicPoint(42.873055,74.60028));var s=new a.GeographicPoint(23.723055,90.40861);(y["Asia/Dacca"]=s);(y["Asia/Dhaka"]=s);(y["Asia/Novokuznetsk"]=new a.GeographicPoint(53.75,87.1));(y["Asia/Novosibirsk"]=new a.GeographicPoint(55.04111,82.93444));(y["Asia/Omsk"]=new a.GeographicPoint(55,73.4));(y["Asia/Qyzylorda"]=new a.GeographicPoint(44.85278,65.50916));(y["Asia/Thimbu"]=new a.GeographicPoint(27.483334,89.6));(y["Asia/Thimphu"]=new a.GeographicPoint(27.483334,89.6));(y["Etc/GMT-6"]=s);(y["Indian/Chagos"]=new a.GeographicPoint(-6,71.5));(y["Asia/Rangoon"]=new a.GeographicPoint(16.783333,96.166664));(y["Indian/Cocos"]=new a.GeographicPoint(-12.1167,96.9));var p=new a.GeographicPoint(13.75,100.51667);(y["Asia/Bangkok"]=p);(y["Asia/Ho_Chi_Minh"]=new a.GeographicPoint(10.75,106.666664));(y["Asia/Hovd"]=new a.GeographicPoint(48.016666,91.63333));(y["Asia/Jakarta"]=new a.GeographicPoint(-6.174444,106.829445));(y["Asia/Krasnoyarsk"]=new a.GeographicPoint(56.009724,92.791664));(y["Asia/Phnom_Penh"]=new a.GeographicPoint(11.55,104.916664));(y["Asia/Pontianak"]=new a.GeographicPoint(-0.0333333,109.333336));(y["Asia/Saigon"]=new a.GeographicPoint(10.75,106.666664));(y["Asia/Vientiane"]=new a.GeographicPoint(17.966667,102.6));(y["Etc/GMT-7"]=p);(y["Indian/Christmas"]=new a.GeographicPoint(-10.416667,105.71667));(y["Asia/Brunei"]=new a.GeographicPoint(4.883333,114.933334));(y["Asia/Choibalsan"]=new a.GeographicPoint(48.066666,114.5));(y["Asia/Chongqing"]=new a.GeographicPoint(29.562778,106.55278));(y["Asia/Chungking"]=new a.GeographicPoint(29.562778,106.55278));(y["Asia/Harbin"]=new a.GeographicPoint(45.75,126.65));(y["Asia/Hong_Kong"]=new a.GeographicPoint(22.283333,114.15));(y["Asia/Irkutsk"]=new a.GeographicPoint(52.266666,104.333336));(y["Asia/Kashgar"]=new a.GeographicPoint(39.391388,76.04));(y["Asia/Kuala_Lumpur"]=new a.GeographicPoint(3.1666667,101.7));(y["Asia/Kuching"]=new a.GeographicPoint(1.55,110.333336));(y["Asia/Macao"]=new a.GeographicPoint(22.2,113.55));(y["Asia/Macau"]=new a.GeographicPoint(22.2,113.55));(y["Asia/Makassar"]=new a.GeographicPoint(2.45,99.78333));(y["Asia/Manila"]=new a.GeographicPoint(14.604167,120.98222));var t=new a.GeographicPoint(31.005,121.40861);(y["Asia/Shanghai"]=t);(y["Asia/Singapore"]=new a.GeographicPoint(1.2930557,103.855835));(y["Asia/Taipei"]=new a.GeographicPoint(25.039167,121.525));(y["Asia/Ujung_Pandang"]=new a.GeographicPoint(-5.1305556,119.406944));(y["Asia/Ulaanbaatar"]=new a.GeographicPoint(47.916668,106.916664));(y["Asia/Ulan_Bator"]=new a.GeographicPoint(47.916668,106.916664));(y["Asia/Urumqi"]=new a.GeographicPoint(43.8,87.583336));(y["Australia/Perth"]=new a.GeographicPoint(-31.933332,115.833336));(y["Australia/West"]=new a.GeographicPoint(-31.933332,115.833336));(y["Etc/GMT-8"]=t);(y["Australia/Eucla"]=new a.GeographicPoint(-31.716667,128.86667));(y["Asia/Dili"]=new a.GeographicPoint(-8.55,125.5833));(y["Asia/Jayapura"]=new a.GeographicPoint(-2.5333333,140.7));(y["Asia/Pyongyang"]=new a.GeographicPoint(39.019444,125.75472));(y["Asia/Seoul"]=new a.GeographicPoint(37.566387,126.999725));var i=new a.GeographicPoint(35.685,139.75139);(y["Asia/Tokyo"]=i);(y["Asia/Yakutsk"]=new a.GeographicPoint(62.03389,129.73306));(y["Etc/GMT-9"]=i);(y["Pacific/Palau"]=new a.GeographicPoint(7.5,134.6241));(y["Australia/Adelaide"]=new a.GeographicPoint(-34.933334,138.6));(y["Australia/Broken_Hill"]=new a.GeographicPoint(-31.95,141.43333));(y["Australia/Darwin"]=new a.GeographicPoint(-12.466667,130.83333));(y["Australia/North"]=new a.GeographicPoint(-12.466667,130.83333));(y["Australia/South"]=new a.GeographicPoint(-34.933334,138.6));(y["Australia/Yancowinna"]=new a.GeographicPoint(-31.7581,141.7178));(y["Antarctica/DumontDUrville"]=new a.GeographicPoint(-66.66277,140.0014));(y["Asia/Sakhalin"]=new a.GeographicPoint(51,143));(y["Asia/Vladivostok"]=new a.GeographicPoint(43.133335,131.9));(y["Australia/ACT"]=new a.GeographicPoint(-35.283333,149.21666));(y["Australia/Brisbane"]=new a.GeographicPoint(-27.5,153.01666));(y["Australia/Canberra"]=new a.GeographicPoint(-35.283333,149.21666));(y["Australia/Currie"]=new a.GeographicPoint(-39.933334,143.86667));(y["Australia/Hobart"]=new a.GeographicPoint(-42.916668,147.33333));(y["Australia/Lindeman"]=new a.GeographicPoint(-20.45,149.0333));(y["Australia/Melbourne"]=new a.GeographicPoint(-37.816666,144.96666));var n=new a.GeographicPoint(-33.88333,151.21666);(y["Australia/NSW"]=n);(y["Australia/Queensland"]=new a.GeographicPoint(-27.5,153.01666));(y["Australia/Sydney"]=n);(y["Australia/Tasmania"]=new a.GeographicPoint(-42.916668,147.33333));(y["Australia/Victoria"]=new a.GeographicPoint(-37.816666,144.96666));(y["Etc/GMT-10"]=n);(y["Pacific/Guam"]=new a.GeographicPoint(13.467,144.75));(y["Pacific/Port_Moresby"]=new a.GeographicPoint(-9.464723,147.1925));(y["Pacific/Saipan"]=new a.GeographicPoint(15.1833,145.75));(y["Pacific/Truk"]=new a.GeographicPoint(7.4167,151.7833));(y["Pacific/Yap"]=new a.GeographicPoint(9.514444,138.12917));(y["Australia/LHI"]=new a.GeographicPoint(-31.55,159.083));(y["Australia/Lord_Howe"]=new a.GeographicPoint(-31.55,159.083));(y["Antarctica/Casey"]=new a.GeographicPoint(-66.2833,110.5333));(y["Asia/Magadan"]=new a.GeographicPoint(59.566666,150.8));var c=new a.GeographicPoint(-22.266666,166.45);(y["Etc/GMT-11"]=c);(y["Pacific/Efate"]=new a.GeographicPoint(-17.667,168.417));(y["Pacific/Guadalcanal"]=new a.GeographicPoint(-9.617,160.183));(y["Pacific/Kosrae"]=new a.GeographicPoint(5.317,162.983));(y["Pacific/Noumea"]=c);(y["Pacific/Ponape"]=new a.GeographicPoint(6.963889,158.20833));(y["Pacific/Norfolk"]=new a.GeographicPoint(-29.05,167.95));(y["Antarctica/McMurdo"]=new a.GeographicPoint(-77.85,166.667));(y["Antarctica/South_Pole"]=new a.GeographicPoint(-90,0));(y["Asia/Anadyr"]=new a.GeographicPoint(64.75,177.48334));(y["Asia/Kamchatka"]=new a.GeographicPoint(57,160));var e=new a.GeographicPoint(-36.86667,174.76666);(y["Etc/GMT-12"]=e);(y["Pacific/Auckland"]=e);(y["Pacific/Fiji"]=new a.GeographicPoint(-18.133333,178.41667));(y["Pacific/Funafuti"]=new a.GeographicPoint(-8.516666,179.21666));(y["Pacific/Kwajalein"]=new a.GeographicPoint(9.1939,167.4597));(y["Pacific/Majuro"]=new a.GeographicPoint(7.1,171.38333));(y["Pacific/Nauru"]=new a.GeographicPoint(-0.5322,166.9328));(y["Pacific/Tarawa"]=new a.GeographicPoint(1.4167,173.0333));(y["Pacific/Wake"]=new a.GeographicPoint(19.2833,166.6));(y["Pacific/Wallis"]=new a.GeographicPoint(-13.273,-176.205));(y["Pacific/Chatham"]=new a.GeographicPoint(-43.883,-176.517));var m=new a.GeographicPoint(-3.133,-171.0833);(y["Etc/GMT-13"]=m);(y["Pacific/Enderbury"]=m);(y["Pacific/Tongatapu"]=new a.GeographicPoint(-21.2114,-175.153));var h=new a.GeographicPoint(1.883,-157.4);(y["Etc/GMT-14"]=h);(y["Pacific/Kiritimati"]=h);(y.MIT=g);(y.HST=A);(y.PST=f);(y.PST8PDT=f);(y.MST=k);(y.MST7MDT=k);(y.Navajo=new a.GeographicPoint(35.6728,-109.0622));(y.PNT=new a.GeographicPoint(33.448334,-112.07333));(y["America/Indiana/Knox"]=new a.GeographicPoint(41.295834,-86.625));(y["America/Indiana/Tell_City"]=new a.GeographicPoint(37.953,-86.7614));(y["America/North_Dakota/Center"]=new a.GeographicPoint(47.115,-101.3003));(y["America/North_Dakota/New_Salem"]=new a.GeographicPoint(46.843,101.4119));(y.CST=w);(y.CST6CDT=w);(y["America/Indiana/Indianapolis"]=new a.GeographicPoint(39.768333,-86.15806));(y["America/Indiana/Marengo"]=new a.GeographicPoint(36.3706,-86.3433));(y["America/Indiana/Petersburg"]=new a.GeographicPoint(38.4917,-87.2803));(y["America/Indiana/Vevay"]=new a.GeographicPoint(38.7458,-85.0711));(y["America/Indiana/Vincennes"]=new a.GeographicPoint(38.6783,-87.5164));(y["America/Indiana/Winamac"]=new a.GeographicPoint(41.0525,-86.6044));(y["America/Kentucky/Louisville"]=new a.GeographicPoint(38.2542,-85.7603));(y["America/Kentucky/Monticello"]=new a.GeographicPoint(36.8381,-84.85));(y.Cuba=new a.GeographicPoint(23.131945,-82.36417));(y.EST=o);(y.EST5EDT=o);(y.IET=o);(y.AST=new a.GeographicPoint(44.65,-63.6));(y.Jamaica=new a.GeographicPoint(18,-76.8));(y["America/Argentina/San_Luis"]=new a.GeographicPoint(-33.3,-66.333));(y.PRT=new a.GeographicPoint(18.467,66.117));(y.CNT=new a.GeographicPoint(47.5675,-52.7072));(y.AGT=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Argentina/Buenos_Aires"]=new a.GeographicPoint(-34.5875,-58.6725));(y["America/Argentina/Catamarca"]=new a.GeographicPoint(-28.466667,-65.78333));(y["America/Argentina/ComodRivadavia"]=new a.GeographicPoint(-42.7578,-65.0297));(y["America/Argentina/Cordoba"]=new a.GeographicPoint(-31.4,-64.183334));(y["America/Argentina/Jujuy"]=new a.GeographicPoint(-24.183332,-65.3));(y["America/Argentina/La_Rioja"]=new a.GeographicPoint(-29.4144,-66.8552));(y["America/Argentina/Mendoza"]=new a.GeographicPoint(-32.883335,-68.816666));(y["America/Argentina/Rio_Gallegos"]=new a.GeographicPoint(-51.625,-69.2286));(y["America/Argentina/Salta"]=new a.GeographicPoint(-24.783333,-65.416664));(y["America/Argentina/San_Juan"]=new a.GeographicPoint(-31.5333,-68.5167));(y["America/Argentina/Tucuman"]=new a.GeographicPoint(-26.8167,65.2167));(y["America/Argentina/Ushuaia"]=new a.GeographicPoint(-54.6,-68.3));(y.BET=x);(y.Eire=new a.GeographicPoint(53.333057,-6.248889));(y.GB=q);(y["GB-Eire"]=new a.GeographicPoint(53.333057,-6.248889));(y.GMT=q);(y.GMT0=q);(y.Greenwich=q);(y.Iceland=new a.GeographicPoint(64.1333,-21.9333));(y.Portugal=new a.GeographicPoint(38.716667,-9.133333));(y.UCT=q);(y.UTC=q);(y.Universal=q);(y.WET=q);(y.Zulu=q);(y.CET=B);(y.ECT=B);(y.MET=new a.GeographicPoint(35.671944,51.424446));(y.Poland=new a.GeographicPoint(52.25,21));(y.ART=new a.GeographicPoint(-34.5875,-58.6725));(y.CAT=new a.GeographicPoint(-1.9536111,30.060556));(y.EET=new a.GeographicPoint(37.983334,23.733334));(y.Egypt=new a.GeographicPoint(30.05,31.25));(y.Israel=new a.GeographicPoint(32.066666,34.766666));(y.Libya=new a.GeographicPoint(32.8925,13.18));(y.Turkey=new a.GeographicPoint(41.018612,28.964722));(y.EAT=new a.GeographicPoint(-1.2833333,36.816666));(y["W-SU"]=D);(y.Iran=new a.GeographicPoint(35.671944,51.424446));(y.NET=new a.GeographicPoint(40.18111,44.51361));(y.PLT=new a.GeographicPoint(24.866667,67.05));(y.IST=d);(y.BST=s);(y.VST=p);(y.CTT=t);(y.Hongkong=new a.GeographicPoint(22.283333,114.15));(y.PRC=t);(y.Singapore=new a.GeographicPoint(1.2930557,103.855835));(y.JST=i);(y.Japan=i);(y.ROK=new a.GeographicPoint(37.566387,126.999725));(y.ACT=new a.GeographicPoint(-35.283333,149.21666));(y.AET=n);(y.SST=new a.GeographicPoint(-28.4667,159.8167));(y.Kwajalein=new a.GeographicPoint(9.1939,167.4597));(y.NST=e);(y.NZ=e);(y["NZ-CHAT"]=new a.GeographicPoint(-43.883,-176.517));a.timeZoneGeographicPointsReference=(y)}else{y=a.timeZoneGeographicPointsReference}var v=(function(E,F){return E[F]?E[F]:null})(y,"UTC");if(v==null){v=(function(E,F){return E[F]?E[F]:null})(y,"Etc/GMT")}this.latitude=(function(E){return E*Math.PI/180})(v.getLatitudeInDegrees());this.longitude=(function(E){return E*Math.PI/180})(v.getLongitudeInDegrees())};return a}(HomeObject));Compass.timeZoneGeographicPointsReference=null;Compass.__class="com.eteks.sweethome3d.model.Compass";Compass.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","java.io.Serializable"];(function(a){var b=(function(){function c(d,e){this.latitudeInDegrees=0;this.longitudeInDegrees=0;this.latitudeInDegrees=d;this.longitudeInDegrees=e}c.prototype.getLatitudeInDegrees=function(){return this.latitudeInDegrees};c.prototype.getLongitudeInDegrees=function(){return this.longitudeInDegrees};return c}());a.GeographicPoint=b;b.__class="com.eteks.sweethome3d.model.Compass.GeographicPoint"})(Compass||(Compass={}));var DimensionLine=(function(b){__extends(a,b);function a(f,d,c,e,g){var h=b.call(this)||this;h.propertyChangeSupport=new PropertyChangeSupport(h);h.xStart=0;h.yStart=0;h.xEnd=0;h.yEnd=0;h.offset=0;h.lengthStyle=null;h.level=null;h.shapeCache=null;h.xStart=f;h.yStart=d;h.xEnd=c;h.yEnd=e;h.offset=g;return h}a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getXStart=function(){return this.xStart};a.prototype.setXStart=function(d){if(d!==this.xStart){var c=this.xStart;this.xStart=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("X_START",c,d)}};a.prototype.getYStart=function(){return this.yStart};a.prototype.setYStart=function(d){if(d!==this.yStart){var c=this.yStart;this.yStart=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("Y_START",c,d)}};a.prototype.getXEnd=function(){return this.xEnd};a.prototype.setXEnd=function(c){if(c!==this.xEnd){var d=this.xEnd;this.xEnd=c;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("X_END",d,c)}};a.prototype.getYEnd=function(){return this.yEnd};a.prototype.setYEnd=function(c){if(c!==this.yEnd){var d=this.yEnd;this.yEnd=c;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("Y_END",d,c)}};a.prototype.getOffset=function(){return this.offset};a.prototype.setOffset=function(d){if(d!==this.offset){var c=this.offset;this.offset=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("Y_END",c,d)}};a.prototype.getLength=function(){return java.awt.geom.Point2D.distance(this.getXStart(),this.getYStart(),this.getXEnd(),this.getYEnd())};a.prototype.getLengthStyle=function(){return this.lengthStyle};a.prototype.setLengthStyle=function(c){if(c!==this.lengthStyle){var d=this.lengthStyle;this.lengthStyle=c;this.propertyChangeSupport.firePropertyChange("LENGTH_STYLE",d,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.propertyChangeSupport.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getPoints=function(){var e=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=-Math.sin(e)*this.offset;var c=Math.cos(e)*this.offset;return[[this.xStart,this.yStart],[this.xStart+d,this.yStart+c],[this.xEnd+d,this.yEnd+c],[this.xEnd,this.yEnd]]};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.isMiddlePointAt=function(c,j,g){var h=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var e=-Math.sin(h)*this.offset;var d=Math.cos(h)*this.offset;var i=(this.xStart+this.xEnd)/2+e;var f=(this.yStart+this.yEnd)/2+d;return Math.abs(c-i)<=g&&Math.abs(j-f)<=g};a.prototype.containsStartExtensionLinetAt=function(c,g,e){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+-Math.sin(f)*this.offset,this.yStart+Math.cos(f)*this.offset);return this.containsShapeAtWithMargin(d,c,g,e)};a.prototype.containsEndExtensionLineAt=function(d,g,e){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var c=new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+-Math.sin(f)*this.offset,this.yEnd+Math.cos(f)*this.offset);return this.containsShapeAtWithMargin(c,d,g,e)};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getShape=function(){if(this.shapeCache==null){var f=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=-Math.sin(f)*this.offset;var c=Math.cos(f)*this.offset;var e=new java.awt.geom.GeneralPath();e.append(new java.awt.geom.Line2D.Float(this.xStart+d,this.yStart+c,this.xEnd+d,this.yEnd+c),false);e.append(new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+d,this.yStart+c),false);e.append(new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+d,this.yEnd+c),false);this.shapeCache=e}return this.shapeCache};a.prototype.move=function(d,c){this.setXStart(this.getXStart()+d);this.setYStart(this.getYStart()+c);this.setXEnd(this.getXEnd()+d);this.setYEnd(this.getYEnd()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);c.level=null;return c};return a}(HomeObject));DimensionLine.__class="com.eteks.sweethome3d.model.DimensionLine";DimensionLine.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];var Label=(function(a){__extends(b,a);function b(d,c,f){var e=a.call(this)||this;e.propertyChangeSupport=new PropertyChangeSupport(e);e.text=null;e.x=0;e.y=0;e.style=null;e.color=null;e.outlineColor=null;e.angle=0;e.pitch=null;e.elevation=0;e.level=null;e.text=d;e.x=c;e.y=f;return e}b.TWICE_PI_$LI$=function(){if(b.TWICE_PI==null){b.TWICE_PI=2*Math.PI}return b.TWICE_PI};b.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};b.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};b.prototype.getText=function(){return this.text};b.prototype.setText=function(d){if(d!==this.text&&(d==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(d,this.text))){var c=this.text;this.text=d;this.propertyChangeSupport.firePropertyChange("TEXT",c,d)}};b.prototype.getX=function(){return this.x};b.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.propertyChangeSupport.firePropertyChange("X",d,c)}};b.prototype.getY=function(){return this.y};b.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.propertyChangeSupport.firePropertyChange("Y",c,d)}};b.prototype.getGroundElevation=function(){if(this.level!=null){return this.elevation+this.level.getElevation()}else{return this.elevation}};b.prototype.getElevation=function(){return this.elevation};b.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.propertyChangeSupport.firePropertyChange("ELEVATION",c,d)}};b.prototype.getStyle=function(){return this.style};b.prototype.setStyle=function(d){if(d!==this.style){var c=this.style;this.style=d;this.propertyChangeSupport.firePropertyChange("STYLE",c,d)}};b.prototype.getColor=function(){return this.color};b.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.propertyChangeSupport.firePropertyChange("COLOR",d,c)}};b.prototype.getOutlineColor=function(){return this.outlineColor};b.prototype.setOutlineColor=function(c){if(c!==this.outlineColor){var d=this.outlineColor;this.outlineColor=c;this.propertyChangeSupport.firePropertyChange("OUTLINE_COLOR",d,c)}};b.prototype.getAngle=function(){return this.angle};b.prototype.setAngle=function(d){d=((d%b.TWICE_PI_$LI$()+b.TWICE_PI_$LI$())%b.TWICE_PI_$LI$());if(d!==this.angle){var c=this.angle;this.angle=d;this.propertyChangeSupport.firePropertyChange("ANGLE",c,d)}};b.prototype.getPitch=function(){return this.pitch};b.prototype.setPitch=function(d){if(d!=null){d=((d%b.TWICE_PI_$LI$()+b.TWICE_PI_$LI$())%b.TWICE_PI_$LI$())}if(d!==this.pitch&&(d==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(d,this.pitch))){var c=this.pitch;this.pitch=d;this.propertyChangeSupport.firePropertyChange("PITCH",c,d)}};b.prototype.getLevel=function(){return this.level};b.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.propertyChangeSupport.firePropertyChange("LEVEL",c,d)}};b.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};b.prototype.getPoints=function(){return[[this.x,this.y]]};b.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return d.contains(this.x,this.y)};b.prototype.containsPoint=function(c,e,d){return Math.abs(c-this.x)<=d&&Math.abs(e-this.y)<=d};b.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};b.prototype.clone=function(){var d=this;var c=(function(g){if(a.prototype.clone!=undefined){return a.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);c.level=null;return c};return b}(HomeObject));Label.__class="com.eteks.sweethome3d.model.Label";Label.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];var Level=(function(b){__extends(a,b);function a(d,e,f,c){var g=b.call(this)||this;g.propertyChangeSupport=new PropertyChangeSupport(g);g.name=null;g.elevation=0;g.floorThickness=0;g.height=0;g.backgroundImage=null;g.visible=false;g.viewable=false;g.elevationIndex=0;g.name=d;g.elevation=e;g.floorThickness=f;g.height=c;g.visible=true;g.viewable=true;g.elevationIndex=-1;return g}a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.name))){var d=this.name;this.name=c;this.propertyChangeSupport.firePropertyChange("NAME",d,c)}};a.prototype.getElevation=function(){return this.elevation};a.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.propertyChangeSupport.firePropertyChange("ELEVATION",c,d)}};a.prototype.getFloorThickness=function(){return this.floorThickness};a.prototype.setFloorThickness=function(d){if(d!==this.floorThickness){var c=this.floorThickness;this.floorThickness=d;this.propertyChangeSupport.firePropertyChange("FLOOR_THICKNESS",c,d)}};a.prototype.getHeight=function(){return this.height};a.prototype.setHeight=function(c){if(c!==this.height){var d=this.height;this.height=c;this.propertyChangeSupport.firePropertyChange("HEIGHT",d,c)}};a.prototype.getBackgroundImage=function(){return this.backgroundImage};a.prototype.setBackgroundImage=function(d){if(d!==this.backgroundImage){var c=this.backgroundImage;this.backgroundImage=d;this.propertyChangeSupport.firePropertyChange("BACKGROUND_IMAGE",c,d)}};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.propertyChangeSupport.firePropertyChange("VISIBLE",!c,c)}};a.prototype.isViewable=function(){return this.viewable};a.prototype.setViewable=function(c){if(c!==this.viewable){this.viewable=c;this.propertyChangeSupport.firePropertyChange("VIEWABLE",!c,c)}};a.prototype.isViewableAndVisible=function(){return this.viewable&&this.visible};a.prototype.getElevationIndex=function(){return this.elevationIndex};a.prototype.setElevationIndex=function(c){if(c!==this.elevationIndex){var d=this.elevationIndex;this.elevationIndex=c;this.propertyChangeSupport.firePropertyChange("ELEVATION_INDEX",d,c)}};a.prototype.clone=function(){var d=this;var c=(function(f){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var g=Object.create(f);for(var e in f){if(f.hasOwnProperty(e)){g[e]=f[e]}}return g}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);return c};return a}(HomeObject));Level.__class="com.eteks.sweethome3d.model.Level";Level.__interfaces=["java.lang.Cloneable","java.io.Serializable"];var Polyline=(function(b){__extends(a,b);function a(q,c,j,n,h,f,i,s,p){var o=this;if(((q!=null&&q instanceof Array&&(q.length==0||q[0]==null||q[0] instanceof Array))||q===null)&&((typeof c==="number")||c===null)&&((typeof j==="number")||j===null)&&((typeof n==="number")||n===null)&&((typeof h==="number")||h===null)&&((typeof f==="number")||f===null)&&((typeof i==="number")||i===null)&&((typeof s==="boolean")||s===null)&&((typeof p==="number")||p===null)){var g=Array.prototype.slice.call(arguments);o=b.call(this)||this;o.points=null;o.thickness=0;o.capStyle=null;o.capStyleName=null;o.joinStyle=null;o.joinStyleName=null;o.dashStyle=null;o.dashStyleName=null;o.startArrowStyle=null;o.startArrowStyleName=null;o.endArrowStyle=null;o.endArrowStyleName=null;o.closedPath=false;o.color=0;o.level=null;o.polylinePathCache=null;o.shapeCache=null;o.propertyChangeSupport=new PropertyChangeSupport(o);o.points=null;o.thickness=0;o.capStyle=null;o.capStyleName=null;o.joinStyle=null;o.joinStyleName=null;o.dashStyle=null;o.dashStyleName=null;o.startArrowStyle=null;o.startArrowStyleName=null;o.endArrowStyle=null;o.endArrowStyleName=null;o.closedPath=false;o.color=0;o.level=null;o.polylinePathCache=null;o.shapeCache=null;(function(){o.points=o.deepCopy(q);o.thickness=c;o.capStyle=j;o.joinStyle=n;o.dashStyle=h;o.startArrowStyle=f;o.endArrowStyle=i;o.closedPath=s;o.color=p})()}else{if(((q!=null&&q instanceof Array&&(q.length==0||q[0]==null||q[0] instanceof Array))||q===null)&&c===undefined&&j===undefined&&n===undefined&&h===undefined&&f===undefined&&i===undefined&&s===undefined&&p===undefined){var g=Array.prototype.slice.call(arguments);var t=Array.prototype.slice.call(arguments);var m=1;var u=a.CapStyle.BUTT;var k=a.JoinStyle.MITER;var d=a.DashStyle.SOLID;var v=a.ArrowStyle.NONE;var r=a.ArrowStyle.NONE;var l=false;var e=-16777216;o=b.call(this)||this;o.points=null;o.thickness=0;o.capStyle=null;o.capStyleName=null;o.joinStyle=null;o.joinStyleName=null;o.dashStyle=null;o.dashStyleName=null;o.startArrowStyle=null;o.startArrowStyleName=null;o.endArrowStyle=null;o.endArrowStyleName=null;o.closedPath=false;o.color=0;o.level=null;o.polylinePathCache=null;o.shapeCache=null;o.propertyChangeSupport=new PropertyChangeSupport(o);o.points=null;o.thickness=0;o.capStyle=null;o.capStyleName=null;o.joinStyle=null;o.joinStyleName=null;o.dashStyle=null;o.dashStyleName=null;o.startArrowStyle=null;o.startArrowStyleName=null;o.endArrowStyle=null;o.endArrowStyleName=null;o.closedPath=false;o.color=0;o.level=null;o.polylinePathCache=null;o.shapeCache=null;(function(){o.points=o.deepCopy(q);o.thickness=m;o.capStyle=u;o.joinStyle=k;o.dashStyle=d;o.startArrowStyle=v;o.endArrowStyle=r;o.closedPath=l;o.color=e})()}else{throw new Error("invalid overload")}}return o}a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getPoints=function(){return this.deepCopy(this.points)};a.prototype.getPointCount=function(){return this.points.length};a.prototype.deepCopy=function(e){var c=new Array(e.length);for(var d=0;d<e.length;d++){c[d]=e[d].slice(0)}return c};a.prototype.setPoints=function(c){if(!(JSON.stringify(this.points)===JSON.stringify(c))){this.updatePoints(c)}};a.prototype.updatePoints=function(d){var c=this.points;this.points=this.deepCopy(d);this.polylinePathCache=null;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",c,d)};a.prototype.addPoint$float$float=function(c,d){this.addPoint$float$float$int(c,d,this.points.length)};a.prototype.addPoint$float$float$int=function(c,g,d){if(d<0||d>this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var f=new Array(this.points.length+1);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,0,f,0,d);f[d]=[c,g];(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,d,f,d+1,this.points.length-d);var e=this.points;this.points=f;this.polylinePathCache=null;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",e,this.deepCopy(this.points))};a.prototype.addPoint=function(c,e,d){if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&((typeof d==="number")||d===null)){return this.addPoint$float$float$int(c,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.addPoint$float$float(c,e)}else{throw new Error("invalid overload")}}};a.prototype.setPoint=function(c,f,d){if(d<0||d>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}if(this.points[d][0]!==c||this.points[d][1]!==f){var e=this.points;this.points=this.deepCopy(this.points);this.points[d][0]=c;this.points[d][1]=f;this.polylinePathCache=null;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",e,this.deepCopy(this.points))}};a.prototype.removePoint=function(c){if(c<0||c>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+c),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var e=new Array(this.points.length-1);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,0,e,0,c);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,c+1,e,c,this.points.length-c-1);var d=this.points;this.points=e;this.polylinePathCache=null;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",d,this.deepCopy(this.points))};a.prototype.getThickness=function(){return this.thickness};a.prototype.setThickness=function(d){if(d!==this.thickness){var c=this.thickness;this.thickness=d;this.propertyChangeSupport.firePropertyChange("THICKNESS",c,d)}};a.prototype.getCapStyle=function(){return this.capStyle};a.prototype.setCapStyle=function(d){if(d!==this.capStyle){var c=this.capStyle;this.capStyle=d;this.propertyChangeSupport.firePropertyChange("CAP_STYLE",c,d)}};a.prototype.getJoinStyle=function(){return this.joinStyle};a.prototype.setJoinStyle=function(d){if(d!==this.joinStyle){var c=this.joinStyle;this.joinStyle=d;this.polylinePathCache=null;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("JOIN_STYLE",c,d)}};a.prototype.getDashStyle=function(){return this.dashStyle};a.prototype.setDashStyle=function(d){if(d!==this.dashStyle){var c=this.dashStyle;this.dashStyle=d;this.propertyChangeSupport.firePropertyChange("DASH_STYLE",c,d)}};a.prototype.getStartArrowStyle=function(){return this.startArrowStyle};a.prototype.setStartArrowStyle=function(d){if(d!==this.startArrowStyle){var c=this.startArrowStyle;this.startArrowStyle=d;this.propertyChangeSupport.firePropertyChange("START_ARROW_STYLE",c,d)}};a.prototype.getEndArrowStyle=function(){return this.endArrowStyle};a.prototype.setEndArrowStyle=function(c){if(c!==this.endArrowStyle){var d=this.endArrowStyle;this.endArrowStyle=c;this.propertyChangeSupport.firePropertyChange("END_ARROW_STYLE",d,c)}};a.prototype.isClosedPath=function(){return this.closedPath};a.prototype.setClosedPath=function(c){if(c!==this.closedPath){this.closedPath=c;this.propertyChangeSupport.firePropertyChange("CLOSED_PATH",!c,c)}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(c!==this.color){var d=this.color;this.color=c;this.propertyChangeSupport.firePropertyChange("COLOR",d,c)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.propertyChangeSupport.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getLength=function(){var g=[0,0];var e=[0,0];var c=[0,0];var f=0;for(var d=this.getPolylinePath().getPathIterator(null,0.1);!d.isDone();d.next()){switch((d.currentSegment(c))){case java.awt.geom.PathIterator.SEG_CLOSE:f+=java.awt.geom.Point2D.distance(g[0],g[1],e[0],e[1]);break;case java.awt.geom.PathIterator.SEG_MOVETO:(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,g,0,2);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,e,0,2);break;case java.awt.geom.PathIterator.SEG_LINETO:f+=java.awt.geom.Point2D.distance(e[0],e[1],c[0],c[1]);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(c,0,e,0,2);break}}return f};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.getPointIndexAt=function(c,f,e){for(var d=0;d<this.points.length;d++){if(Math.abs(c-this.points[d][0])<=e&&Math.abs(f-this.points[d][1])<=e){return d}}return -1};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getPolylinePath=function(){if(this.polylinePathCache==null){var j=new java.awt.geom.GeneralPath();if(this.joinStyle===a.JoinStyle.CURVED){for(var g=0,c=this.closedPath?this.points.length:this.points.length-1;g<c;g++){var h=new java.awt.geom.CubicCurve2D.Float();var e=this.points[g===0?this.points.length-1:g-1];var m=this.points[g];var k=this.points[g===this.points.length-1?0:g+1];var l=[k[0]-e[0],k[1]-e[1]];var d=this.points[(g+2)%this.points.length];var f=[m[0]-d[0],m[1]-d[1]];h.setCurve(m[0],m[1],m[0]+(g!==0||this.closedPath?l[0]/3.625:0),m[1]+(g!==0||this.closedPath?l[1]/3.625:0),k[0]+(g!==this.points.length-2||this.closedPath?f[0]/3.625:0),k[1]+(g!==this.points.length-2||this.closedPath?f[1]/3.625:0),k[0],k[1]);j.append(h,true)}}else{j.moveTo(this.points[0][0],this.points[0][1]);for(var g=1;g<this.points.length;g++){j.lineTo(this.points[g][0],this.points[g][1])}if(this.closedPath){j.closePath()}}this.polylinePathCache=j}return this.polylinePathCache};a.prototype.getShape=function(){if(this.shapeCache==null){this.shapeCache=this.getPolylinePath()}return this.shapeCache};a.prototype.move=function(d,c){if(d!==0||c!==0){var f=this.getPoints();for(var e=0;e<f.length;e++){f[e][0]+=d;f[e][1]+=c}this.updatePoints(f)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);c.level=null;return c};return a}(HomeObject));Polyline.__class="com.eteks.sweethome3d.model.Polyline";Polyline.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];(function(a){var b;(function(f){f[f.BUTT=0]="BUTT";f[f.SQUARE=1]="SQUARE";f[f.ROUND=2]="ROUND"})(b=a.CapStyle||(a.CapStyle={}));var d;(function(f){f[f.BEVEL=0]="BEVEL";f[f.MITER=1]="MITER";f[f.ROUND=2]="ROUND";f[f.CURVED=3]="CURVED"})(d=a.JoinStyle||(a.JoinStyle={}));var e;(function(f){f[f.NONE=0]="NONE";f[f.DELTA=1]="DELTA";f[f.OPEN=2]="OPEN";f[f.DISC=3]="DISC"})(e=a.ArrowStyle||(a.ArrowStyle={}));var c;(function(f){f[f.SOLID=0]="SOLID";f[f.DOT=1]="DOT";f[f.DASH=2]="DASH";f[f.DASH_DOT=3]="DASH_DOT";f[f.DASH_DOT_DOT=4]="DASH_DOT_DOT"})(c=a.DashStyle||(a.DashStyle={}))})(Polyline||(Polyline={}));var Room=(function(b){__extends(a,b);function a(c){var d=b.call(this)||this;d.propertyChangeSupport=new PropertyChangeSupport(d);d.name=null;d.nameXOffset=0;d.nameYOffset=0;d.nameStyle=null;d.nameAngle=0;d.points=null;d.areaVisible=false;d.areaXOffset=0;d.areaYOffset=0;d.areaStyle=null;d.areaAngle=0;d.floorVisible=false;d.floorColor=null;d.floorTexture=null;d.floorShininess=0;d.ceilingVisible=false;d.ceilingColor=null;d.ceilingTexture=null;d.ceilingShininess=0;d.level=null;d.shapeCache=null;d.areaCache=null;if(c.length<=1){throw new IllegalStateException("Room points must containt at least two points")}d.points=d.deepCopy(c);d.areaVisible=true;d.nameYOffset=-40;d.floorVisible=true;d.ceilingVisible=true;return d}a.TWICE_PI_$LI$=function(){if(a.TWICE_PI==null){a.TWICE_PI=2*Math.PI}return a.TWICE_PI};a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.name))){var d=this.name;this.name=c;this.propertyChangeSupport.firePropertyChange("NAME",d,c)}};a.prototype.getNameXOffset=function(){return this.nameXOffset};a.prototype.setNameXOffset=function(c){if(c!==this.nameXOffset){var d=this.nameXOffset;this.nameXOffset=c;this.propertyChangeSupport.firePropertyChange("NAME_X_OFFSET",d,c)}};a.prototype.getNameYOffset=function(){return this.nameYOffset};a.prototype.setNameYOffset=function(c){if(c!==this.nameYOffset){var d=this.nameYOffset;this.nameYOffset=c;this.propertyChangeSupport.firePropertyChange("NAME_Y_OFFSET",d,c)}};a.prototype.getNameStyle=function(){return this.nameStyle};a.prototype.setNameStyle=function(d){if(d!==this.nameStyle){var c=this.nameStyle;this.nameStyle=d;this.propertyChangeSupport.firePropertyChange("NAME_STYLE",c,d)}};a.prototype.getNameAngle=function(){return this.nameAngle};a.prototype.setNameAngle=function(c){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.nameAngle){var d=this.nameAngle;this.nameAngle=c;this.propertyChangeSupport.firePropertyChange("NAME_ANGLE",d,c)}};a.prototype.getPoints=function(){return this.deepCopy(this.points)};a.prototype.getPointCount=function(){return this.points.length};a.prototype.deepCopy=function(e){var c=new Array(e.length);for(var d=0;d<e.length;d++){c[d]=e[d].slice(0)}return c};a.prototype.setPoints=function(c){if(!(JSON.stringify(this.points)===JSON.stringify(c))){this.updatePoints(c)}};a.prototype.updatePoints=function(d){var c=this.points;this.points=this.deepCopy(d);this.shapeCache=null;this.areaCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",c,d)};a.prototype.addPoint$float$float=function(c,d){this.addPoint$float$float$int(c,d,this.points.length)};a.prototype.addPoint$float$float$int=function(c,g,d){if(d<0||d>this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}var f=new Array(this.points.length+1);(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,0,f,0,d);f[d]=[c,g];(function(m,l,o,n,k){if(m!==o||n>=l+k){while(--k>=0){o[n++]=m[l++]}}else{var j=m.slice(l,l+k);for(var h=0;h<k;h++){o[n++]=j[h]}}})(this.points,d,f,d+1,this.points.length-d);var e=this.points;this.points=f;this.shapeCache=null;this.areaCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",e,this.deepCopy(this.points))};a.prototype.addPoint=function(c,e,d){if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&((typeof d==="number")||d===null)){return this.addPoint$float$float$int(c,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.addPoint$float$float(c,e)}else{throw new Error("invalid overload")}}};a.prototype.setPoint=function(c,f,d){if(d<0||d>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+d),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}if(this.points[d][0]!==c||this.points[d][1]!==f){var e=this.points;this.points=this.deepCopy(this.points);this.points[d][0]=c;this.points[d][1]=f;this.shapeCache=null;this.areaCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",e,this.deepCopy(this.points))}};a.prototype.removePoint=function(c){if(c<0||c>=this.points.length){throw Object.defineProperty(new Error("Invalid index "+c),"__classes",{configurable:true,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]})}else{if(this.points.length<=1){throw new IllegalStateException("Room points must containt at least one point")}}var e=new Array(this.points.length-1);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,0,e,0,c);(function(k,j,m,l,h){if(k!==m||l>=j+h){while(--h>=0){m[l++]=k[j++]}}else{var g=k.slice(j,j+h);for(var f=0;f<h;f++){m[l++]=g[f]}}})(this.points,c+1,e,c,this.points.length-c-1);var d=this.points;this.points=e;this.shapeCache=null;this.areaCache=null;this.propertyChangeSupport.firePropertyChange("POINTS",d,this.deepCopy(this.points))};a.prototype.isAreaVisible=function(){return this.areaVisible};a.prototype.setAreaVisible=function(c){if(c!==this.areaVisible){this.areaVisible=c;this.propertyChangeSupport.firePropertyChange("AREA_VISIBLE",!c,c)}};a.prototype.getAreaXOffset=function(){return this.areaXOffset};a.prototype.setAreaXOffset=function(c){if(c!==this.areaXOffset){var d=this.areaXOffset;this.areaXOffset=c;this.propertyChangeSupport.firePropertyChange("AREA_X_OFFSET",d,c)}};a.prototype.getAreaYOffset=function(){return this.areaYOffset};a.prototype.setAreaYOffset=function(c){if(c!==this.areaYOffset){var d=this.areaYOffset;this.areaYOffset=c;this.propertyChangeSupport.firePropertyChange("AREA_Y_OFFSET",d,c)}};a.prototype.getAreaStyle=function(){return this.areaStyle};a.prototype.setAreaStyle=function(d){if(d!==this.areaStyle){var c=this.areaStyle;this.areaStyle=d;this.propertyChangeSupport.firePropertyChange("AREA_STYLE",c,d)}};a.prototype.getAreaAngle=function(){return this.areaAngle};a.prototype.setAreaAngle=function(d){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.areaAngle){var c=this.areaAngle;this.areaAngle=d;this.propertyChangeSupport.firePropertyChange("AREA_ANGLE",c,d)}};a.prototype.getXCenter=function(){var c=this.points[0][0];var e=this.points[0][0];for(var d=1;d<this.points.length;d++){c=Math.min(c,this.points[d][0]);e=Math.max(e,this.points[d][0])}return(c+e)/2};a.prototype.getYCenter=function(){var c=this.points[0][1];var e=this.points[0][1];for(var d=1;d<this.points.length;d++){c=Math.min(c,this.points[d][1]);e=Math.max(e,this.points[d][1])}return(c+e)/2};a.prototype.getFloorColor=function(){return this.floorColor};a.prototype.setFloorColor=function(c){if(c!==this.floorColor&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.floorColor))){var d=this.floorColor;this.floorColor=c;this.propertyChangeSupport.firePropertyChange("FLOOR_COLOR",d,c)}};a.prototype.getFloorTexture=function(){return this.floorTexture};a.prototype.setFloorTexture=function(c){if(c!==this.floorTexture&&(c==null||!c.equals(this.floorTexture))){var d=this.floorTexture;this.floorTexture=c;this.propertyChangeSupport.firePropertyChange("FLOOR_TEXTURE",d,c)}};a.prototype.isFloorVisible=function(){return this.floorVisible};a.prototype.setFloorVisible=function(c){if(c!==this.floorVisible){this.floorVisible=c;this.propertyChangeSupport.firePropertyChange("FLOOR_VISIBLE",!c,c)}};a.prototype.getFloorShininess=function(){return this.floorShininess};a.prototype.setFloorShininess=function(d){if(d!==this.floorShininess){var c=this.floorShininess;this.floorShininess=d;this.propertyChangeSupport.firePropertyChange("FLOOR_SHININESS",c,d)}};a.prototype.getCeilingColor=function(){return this.ceilingColor};a.prototype.setCeilingColor=function(c){if(c!==this.ceilingColor&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.ceilingColor))){var d=this.ceilingColor;this.ceilingColor=c;this.propertyChangeSupport.firePropertyChange("CEILING_COLOR",d,c)}};a.prototype.getCeilingTexture=function(){return this.ceilingTexture};a.prototype.setCeilingTexture=function(c){if(c!==this.ceilingTexture&&(c==null||!c.equals(this.ceilingTexture))){var d=this.ceilingTexture;this.ceilingTexture=c;this.propertyChangeSupport.firePropertyChange("CEILING_TEXTURE",d,c)}};a.prototype.isCeilingVisible=function(){return this.ceilingVisible};a.prototype.setCeilingVisible=function(c){if(c!==this.ceilingVisible){this.ceilingVisible=c;this.propertyChangeSupport.firePropertyChange("CEILING_VISIBLE",!c,c)}};a.prototype.getCeilingShininess=function(){return this.ceilingShininess};a.prototype.setCeilingShininess=function(d){if(d!==this.ceilingShininess){var c=this.ceilingShininess;this.ceilingShininess=d;this.propertyChangeSupport.firePropertyChange("CEILING_SHININESS",c,d)}};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.propertyChangeSupport.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(c){return this.level===c||this.level!=null&&c!=null&&this.level.getElevation()===c.getElevation()&&this.level.getElevationIndex()<c.getElevationIndex()};a.prototype.getArea=function(){if(this.areaCache==null){var d=new java.awt.geom.Area(this.getShape());if(d.isSingular()){this.areaCache=Math.abs(this.getSignedArea(this.getPoints()))}else{var h=0;var g=([]);for(var f=d.getPathIterator(null);!f.isDone();){var e=[0,0];switch((f.currentSegment(e))){case java.awt.geom.PathIterator.SEG_MOVETO:(g.push(e)>0);break;case java.awt.geom.PathIterator.SEG_LINETO:(g.push(e)>0);break;case java.awt.geom.PathIterator.SEG_CLOSE:var c=g.slice(0);h+=this.getSignedArea(c);(g.length=0);break}f.next()}this.areaCache=h}}return this.areaCache};a.prototype.getSignedArea=function(e){var d=0;for(var c=1;c<e.length;c++){d+=e[c][0]*e[c-1][1];d-=e[c][1]*e[c-1][0]}d+=e[0][0]*e[e.length-1][1];d-=e[0][1]*e[e.length-1][0];return d/2};a.prototype.isClockwise=function(){return this.getSignedArea(this.getPoints())<0};a.prototype.isSingular=function(){return new java.awt.geom.Area(this.getShape()).isSingular()};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,e,d){return this.containsShapeAtWithMargin(this.getShape(),c,e,d)};a.prototype.getPointIndexAt=function(c,f,e){for(var d=0;d<this.points.length;d++){if(Math.abs(c-this.points[d][0])<=e&&Math.abs(f-this.points[d][1])<=e){return d}}return -1};a.prototype.isNameCenterPointAt=function(c,e,d){return Math.abs(c-this.getXCenter()-this.getNameXOffset())<=d&&Math.abs(e-this.getYCenter()-this.getNameYOffset())<=d};a.prototype.isAreaCenterPointAt=function(c,e,d){return Math.abs(c-this.getXCenter()-this.getAreaXOffset())<=d&&Math.abs(e-this.getYCenter()-this.getAreaYOffset())<=d};a.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};a.prototype.getShape=function(){if(this.shapeCache==null){var d=new java.awt.geom.GeneralPath();d.moveTo(this.points[0][0],this.points[0][1]);for(var c=1;c<this.points.length;c++){d.lineTo(this.points[c][0],this.points[c][1])}d.closePath();this.shapeCache=d}return this.shapeCache};a.prototype.move=function(d,c){if(d!==0||c!==0){var f=this.getPoints();for(var e=0;e<f.length;e++){f[e][0]+=d;f[e][1]+=c}this.updatePoints(f)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);c.level=null;return c};return a}(HomeObject));Room.__class="com.eteks.sweethome3d.model.Room";Room.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];var Wall=(function(a){__extends(b,a);function b(i,m,c,k,j,l,h){var f=this;if(((typeof i==="number")||i===null)&&((typeof m==="number")||m===null)&&((typeof c==="number")||c===null)&&((typeof k==="number")||k===null)&&((typeof j==="number")||j===null)&&((typeof l==="number")||l===null)&&((h!=null&&(h.__interfaces!=null&&h.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||h.constructor!=null&&h.constructor.__interfaces!=null&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0))||h===null)){var e=Array.prototype.slice.call(arguments);f=a.call(this)||this;f.xStart=0;f.yStart=0;f.xEnd=0;f.yEnd=0;f.arcExtent=null;f.wallAtStart=null;f.wallAtEnd=null;f.thickness=0;f.height=null;f.heightAtEnd=null;f.leftSideColor=null;f.leftSideTexture=null;f.leftSideShininess=0;f.leftSideBaseboard=null;f.rightSideColor=null;f.rightSideTexture=null;f.rightSideShininess=0;f.rightSideBaseboard=null;f.pattern=null;f.topColor=null;f.level=null;f.arcCircleCenterCache=null;f.pointsCache=null;f.pointsIncludingBaseboardsCache=null;f.symmetric=true;f.propertyChangeSupport=new PropertyChangeSupport(f);f.xStart=0;f.yStart=0;f.xEnd=0;f.yEnd=0;f.arcExtent=null;f.wallAtStart=null;f.wallAtEnd=null;f.thickness=0;f.height=null;f.heightAtEnd=null;f.leftSideColor=null;f.leftSideTexture=null;f.leftSideShininess=0;f.leftSideBaseboard=null;f.rightSideColor=null;f.rightSideTexture=null;f.rightSideShininess=0;f.rightSideBaseboard=null;f.pattern=null;f.topColor=null;f.level=null;f.arcCircleCenterCache=null;f.pointsCache=null;f.pointsIncludingBaseboardsCache=null;(function(){f.xStart=i;f.yStart=m;f.xEnd=c;f.yEnd=k;f.thickness=j;f.height=l;f.pattern=h})()}else{if(((typeof i==="number")||i===null)&&((typeof m==="number")||m===null)&&((typeof c==="number")||c===null)&&((typeof k==="number")||k===null)&&((typeof j==="number")||j===null)&&((typeof l==="number")||l===null)&&h===undefined){var e=Array.prototype.slice.call(arguments);var d=Array.prototype.slice.call(arguments);var g=null;f=a.call(this)||this;f.xStart=0;f.yStart=0;f.xEnd=0;f.yEnd=0;f.arcExtent=null;f.wallAtStart=null;f.wallAtEnd=null;f.thickness=0;f.height=null;f.heightAtEnd=null;f.leftSideColor=null;f.leftSideTexture=null;f.leftSideShininess=0;f.leftSideBaseboard=null;f.rightSideColor=null;f.rightSideTexture=null;f.rightSideShininess=0;f.rightSideBaseboard=null;f.pattern=null;f.topColor=null;f.level=null;f.arcCircleCenterCache=null;f.pointsCache=null;f.pointsIncludingBaseboardsCache=null;f.symmetric=true;f.propertyChangeSupport=new PropertyChangeSupport(f);f.xStart=0;f.yStart=0;f.xEnd=0;f.yEnd=0;f.arcExtent=null;f.wallAtStart=null;f.wallAtEnd=null;f.thickness=0;f.height=null;f.heightAtEnd=null;f.leftSideColor=null;f.leftSideTexture=null;f.leftSideShininess=0;f.leftSideBaseboard=null;f.rightSideColor=null;f.rightSideTexture=null;f.rightSideShininess=0;f.rightSideBaseboard=null;f.pattern=null;f.topColor=null;f.level=null;f.arcCircleCenterCache=null;f.pointsCache=null;f.pointsIncludingBaseboardsCache=null;(function(){f.xStart=i;f.yStart=m;f.xEnd=c;f.yEnd=k;f.thickness=j;f.height=l;f.pattern=g})()}else{throw new Error("invalid overload")}}return f}b.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};b.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};b.prototype.getXStart=function(){return this.xStart};b.prototype.setXStart=function(d){if(d!==this.xStart){var c=this.xStart;this.xStart=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.propertyChangeSupport.firePropertyChange("X_START",c,d)}};b.prototype.getYStart=function(){return this.yStart};b.prototype.setYStart=function(d){if(d!==this.yStart){var c=this.yStart;this.yStart=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.propertyChangeSupport.firePropertyChange("Y_START",c,d)}};b.prototype.getXEnd=function(){return this.xEnd};b.prototype.setXEnd=function(c){if(c!==this.xEnd){var d=this.xEnd;this.xEnd=c;this.clearPointsCache();this.arcCircleCenterCache=null;this.propertyChangeSupport.firePropertyChange("X_END",d,c)}};b.prototype.getYEnd=function(){return this.yEnd};b.prototype.setYEnd=function(c){if(c!==this.yEnd){var d=this.yEnd;this.yEnd=c;this.clearPointsCache();this.arcCircleCenterCache=null;this.propertyChangeSupport.firePropertyChange("Y_END",d,c)}};b.prototype.getLength=function(){if(this.arcExtent==null||this.arcExtent===0){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)}else{var d=this.getArcCircleCenter();var c=java.awt.geom.Point2D.distance(this.xStart,this.yStart,d[0],d[1]);return Math.abs(this.arcExtent)*c}};b.prototype.getStartPointToEndPointDistance=function(){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)};b.prototype.setArcExtent=function(d){if(d!==this.arcExtent||(d!=null&&!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(d,this.arcExtent))){var c=this.arcExtent;this.arcExtent=d;this.clearPointsCache();this.arcCircleCenterCache=null;this.propertyChangeSupport.firePropertyChange("ARC_EXTENT",c,d)}};b.prototype.getArcExtent=function(){return this.arcExtent};b.prototype.getXArcCircleCenter=function(){if(this.arcExtent==null){return(this.xStart+this.xEnd)/2}else{return this.getArcCircleCenter()[0]}};b.prototype.getYArcCircleCenter=function(){if(this.arcExtent==null){return(this.yStart+this.yEnd)/2}else{return this.getArcCircleCenter()[1]}};b.prototype.getArcCircleCenter=function(){if(this.arcCircleCenterCache==null){var f=java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd);var e=Math.abs(this.arcExtent)>Math.PI?-(Math.PI+this.arcExtent)/2:(Math.PI-this.arcExtent)/2;var d=-(Math.tan(e)*f/2);var g=(this.xStart+this.xEnd)/2;var c=(this.yStart+this.yEnd)/2;var h=Math.atan2(this.xStart-this.xEnd,this.yEnd-this.yStart);this.arcCircleCenterCache=[(g+d*Math.cos(h)),(c+d*Math.sin(h))]}return this.arcCircleCenterCache};b.prototype.getWallAtStart=function(){return this.wallAtStart};b.prototype.setWallAtStart=function(d,c){if(c===void 0){c=true}if(d!==this.wallAtStart){var e=this.wallAtStart;this.wallAtStart=d;this.clearPointsCache();this.propertyChangeSupport.firePropertyChange("WALL_AT_START",e,d);if(c){this.detachJoinedWall(e)}}};b.prototype.getWallAtEnd=function(){return this.wallAtEnd};b.prototype.setWallAtEnd=function(e,d){if(d===void 0){d=true}if(e!==this.wallAtEnd){var c=this.wallAtEnd;this.wallAtEnd=e;this.clearPointsCache();this.propertyChangeSupport.firePropertyChange("WALL_AT_END",c,e);if(d){this.detachJoinedWall(c)}}};b.prototype.detachJoinedWall=function(c){if(c!=null){if(c.getWallAtStart()===this){c.setWallAtStart(null,false)}else{if(c.getWallAtEnd()===this){c.setWallAtEnd(null,false)}}}};b.prototype.getThickness=function(){return this.thickness};b.prototype.setThickness=function(d){if(d!==this.thickness){var c=this.thickness;this.thickness=d;this.clearPointsCache();this.propertyChangeSupport.firePropertyChange("THICKNESS",c,d)}};b.prototype.getHeight=function(){return this.height};b.prototype.setHeight=function(c){if(c!==this.height||(c!=null&&!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.height))){var d=this.height;this.height=c;this.propertyChangeSupport.firePropertyChange("HEIGHT",d,c)}};b.prototype.getHeightAtEnd=function(){return this.heightAtEnd};b.prototype.setHeightAtEnd=function(c){if(c!==this.heightAtEnd&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.heightAtEnd))){var d=this.heightAtEnd;this.heightAtEnd=c;this.propertyChangeSupport.firePropertyChange("HEIGHT_AT_END",d,c)}};b.prototype.isTrapezoidal=function(){return this.height!=null&&this.heightAtEnd!=null&&!(function(d,c){if(d&&d.equals){return d.equals(c)}else{return d===c}})(this.height,this.heightAtEnd)};b.prototype.getLeftSideColor=function(){return this.leftSideColor};b.prototype.setLeftSideColor=function(c){if(c!==this.leftSideColor&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.leftSideColor))){var d=this.leftSideColor;this.leftSideColor=c;this.propertyChangeSupport.firePropertyChange("LEFT_SIDE_COLOR",d,c)}};b.prototype.getRightSideColor=function(){return this.rightSideColor};b.prototype.setRightSideColor=function(c){if(c!==this.rightSideColor&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.rightSideColor))){var d=this.rightSideColor;this.rightSideColor=c;this.propertyChangeSupport.firePropertyChange("RIGHT_SIDE_COLOR",d,c)}};b.prototype.getLeftSideTexture=function(){return this.leftSideTexture};b.prototype.setLeftSideTexture=function(d){if(d!==this.leftSideTexture&&(d==null||!d.equals(this.leftSideTexture))){var c=this.leftSideTexture;this.leftSideTexture=d;this.propertyChangeSupport.firePropertyChange("LEFT_SIDE_TEXTURE",c,d)}};b.prototype.getRightSideTexture=function(){return this.rightSideTexture};b.prototype.setRightSideTexture=function(c){if(c!==this.rightSideTexture&&(c==null||!c.equals(this.rightSideTexture))){var d=this.rightSideTexture;this.rightSideTexture=c;this.propertyChangeSupport.firePropertyChange("RIGHT_SIDE_TEXTURE",d,c)}};b.prototype.getLeftSideShininess=function(){return this.leftSideShininess};b.prototype.setLeftSideShininess=function(c){if(c!==this.leftSideShininess){var d=this.leftSideShininess;this.leftSideShininess=c;this.propertyChangeSupport.firePropertyChange("LEFT_SIDE_SHININESS",d,c)}};b.prototype.getRightSideShininess=function(){return this.rightSideShininess};b.prototype.setRightSideShininess=function(d){if(d!==this.rightSideShininess){var c=this.rightSideShininess;this.rightSideShininess=d;this.propertyChangeSupport.firePropertyChange("RIGHT_SIDE_SHININESS",c,d)}};b.prototype.getLeftSideBaseboard=function(){return this.leftSideBaseboard};b.prototype.setLeftSideBaseboard=function(d){if(d!==this.leftSideBaseboard&&(d==null||!d.equals(this.leftSideBaseboard))){var c=this.leftSideBaseboard;this.leftSideBaseboard=d;this.clearPointsCache();this.propertyChangeSupport.firePropertyChange("LEFT_SIDE_BASEBOARD",c,d)}};b.prototype.getRightSideBaseboard=function(){return this.rightSideBaseboard};b.prototype.setRightSideBaseboard=function(c){if(c!==this.rightSideBaseboard&&(c==null||!c.equals(this.rightSideBaseboard))){var d=this.rightSideBaseboard;this.rightSideBaseboard=c;this.clearPointsCache();this.propertyChangeSupport.firePropertyChange("RIGHT_SIDE_BASEBOARD",d,c)}};b.prototype.getPattern=function(){return this.pattern};b.prototype.setPattern=function(d){if(this.pattern!==d){var c=this.pattern;this.pattern=d;this.propertyChangeSupport.firePropertyChange("PATTERN",c,d)}};b.prototype.getTopColor=function(){return this.topColor};b.prototype.setTopColor=function(c){if(this.topColor!==c&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.topColor))){var d=this.topColor;this.topColor=c;this.propertyChangeSupport.firePropertyChange("TOP_COLOR",d,c)}};b.prototype.getLevel=function(){return this.level};b.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.propertyChangeSupport.firePropertyChange("LEVEL",c,d)}};b.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&c+this.getWallMaximumHeight()>d}else{return false}}};b.prototype.getWallMaximumHeight=function(){if(this.height==null){return 0}else{if(this.isTrapezoidal()){return Math.max(this.height,this.heightAtEnd)}else{return this.height}}};b.prototype.clearPointsCache=function(){this.pointsCache=null;this.pointsIncludingBaseboardsCache=null;if(this.wallAtStart!=null){this.wallAtStart.pointsCache=null;this.wallAtStart.pointsIncludingBaseboardsCache=null}if(this.wallAtEnd!=null){this.wallAtEnd.pointsCache=null;this.wallAtEnd.pointsIncludingBaseboardsCache=null}};b.prototype.getPoints$=function(){return this.getPoints$boolean(false)};b.prototype.getPoints$boolean=function(c){if(c&&(this.leftSideBaseboard!=null||this.rightSideBaseboard!=null)){if(this.pointsIncludingBaseboardsCache==null){this.pointsIncludingBaseboardsCache=this.getShapePoints(true)}return this.clonePoints(this.pointsIncludingBaseboardsCache)}else{if(this.pointsCache==null){this.pointsCache=this.getShapePoints(false)}return this.clonePoints(this.pointsCache)}};b.prototype.getPoints=function(c){if(((typeof c==="boolean")||c===null)){return this.getPoints$boolean(c)}else{if(c===undefined){return this.getPoints$()}else{throw new Error("invalid overload")}}};b.prototype.clonePoints=function(d){var e=new Array(d.length);for(var c=0;c<d.length;c++){e[c]=d[c].slice(0)}return e};b.prototype.getShapePoints=function(m){var z=0.01;var c=this.getUnjoinedShapePoints(m);var w=0;var i=c.length-1;var t=(c.length/2|0)-1;var o=(c.length/2|0);var u=2*this.thickness;if(this.wallAtStart!=null){var y=this.wallAtStart.getUnjoinedShapePoints(m);var v=0;var s=y.length-1;var g=(y.length/2|0)-1;var h=(y.length/2|0);var n=this.wallAtStart.getWallAtEnd()===this&&(this.wallAtStart.getWallAtStart()!==this||(this.wallAtStart.xEnd===this.xStart&&this.wallAtStart.yEnd===this.yStart));var x=this.wallAtStart.getWallAtStart()===this&&(this.wallAtStart.getWallAtEnd()!==this||(this.wallAtStart.xStart===this.xStart&&this.wallAtStart.yStart===this.yStart));var k=m?this.wallAtStart.pointsIncludingBaseboardsCache:this.wallAtStart.pointsCache;if(n){this.computeIntersection(c[w],c[w+1],y[g],y[g-1],u);this.computeIntersection(c[i],c[i-1],y[h],y[h+1],u);if(k!=null){if(Math.abs(c[w][0]-k[g][0])<z&&Math.abs(c[w][1]-k[g][1])<z){c[w]=k[g]}if(Math.abs(c[i][0]-k[h][0])<z&&Math.abs(c[i][1]-k[h][1])<z){c[i]=k[h]}}}else{if(x){this.computeIntersection(c[w],c[w+1],y[s],y[s-1],u);this.computeIntersection(c[i],c[i-1],y[v],y[v+1],u);if(k!=null){if(Math.abs(c[w][0]-k[s][0])<z&&Math.abs(c[w][1]-k[s][1])<z){c[w]=k[s]}if(k!=null&&Math.abs(c[i][0]-k[v][0])<z&&Math.abs(c[i][1]-k[v][1])<z){c[i]=k[v]}}}}}if(this.wallAtEnd!=null){var d=this.wallAtEnd.getUnjoinedShapePoints(m);var l=0;var q=d.length-1;var r=(d.length/2|0)-1;var j=(d.length/2|0);var p=this.wallAtEnd.getWallAtStart()===this&&(this.wallAtEnd.getWallAtEnd()!==this||(this.wallAtEnd.xStart===this.xEnd&&this.wallAtEnd.yStart===this.yEnd));var f=this.wallAtEnd.getWallAtEnd()===this&&(this.wallAtEnd.getWallAtStart()!==this||(this.wallAtEnd.xEnd===this.xEnd&&this.wallAtEnd.yEnd===this.yEnd));var e=m?this.wallAtEnd.pointsIncludingBaseboardsCache:this.wallAtEnd.pointsCache;if(p){this.computeIntersection(c[t],c[t-1],d[l],d[l+1],u);this.computeIntersection(c[o],c[o+1],d[q],d[q-1],u);if(e!=null){if(Math.abs(c[t][0]-e[l][0])<z&&Math.abs(c[t][1]-e[l][1])<z){c[t]=e[l]}if(Math.abs(c[o][0]-e[q][0])<z&&Math.abs(c[o][1]-e[q][1])<z){c[o]=e[q]}}}else{if(f){this.computeIntersection(c[t],c[t-1],d[j],d[j+1],u);this.computeIntersection(c[o],c[o+1],d[r],d[r-1],u);if(e!=null){if(Math.abs(c[t][0]-e[j][0])<z&&Math.abs(c[t][1]-e[j][1])<z){c[t]=e[j]}if(Math.abs(c[o][0]-e[r][0])<z&&Math.abs(c[o][1]-e[r][1])<z){c[o]=e[r]}}}}}return c};b.prototype.getUnjoinedShapePoints=function(k){if(this.arcExtent!=null&&this.arcExtent!==0&&java.awt.geom.Point2D.distanceSq(this.xStart,this.yStart,this.xEnd,this.yEnd)>1e-10){var h=this.getArcCircleCenter();var u=Math.atan2(h[1]-this.yStart,h[0]-this.xStart);u+=2*Math.atan2(this.yStart-this.yEnd,this.xEnd-this.xStart);var t=java.awt.geom.Point2D.distance(h[0],h[1],this.xStart,this.yStart);var e=t+this.thickness/2;var p=Math.max(0,t-this.thickness/2);var s=e*Math.abs(this.arcExtent);var q=this.arcExtent/Math.sqrt(s);var g=((this.arcExtent/q)|0);if(k){if(q>0){if(this.leftSideBaseboard!=null){e+=this.leftSideBaseboard.getThickness()}if(this.rightSideBaseboard!=null){p-=this.rightSideBaseboard.getThickness()}}else{if(this.leftSideBaseboard!=null){p-=this.leftSideBaseboard.getThickness()}if(this.rightSideBaseboard!=null){e+=this.rightSideBaseboard.getThickness()}}}var c=([]);if(this.symmetric){if(Math.abs(this.arcExtent-g*q)>0.000001){q=this.arcExtent/++g}for(var v=0;v<=g;v++){this.computeRoundWallShapePoint(c,u+this.arcExtent-v*q,v,q,h,e,p)}}else{var v=0;for(var w=this.arcExtent;q>0?w>=q*0.1:w<=-q*0.1;w-=q,v++){this.computeRoundWallShapePoint(c,u+w,v,q,h,e,p)}this.computeRoundWallShapePoint(c,u,v,q,h,e,p)}return c.slice(0)}else{var w=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var d=Math.sin(w);var f=Math.cos(w);var n=this.thickness/2;if(k&&this.leftSideBaseboard!=null){n+=this.leftSideBaseboard.getThickness()}var l=d*n;var j=f*n;var r=this.thickness/2;if(k&&this.rightSideBaseboard!=null){r+=this.rightSideBaseboard.getThickness()}var o=d*r;var m=f*r;return[[this.xStart+l,this.yStart-j],[this.xEnd+l,this.yEnd-j],[this.xEnd-o,this.yEnd+m],[this.xStart-o,this.yStart+m]]}};b.prototype.computeRoundWallShapePoint=function(m,e,g,d,k,c,h){var l=Math.cos(e);var j=Math.sin(e);var f=[(k[0]+h*l),(k[1]-h*j)];var i=[(k[0]+c*l),(k[1]-c*j)];if(d>0){m.splice(g,0,f);m.splice(m.length-1-g,0,i)}else{m.splice(g,0,i);m.splice(m.length-1-g,0,f)}};b.prototype.computeIntersection=function(k,i,h,g,c){var n=(i[1]-k[1])/(i[0]-k[0]);var m=(g[1]-h[1])/(g[0]-h[0]);if(n!==m){var l=k[0];var j=k[1];if(Math.abs(n)>4000){if(Math.abs(m)<4000){l=k[0];var e=g[1]-m*g[0];j=m*l+e}}else{if(Math.abs(m)>4000){if(Math.abs(n)<4000){l=h[0];var f=i[1]-n*i[0];j=n*l+f}}else{var d=(function(o){if(o>0){return 1}else{if(o<0){return -1}else{return 0}}})(n)===(function(o){if(o>0){return 1}else{if(o<0){return -1}else{return 0}}})(m);if(Math.abs(n-m)>0.00001&&(!d||(Math.abs(n)>Math.abs(m)?n/m:m/n)>1.004)){var f=i[1]-n*i[0];var e=g[1]-m*g[0];l=(e-f)/(n-m);j=n*l+f}}}if(java.awt.geom.Point2D.distanceSq(l,j,k[0],k[1])<c*c){k[0]=l;k[1]=j}}};b.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape(false).intersects(d)};b.prototype.containsPoint$float$float$float=function(c,e,d){return this.containsPoint$float$float$boolean$float(c,e,false,d)};b.prototype.containsPoint$float$float$boolean$float=function(c,f,e,d){return this.containsShapeAtWithMargin(this.getShape(e),c,f,d)};b.prototype.containsPoint=function(c,f,e,d){if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="boolean")||e===null)&&((typeof d==="number")||d===null)){return this.containsPoint$float$float$boolean$float(c,f,e,d)}else{if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.containsPoint$float$float$float(c,f,e)}else{throw new Error("invalid overload")}}};b.prototype.containsWallStartAt=function(c,g,e){var d=this.getPoints();var f=new java.awt.geom.Line2D.Float(d[0][0],d[0][1],d[d.length-1][0],d[d.length-1][1]);return this.containsShapeAtWithMargin(f,c,g,e)};b.prototype.containsWallEndAt=function(c,g,f){var d=this.getPoints();var e=new java.awt.geom.Line2D.Float(d[(d.length/2|0)-1][0],d[(d.length/2|0)-1][1],d[(d.length/2|0)][0],d[(d.length/2|0)][1]);return this.containsShapeAtWithMargin(e,c,g,f)};b.prototype.containsShapeAtWithMargin=function(d,c,f,e){if(e===0){return d.contains(c,f)}else{return d.intersects(c-e,f-e,2*e,2*e)}};b.prototype.getShape=function(f){var c=this.getPoints$boolean(f);var e=new java.awt.geom.GeneralPath();e.moveTo(c[0][0],c[0][1]);for(var d=1;d<c.length;d++){e.lineTo(c[d][0],c[d][1])}e.closePath();return e};b.clone=function(e){var h=([]);for(var d=0;d<e.length;d++){var c=e[d];(h.push((function(k){if(k.clone!=undefined){return k.clone()}else{var l=Object.create(k);for(var i in k){if(k.hasOwnProperty(i)){l[i]=k[i]}}return l}})(c))>0)}for(var f=0;f<e.length;f++){var c=e[f];var g=e.indexOf(c.getWallAtStart());if(g!==-1){h[f].setWallAtStart(h[g])}var j=e.indexOf(c.getWallAtEnd());if(j!==-1){h[f].setWallAtEnd(h[j])}}return h};b.prototype.move=function(d,c){this.setXStart(this.getXStart()+d);this.setYStart(this.getYStart()+c);this.setXEnd(this.getXEnd()+d);this.setYEnd(this.getYEnd()+c)};b.prototype.clone=function(){var d=this;var c=(function(g){if(a.prototype.clone!=undefined){return a.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);c.wallAtStart=null;c.wallAtEnd=null;c.level=null;c.pointsCache=null;c.pointsIncludingBaseboardsCache=null;return c};return b}(HomeObject));Wall.__class="com.eteks.sweethome3d.model.Wall";Wall.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];var HomePieceOfFurniture=(function(b){__extends(a,b);function a(c){var e=b.call(this)||this;e.propertyChangeSupport=new PropertyChangeSupport(e);e.catalogId=null;e.name=null;e.nameVisible=false;e.nameXOffset=0;e.nameYOffset=0;e.nameStyle=null;e.nameAngle=0;e.description=null;e.information=null;e.icon=null;e.planIcon=null;e.model=null;e.modelSize=null;e.width=0;e.widthInPlan=0;e.depth=0;e.depthInPlan=0;e.height=0;e.heightInPlan=0;e.elevation=0;e.dropOnTopElevation=0;e.movable=false;e.doorOrWindow=false;e.modelMaterials=null;e.color=null;e.texture=null;e.shininess=null;e.modelRotation=null;e.modelCenteredAtOrigin=false;e.staircaseCutOutShape=null;e.creator=null;e.backFaceShown=false;e.resizable=false;e.deformable=false;e.texturable=false;e.horizontallyRotatable=false;e.price=null;e.valueAddedTaxPercentage=null;e.currency=null;e.visible=false;e.x=0;e.y=0;e.angle=0;e.pitch=0;e.roll=0;e.modelMirrored=false;e.level=null;e.shapeCache=null;e.name=c.getName();e.description=c.getDescription();e.information=c.getInformation();e.icon=c.getIcon();e.planIcon=c.getPlanIcon();e.model=c.getModel();e.modelSize=c.getModelSize();e.width=c.getWidth();e.depth=c.getDepth();e.height=c.getHeight();e.elevation=c.getElevation();e.dropOnTopElevation=c.getDropOnTopElevation();e.movable=c.isMovable();e.doorOrWindow=c.isDoorOrWindow();e.color=c.getColor();e.modelRotation=c.getModelRotation();e.staircaseCutOutShape=c.getStaircaseCutOutShape();e.creator=c.getCreator();e.backFaceShown=c.isBackFaceShown();e.resizable=c.isResizable();e.deformable=c.isDeformable();e.texturable=c.isTexturable();e.horizontallyRotatable=c.isHorizontallyRotatable();e.price=c.getPrice();e.valueAddedTaxPercentage=c.getValueAddedTaxPercentage();e.currency=c.getCurrency();if(c!=null&&c instanceof a){var d=c;e.catalogId=d.getCatalogId();e.nameVisible=d.isNameVisible();e.nameXOffset=d.getNameXOffset();e.nameYOffset=d.getNameYOffset();e.nameAngle=d.getNameAngle();e.nameStyle=d.getNameStyle();e.visible=d.isVisible();e.widthInPlan=d.getWidthInPlan();e.depthInPlan=d.getDepthInPlan();e.heightInPlan=d.getHeightInPlan();e.modelCenteredAtOrigin=d.isModelCenteredAtOrigin();e.angle=d.getAngle();e.pitch=d.getPitch();e.roll=d.getRoll();e.x=d.getX();e.y=d.getY();e.modelMirrored=d.isModelMirrored();e.texture=d.getTexture();e.shininess=d.getShininess();e.modelMaterials=d.getModelMaterials()}else{if(c!=null&&c instanceof CatalogPieceOfFurniture){e.catalogId=c.getId()}e.visible=true;e.widthInPlan=e.width;e.depthInPlan=e.depth;e.heightInPlan=e.height;e.modelCenteredAtOrigin=true;e.x=e.width/2;e.y=e.depth/2}return e}a.__static_initialize=function(){if(!a.__static_initialized){a.__static_initialized=true;a.__static_initializer_0()}};a.TWICE_PI_$LI$=function(){a.__static_initialize();if(a.TWICE_PI==null){a.TWICE_PI=2*Math.PI}return a.TWICE_PI};a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$=function(){a.__static_initialize();if(a.STRAIGHT_WALL_ANGLE_MARGIN==null){a.STRAIGHT_WALL_ANGLE_MARGIN=(function(c){return c*Math.PI/180})(1)}return a.STRAIGHT_WALL_ANGLE_MARGIN};a.ROUND_WALL_ANGLE_MARGIN_$LI$=function(){a.__static_initialize();if(a.ROUND_WALL_ANGLE_MARGIN==null){a.ROUND_WALL_ANGLE_MARGIN=(function(c){return c*Math.PI/180})(10)}return a.ROUND_WALL_ANGLE_MARGIN};a.SORTABLE_PROPERTY_COMPARATORS_$LI$=function(){a.__static_initialize();return a.SORTABLE_PROPERTY_COMPARATORS};a.IDENTITY_$LI$=function(){a.__static_initialize();if(a.IDENTITY==null){a.IDENTITY=[[1,0,0],[0,1,0],[0,0,1]]}return a.IDENTITY};a.__static_initializer_0=function(){var c=(function(e,d){return e.toString().localeCompare(d.toString())});a.SORTABLE_PROPERTY_COMPARATORS=({});(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CATALOG_ID",new a.HomePieceOfFurniture$0(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"NAME",new a.HomePieceOfFurniture$1(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"WIDTH",new a.HomePieceOfFurniture$2());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"HEIGHT",new a.HomePieceOfFurniture$3());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DEPTH",new a.HomePieceOfFurniture$4());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MOVABLE",new a.HomePieceOfFurniture$5());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DOOR_OR_WINDOW",new a.HomePieceOfFurniture$6());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"COLOR",new a.HomePieceOfFurniture$7());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"TEXTURE",new a.HomePieceOfFurniture$8(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VISIBLE",new a.HomePieceOfFurniture$9());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"X",new a.HomePieceOfFurniture$10());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"Y",new a.HomePieceOfFurniture$11());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ELEVATION",new a.HomePieceOfFurniture$12());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ANGLE",new a.HomePieceOfFurniture$13());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MODEL_SIZE",new a.HomePieceOfFurniture$14());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CREATOR",new a.HomePieceOfFurniture$15(c));(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"LEVEL",new a.HomePieceOfFurniture$16());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE",new a.HomePieceOfFurniture$17());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX_PERCENTAGE",new a.HomePieceOfFurniture$18());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX",new a.HomePieceOfFurniture$19());(function(d,f,e){if(d.entries==null){d.entries=[]}for(var g=0;g<d.entries.length;g++){if(d.entries[g].key.equals!=null&&d.entries[g].key.equals(f)||d.entries[g].key===f){d.entries[g].value=e;return}}d.entries.push({key:f,value:e,getKey:function(){return this.key},getValue:function(){return this.value}})})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE_VALUE_ADDED_TAX_INCLUDED",new a.HomePieceOfFurniture$20())};a.compare$float$float=function(d,c){return(d-c)};a.compare$boolean$boolean=function(d,c){return d===c?0:(d?-1:1)};a.compare$java_math_BigDecimal$java_math_BigDecimal=function(d,c){if(d===c){return 0}else{if(d==null){return -1}else{if(c==null){return 1}else{return d.cmp(c)}}}};a.compare=function(d,c){if(((d!=null&&d instanceof Big)||d===null)&&((c!=null&&c instanceof Big)||c===null)){return a.compare$java_math_BigDecimal$java_math_BigDecimal(d,c)}else{if(((d!=null&&d instanceof Level)||d===null)&&((c!=null&&c instanceof Level)||c===null)){return a.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(d,c)}else{if(((typeof d==="number")||d===null)&&((typeof c==="number")||c===null)){return a.compare$float$float(d,c)}else{if(((typeof d==="boolean")||d===null)&&((typeof c==="boolean")||c===null)){return a.compare$boolean$boolean(d,c)}else{throw new Error("invalid overload")}}}}};a.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level=function(d,c){if(d===c){return 0}else{if(d==null){return -1}else{if(c==null){return 1}else{return(d.getElevation()-c.getElevation())}}}};a.getComparableModelSize=function(g){if(g!=null&&g instanceof HomeFurnitureGroup){var f=null;var h=g.getFurniture();for(var e=0;e<h.length;e++){var c=h[e];var d=a.getComparableModelSize(c);if(d!=null&&(f==null||f<d)){f=d}}return f}else{return g.modelSize}};a.prototype.addPropertyChangeListener=function(c){this.propertyChangeSupport.addPropertyChangeListener(c)};a.prototype.removePropertyChangeListener=function(c){this.propertyChangeSupport.removePropertyChangeListener(c)};a.prototype.getCatalogId=function(){return this.catalogId};a.prototype.getName=function(){return this.name};a.prototype.setName=function(c){if(c!==this.name&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.name))){var d=this.name;this.name=c;this.propertyChangeSupport.firePropertyChange("NAME",d,c)}};a.prototype.isNameVisible=function(){return this.nameVisible};a.prototype.setNameVisible=function(c){if(c!==this.nameVisible){this.nameVisible=c;this.propertyChangeSupport.firePropertyChange("NAME_VISIBLE",!c,c)}};a.prototype.getNameXOffset=function(){return this.nameXOffset};a.prototype.setNameXOffset=function(c){if(c!==this.nameXOffset){var d=this.nameXOffset;this.nameXOffset=c;this.propertyChangeSupport.firePropertyChange("NAME_X_OFFSET",d,c)}};a.prototype.getNameYOffset=function(){return this.nameYOffset};a.prototype.setNameYOffset=function(c){if(c!==this.nameYOffset){var d=this.nameYOffset;this.nameYOffset=c;this.propertyChangeSupport.firePropertyChange("NAME_Y_OFFSET",d,c)}};a.prototype.getNameStyle=function(){return this.nameStyle};a.prototype.setNameStyle=function(d){if(d!==this.nameStyle){var c=this.nameStyle;this.nameStyle=d;this.propertyChangeSupport.firePropertyChange("NAME_STYLE",c,d)}};a.prototype.getNameAngle=function(){return this.nameAngle};a.prototype.setNameAngle=function(c){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.nameAngle){var d=this.nameAngle;this.nameAngle=c;this.propertyChangeSupport.firePropertyChange("NAME_ANGLE",d,c)}};a.prototype.getDescription=function(){return this.description};a.prototype.setDescription=function(c){if(c!==this.description&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.description))){var d=this.description;this.description=c;this.propertyChangeSupport.firePropertyChange("DESCRIPTION",d,c)}};a.prototype.getInformation=function(){return this.information};a.prototype.getDepth=function(){return this.depth};a.prototype.setDepth=function(d){if(this.isResizable()){if(d!==this.depth){var c=this.depth;this.depth=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("DEPTH",c,d)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getDepthInPlan=function(){return this.depthInPlan};a.prototype.setDepthInPlan=function(c){if(c!==this.depthInPlan){var d=this.depthInPlan;this.depthInPlan=c;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("DEPTH_IN_PLAN",d,c)}};a.prototype.getHeight=function(){return this.height};a.prototype.setHeight=function(c){if(this.isResizable()){if(c!==this.height){var d=this.height;this.height=c;this.propertyChangeSupport.firePropertyChange("HEIGHT",d,c)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getHeightInPlan=function(){return this.heightInPlan};a.prototype.setHeightInPlan=function(c){if(c!==this.heightInPlan){var d=this.heightInPlan;this.heightInPlan=c;this.propertyChangeSupport.firePropertyChange("HEIGHT_IN_PLAN",d,c)}};a.prototype.getWidth=function(){return this.width};a.prototype.setWidth=function(d){if(this.isResizable()){if(d!==this.width){var c=this.width;this.width=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("WIDTH",c,d)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getWidthInPlan=function(){return this.widthInPlan};a.prototype.setWidthInPlan=function(d){if(d!==this.widthInPlan){var c=this.widthInPlan;this.widthInPlan=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("WIDTH_IN_PLAN",c,d)}};a.prototype.scale=function(c){this.setWidth(this.getWidth()*c);this.setDepth(this.getDepth()*c);this.setHeight(this.getHeight()*c)};a.prototype.getElevation=function(){return this.elevation};a.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation};a.prototype.getGroundElevation=function(){if(this.level!=null){return this.elevation+this.level.getElevation()}else{return this.elevation}};a.prototype.setElevation=function(d){if(d!==this.elevation){var c=this.elevation;this.elevation=d;this.propertyChangeSupport.firePropertyChange("ELEVATION",c,d)}};a.prototype.isMovable=function(){return this.movable};a.prototype.setMovable=function(c){if(c!==this.movable){this.movable=c;this.propertyChangeSupport.firePropertyChange("MOVABLE",!c,c)}};a.prototype.isDoorOrWindow=function(){return this.doorOrWindow};a.prototype.getIcon=function(){return this.icon};a.prototype.getPlanIcon=function(){return this.planIcon};a.prototype.getModel=function(){return this.model};a.prototype.setModelSize=function(c){this.modelSize=c};a.prototype.getModelSize=function(){return this.modelSize};a.prototype.setModelMaterials=function(d){if(this.isTexturable()){if(!(function(f,e){if(f==null&&e==null){return true}if(f==null||e==null){return false}if(f.length!=e.length){return false}for(var g=0;g<f.length;g++){if(f[g]!=e[g]){return false}}return true})(d,this.modelMaterials)){var c=this.modelMaterials;this.modelMaterials=d!=null?d.slice(0):null;this.propertyChangeSupport.firePropertyChange("MODEL_MATERIALS",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getModelMaterials=function(){if(this.modelMaterials!=null){return this.modelMaterials.slice(0)}else{return null}};a.prototype.getColor=function(){return this.color};a.prototype.setColor=function(c){if(this.isTexturable()){if(c!==this.color&&(c==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(c,this.color))){var d=this.color;this.color=c;this.propertyChangeSupport.firePropertyChange("COLOR",d,c)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getTexture=function(){return this.texture};a.prototype.setTexture=function(d){if(this.isTexturable()){if(d!==this.texture&&(d==null||!d.equals(this.texture))){var c=this.texture;this.texture=d;this.propertyChangeSupport.firePropertyChange("TEXTURE",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.getShininess=function(){return this.shininess};a.prototype.setShininess=function(d){if(this.isTexturable()){if(d!==this.shininess&&(d==null||!(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})(d,this.shininess))){var c=this.shininess;this.shininess=d;this.propertyChangeSupport.firePropertyChange("SHININESS",c,d)}}else{throw new IllegalStateException("Piece isn't texturable")}};a.prototype.isResizable=function(){return this.resizable};a.prototype.isDeformable=function(){return this.deformable};a.prototype.isWidthDepthDeformable=function(){return this.isDeformable()};a.prototype.isTexturable=function(){return this.texturable};a.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable};a.prototype.getPrice=function(){return this.price};a.prototype.setPrice=function(d){if(d!==this.price&&(d==null||!d.eq(this.price))){var c=this.price;this.price=d;this.propertyChangeSupport.firePropertyChange("PRICE",c,d)}};a.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage};a.prototype.getValueAddedTax=function(){if(this.price!=null&&this.valueAddedTaxPercentage!=null){return this.price.times(this.valueAddedTaxPercentage).round(2)}else{return null}};a.prototype.getPriceValueAddedTaxIncluded=function(){if(this.price!=null&&this.valueAddedTaxPercentage!=null){return this.price.plus(this.getValueAddedTax())}else{return this.price}};a.prototype.getCurrency=function(){return this.currency};a.prototype.isVisible=function(){return this.visible};a.prototype.setVisible=function(c){if(c!==this.visible){this.visible=c;this.propertyChangeSupport.firePropertyChange("VISIBLE",!c,c)}};a.prototype.getX=function(){return this.x};a.prototype.setX=function(c){if(c!==this.x){var d=this.x;this.x=c;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("X",d,c)}};a.prototype.getY=function(){return this.y};a.prototype.setY=function(d){if(d!==this.y){var c=this.y;this.y=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("Y",c,d)}};a.prototype.getAngle=function(){return this.angle};a.prototype.setAngle=function(d){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.angle){var c=this.angle;this.angle=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("ANGLE",c,d)}};a.prototype.getPitch=function(){return this.pitch};a.prototype.setPitch=function(d){if(this.isHorizontallyRotatable()){d=((d%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(d!==this.pitch){var c=this.pitch;this.pitch=d;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("PITCH",c,d)}}else{throw new IllegalStateException("Piece can't be rotated around an horizontal axis")}};a.prototype.getRoll=function(){return this.roll};a.prototype.setRoll=function(c){if(this.isHorizontallyRotatable()){c=((c%a.TWICE_PI_$LI$()+a.TWICE_PI_$LI$())%a.TWICE_PI_$LI$());if(c!==this.roll){var d=this.roll;this.roll=c;this.shapeCache=null;this.propertyChangeSupport.firePropertyChange("ROLL",d,c)}}else{throw new IllegalStateException("Piece can't be rotated around an horizontal axis")}};a.prototype.isHorizontallyRotated=function(){return this.roll!==0||this.pitch!==0};a.prototype.isModelMirrored=function(){return this.modelMirrored};a.prototype.setModelMirrored=function(c){if(this.isResizable()){if(c!==this.modelMirrored){this.modelMirrored=c;this.propertyChangeSupport.firePropertyChange("MODEL_MIRRORED",!c,c)}}else{throw new IllegalStateException("Piece isn't resizable")}};a.prototype.getModelRotation=function(){return[[this.modelRotation[0][0],this.modelRotation[0][1],this.modelRotation[0][2]],[this.modelRotation[1][0],this.modelRotation[1][1],this.modelRotation[1][2]],[this.modelRotation[2][0],this.modelRotation[2][1],this.modelRotation[2][2]]]};a.prototype.setModelCenteredAtOrigin=function(c){this.modelCenteredAtOrigin=c};a.prototype.isModelCenteredAtOrigin=function(){return this.modelCenteredAtOrigin};a.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape};a.prototype.getCreator=function(){return this.creator};a.prototype.isBackFaceShown=function(){return this.backFaceShown};a.prototype.getLevel=function(){return this.level};a.prototype.setLevel=function(d){if(d!==this.level){var c=this.level;this.level=d;this.propertyChangeSupport.firePropertyChange("LEVEL",c,d)}};a.prototype.isAtLevel=function(e){if(this.level===e){return true}else{if(this.level!=null&&e!=null){var c=this.level.getElevation();var d=e.getElevation();return c===d&&this.level.getElevationIndex()<e.getElevationIndex()||c<d&&this.isTopAtLevel(e)}else{return false}}};a.prototype.isTopAtLevel=function(d){var c=this.level.getElevation()+this.elevation+this.heightInPlan;if(this.staircaseCutOutShape!=null){return c>=d.getElevation()}else{return c>d.getElevation()}};a.prototype.getPoints=function(c){if(c===undefined){return this.getPoints$()}else{throw new Error("invalid overload")}};a.prototype.getPoints$=function(){var c=(function(g){var f=function(j){if(j.length==0){return 0}else{var k=[];for(var h=0;h<j[0];h++){k.push(f(j.slice(1)))}return k}};return f(g)})([4,2]);var e=this.getShape().getPathIterator(null);for(var d=0;d<c.length;d++){e.currentSegment(c[d]);e.next()}return c};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,f,e,d){if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.containsPoint$float$float$float(c,f,e)}else{throw new Error("invalid overload")}};a.prototype.containsPoint$float$float$float=function(c,e,d){if(d===0){return this.getShape().contains(c,e)}else{return this.getShape().intersects(c-d,e-d,2*d,2*d)}};a.prototype.isPointAt=function(d,h,g){var f=this.getPoints();for(var e=0;e<f.length;e++){var c=f[e];if(Math.abs(d-c[0])<=g&&Math.abs(h-c[1])<=g){return true}}return false};a.prototype.isTopLeftPointAt=function(d,g,f){var e=this.getPoints();var c=java.awt.geom.Point2D.distanceSq(d,g,e[0][0],e[0][1]);return c<=f*f&&c<java.awt.geom.Point2D.distanceSq(d,g,e[1][0],e[1][1])&&c<java.awt.geom.Point2D.distanceSq(d,g,e[3][0],e[3][1])};a.prototype.isTopRightPointAt=function(c,g,f){var d=this.getPoints();var e=java.awt.geom.Point2D.distanceSq(c,g,d[1][0],d[1][1]);return e<=f*f&&e<java.awt.geom.Point2D.distanceSq(c,g,d[0][0],d[0][1])&&e<java.awt.geom.Point2D.distanceSq(c,g,d[2][0],d[2][1])};a.prototype.isBottomLeftPointAt=function(c,g,f){var e=this.getPoints();var d=java.awt.geom.Point2D.distanceSq(c,g,e[3][0],e[3][1]);return d<=f*f&&d<java.awt.geom.Point2D.distanceSq(c,g,e[0][0],e[0][1])&&d<java.awt.geom.Point2D.distanceSq(c,g,e[2][0],e[2][1])};a.prototype.isBottomRightPointAt=function(c,g,f){var d=this.getPoints();var e=java.awt.geom.Point2D.distanceSq(c,g,d[2][0],d[2][1]);return e<=f*f&&e<java.awt.geom.Point2D.distanceSq(c,g,d[1][0],d[1][1])&&e<java.awt.geom.Point2D.distanceSq(c,g,d[3][0],d[3][1])};a.prototype.isNameCenterPointAt=function(c,e,d){return Math.abs(c-this.getX()-this.getNameXOffset())<=d&&Math.abs(e-this.getY()-this.getNameYOffset())<=d};a.prototype.isParallelToWall=function(d){if(d.getArcExtent()==null){var c=d.getYEnd()-d.getYStart();var e=d.getXEnd()-d.getXStart();if(e===0&&c===0){return false}else{var h=Math.atan2(c,e);var f=Math.abs(h-this.getAngle())%Math.PI;return f<=a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()||(Math.PI-f)<=a.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()}}else{var g=Math.PI/2+Math.atan2(d.getYArcCircleCenter()-this.getY(),d.getXArcCircleCenter()-this.getX());var f=Math.abs(g-this.getAngle())%Math.PI;return f<=a.ROUND_WALL_ANGLE_MARGIN_$LI$()||(Math.PI-f)<=a.ROUND_WALL_ANGLE_MARGIN_$LI$()}};a.prototype.getShape=function(){if(this.shapeCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidthInPlan()/2,this.getY()-this.getDepthInPlan()/2,this.getWidthInPlan(),this.getDepthInPlan());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getAngle(),this.getX(),this.getY());var f=c.getPathIterator(d);var e=new java.awt.geom.GeneralPath();e.append(f,false);this.shapeCache=e}return this.shapeCache};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var f=Object.create(g);for(var e in g){if(g.hasOwnProperty(e)){f[e]=g[e]}}return f}})(this);c.propertyChangeSupport=new PropertyChangeSupport(c);c.level=null;return c};a.getFurnitureComparator=function(c){return((function(d,e){if(d.entries==null){d.entries=[]}for(var f=0;f<d.entries.length;f++){if(d.entries[f].key.equals!=null&&d.entries[f].key.equals(e)||d.entries[f].key===e){return d.entries[f].value}}return null})(a.SORTABLE_PROPERTY_COMPARATORS_$LI$(),c))};return a}(HomeObject));HomePieceOfFurniture.__static_initialized=false;HomePieceOfFurniture.__class="com.eteks.sweethome3d.model.HomePieceOfFurniture";HomePieceOfFurniture.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];(function(m){var l=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.catalogId===x.catalogId){return 0}else{if(y.catalogId==null){return -1}else{if(x.catalogId==null){return 1}else{return this.collator.compare(y.catalogId,x.catalogId)}}}};return w}());m.HomePieceOfFurniture$0=l;l.__interfaces=["java.util.Comparator"];var k=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.name===x.name){return 0}else{if(y.name==null){return -1}else{if(x.name==null){return 1}else{return this.collator.compare(y.name,x.name)}}}};return w}());m.HomePieceOfFurniture$1=k;k.__interfaces=["java.util.Comparator"];var j=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.width,x.width)};return w}());m.HomePieceOfFurniture$2=j;j.__interfaces=["java.util.Comparator"];var i=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.height,x.height)};return w}());m.HomePieceOfFurniture$3=i;i.__interfaces=["java.util.Comparator"];var h=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.depth,x.depth)};return w}());m.HomePieceOfFurniture$4=h;h.__interfaces=["java.util.Comparator"];var g=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$boolean$boolean(y.movable,x.movable)};return w}());m.HomePieceOfFurniture$5=g;g.__interfaces=["java.util.Comparator"];var f=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$boolean$boolean(y.doorOrWindow,x.doorOrWindow)};return w}());m.HomePieceOfFurniture$6=f;f.__interfaces=["java.util.Comparator"];var e=(function(){function w(){}w.prototype.compare=function(y,x){if(y.color===x.color){return 0}else{if(y.color==null){return -1}else{if(x.color==null){return 1}else{return y.color-x.color}}}};return w}());m.HomePieceOfFurniture$7=e;e.__interfaces=["java.util.Comparator"];var c=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.texture===x.texture){return 0}else{if(y.texture==null){return -1}else{if(x.texture==null){return 1}else{return this.collator.compare(y.texture.getName(),x.texture.getName())}}}};return w}());m.HomePieceOfFurniture$8=c;c.__interfaces=["java.util.Comparator"];var a=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$boolean$boolean(y.visible,x.visible)};return w}());m.HomePieceOfFurniture$9=a;a.__interfaces=["java.util.Comparator"];var d=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.x,x.x)};return w}());m.HomePieceOfFurniture$10=d;d.__interfaces=["java.util.Comparator"];var b=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.y,x.y)};return w}());m.HomePieceOfFurniture$11=b;b.__interfaces=["java.util.Comparator"];var v=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.elevation,x.elevation)};return w}());m.HomePieceOfFurniture$12=v;v.__interfaces=["java.util.Comparator"];var u=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$float$float(y.angle,x.angle)};return w}());m.HomePieceOfFurniture$13=u;u.__interfaces=["java.util.Comparator"];var t=(function(){function w(){}w.prototype.compare=function(A,z){var y=m.getComparableModelSize(A);var x=m.getComparableModelSize(z);if(y===x){return 0}else{if(y==null){return -1}else{if(x==null){return 1}else{return y<x?-1:(y===x?0:1)}}}};return w}());m.HomePieceOfFurniture$14=t;t.__interfaces=["java.util.Comparator"];var s=(function(){function w(x){this.collator=x}w.prototype.compare=function(y,x){if(y.creator===x.creator){return 0}else{if(y.creator==null){return -1}else{if(x.creator==null){return 1}else{return this.collator.compare(y.creator,x.creator)}}}};return w}());m.HomePieceOfFurniture$15=s;s.__interfaces=["java.util.Comparator"];var r=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(y.getLevel(),x.getLevel())};return w}());m.HomePieceOfFurniture$16=r;r.__interfaces=["java.util.Comparator"];var q=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.price,x.price)};return w}());m.HomePieceOfFurniture$17=q;q.__interfaces=["java.util.Comparator"];var p=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.valueAddedTaxPercentage,x.valueAddedTaxPercentage)};return w}());m.HomePieceOfFurniture$18=p;p.__interfaces=["java.util.Comparator"];var o=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.getValueAddedTax(),x.getValueAddedTax())};return w}());m.HomePieceOfFurniture$19=o;o.__interfaces=["java.util.Comparator"];var n=(function(){function w(){}w.prototype.compare=function(y,x){return m.compare$java_math_BigDecimal$java_math_BigDecimal(y.getPriceValueAddedTaxIncluded(),x.getPriceValueAddedTaxIncluded())};return w}());m.HomePieceOfFurniture$20=n;n.__interfaces=["java.util.Comparator"]})(HomePieceOfFurniture||(HomePieceOfFurniture={}));var ObserverCamera=(function(b){__extends(a,b);function a(c,i,g,e,d,f){var h=b.call(this,c,i,g,e,d,f)||this;h.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport=new PropertyChangeSupport(h);h.fixedSize=false;h.shapeCache=null;h.rectangleShapeCache=null;return h}a.prototype.addPropertyChangeListener=function(c){this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.addPropertyChangeListener(c);b.prototype.addPropertyChangeListener.call(this,c)};a.prototype.removePropertyChangeListener=function(c){this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.removePropertyChangeListener(c);b.prototype.removePropertyChangeListener.call(this,c)};a.prototype.setFixedSize=function(e){if(this.fixedSize!==e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();this.fixedSize=e;this.shapeCache=null;this.rectangleShapeCache=null;this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.firePropertyChange("WIDTH",c,this.getWidth());this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.firePropertyChange("DEPTH",d,this.getDepth());this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.firePropertyChange("HEIGHT",f,this.getHeight())}};a.prototype.isFixedSize=function(){return this.fixedSize};a.prototype.setYaw=function(c){b.prototype.setYaw.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setX=function(c){b.prototype.setX.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setY=function(c){b.prototype.setY.call(this,c);this.shapeCache=null;this.rectangleShapeCache=null};a.prototype.setZ=function(e){var c=this.getWidth();var d=this.getDepth();var f=this.getHeight();b.prototype.setZ.call(this,e);this.shapeCache=null;this.rectangleShapeCache=null;this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.firePropertyChange("WIDTH",c,this.getWidth());this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.firePropertyChange("DEPTH",d,this.getDepth());this.__com_eteks_sweethome3d_model_ObserverCamera_propertyChangeSupport.firePropertyChange("HEIGHT",f,this.getHeight())};a.prototype.getWidth=function(){if(this.fixedSize){return 46.6}else{var c=this.getZ()*4/14;return Math.min(Math.max(c,20),62.5)}};a.prototype.getDepth=function(){if(this.fixedSize){return 18.6}else{var c=this.getZ()*8/70;return Math.min(Math.max(c,8),25)}};a.prototype.getHeight=function(){if(this.fixedSize){return 175}else{return this.getZ()*15/14}};a.prototype.getPoints=function(c){if(c===undefined){return this.getPoints$()}else{throw new Error("invalid overload")}};a.prototype.getPoints$=function(){var e=(function(g){var f=function(j){if(j.length==0){return 0}else{var k=[];for(var h=0;h<j[0];h++){k.push(f(j.slice(1)))}return k}};return f(g)})([4,2]);var d=this.getRectangleShape().getPathIterator(null);for(var c=0;c<e.length;c++){d.currentSegment(e[c]);d.next()}return e};a.prototype.intersectsRectangle=function(e,g,c,f){var d=new java.awt.geom.Rectangle2D.Float(e,g,0,0);d.add(c,f);return this.getShape().intersects(d)};a.prototype.containsPoint=function(c,f,e,d){if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.containsPoint$float$float$float(c,f,e)}else{throw new Error("invalid overload")}};a.prototype.containsPoint$float$float$float=function(c,e,d){if(d===0){return this.getShape().contains(c,e)}else{return this.getShape().intersects(c-d,e-d,2*d,2*d)}};a.prototype.getShape=function(){if(this.shapeCache==null){var c=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY());var f=c.getPathIterator(d);var e=new java.awt.geom.GeneralPath();e.append(f,false);this.shapeCache=e}return this.shapeCache};a.prototype.getRectangleShape=function(){if(this.rectangleShapeCache==null){var c=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth());var d=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY());var e=c.getPathIterator(d);var f=new java.awt.geom.GeneralPath();f.append(e,false);this.rectangleShapeCache=f}return this.rectangleShapeCache};a.prototype.move=function(d,c){this.setX(this.getX()+d);this.setY(this.getY()+c)};a.prototype.clone=function(){var c=this;return(function(e){if(b.prototype.clone!=undefined){return b.prototype.clone.call(c)}else{var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f}})(this)};return a}(Camera));ObserverCamera.__class="com.eteks.sweethome3d.model.ObserverCamera";ObserverCamera.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","java.io.Serializable"];var Home=(function(){function a(l,d){var i=this;if(((l!=null&&(l instanceof Array))||l===null)&&((typeof d==="number")||d===null)){var j=Array.prototype.slice.call(arguments);this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;(function(){i.furniture=(l.slice(0));i.walls=([]);i.wallHeight=d;i.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);i.init(true);i.addModelListeners()})()}else{if(((l!=null&&(l instanceof Array))||l===null)&&d===undefined){var j=Array.prototype.slice.call(arguments);var f=Array.prototype.slice.call(arguments);var o=250;this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;(function(){i.furniture=(l.slice(0));i.walls=([]);i.wallHeight=o;i.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);i.init(true);i.addModelListeners()})()}else{if(((l!=null&&l instanceof a)||l===null)&&d===undefined){var j=Array.prototype.slice.call(arguments);var k=j[0];this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;(function(){i.wallHeight=k.getWallHeight();a.copyHomeData(k,i);a.initListenersSupport(i);i.addModelListeners()})()}else{if(((typeof l==="number")||l===null)&&d===undefined){var j=Array.prototype.slice.call(arguments);var n=j[0];var c=Array.prototype.slice.call(arguments);var h=[];this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;(function(){i.furniture=(h.slice(0));i.walls=([]);i.wallHeight=n;i.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);i.init(true);i.addModelListeners()})()}else{if(l===undefined&&d===undefined){var j=Array.prototype.slice.call(arguments);var e=Array.prototype.slice.call(arguments);var m=250;var b=Array.prototype.slice.call(arguments);var g=[];this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;this.furniture=null;this.furnitureChangeSupport=null;this.selectedItems=null;this.selectionListeners=null;this.allLevelsSelection=false;this.levels=null;this.selectedLevel=null;this.levelsChangeSupport=null;this.walls=null;this.wallsChangeSupport=null;this.rooms=null;this.roomsChangeSupport=null;this.polylines=null;this.polylinesChangeSupport=null;this.dimensionLines=null;this.dimensionLinesChangeSupport=null;this.labels=null;this.labelsChangeSupport=null;this.camera=null;this.name=null;this.wallHeight=0;this.modified=false;this.recovered=false;this.repaired=false;this.backgroundImage=null;this.observerCamera=null;this.topCamera=null;this.storedCameras=null;this.environment=null;this.print=null;this.furnitureSortedPropertyName=null;this.furnitureVisiblePropertyNames=null;this.furnitureDescendingSorted=false;this.visualProperties=null;this.properties=null;this.propertyChangeSupport=null;this.version=0;this.basePlanLocked=false;this.compass=null;this.skyColor=0;this.groundColor=0;this.groundTexture=null;this.lightColor=0;this.wallsAlpha=0;this.furnitureSortedProperty=null;this.furnitureVisibleProperties=null;this.furnitureWithDoorsAndWindows=null;this.furnitureWithGroups=null;(function(){i.furniture=(g.slice(0));i.walls=([]);i.wallHeight=m;i.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0);i.init(true);i.addModelListeners()})()}else{throw new Error("invalid overload")}}}}}}a.LEVEL_ELEVATION_COMPARATOR_$LI$=function(){if(a.LEVEL_ELEVATION_COMPARATOR==null){a.LEVEL_ELEVATION_COMPARATOR=function(d,c){var b=(d.getElevation()-c.getElevation());if(b!==0){return b}else{return d.getElevationIndex()-c.getElevationIndex()}}}return a.LEVEL_ELEVATION_COMPARATOR};a.prototype.moveVisualProperty=function(b){if(this.visualProperties.hasOwnProperty(b)){var c=(function(d,e){return d[e]?d[e]:null})(this.visualProperties,b);(this.properties[b]=c!=null?new String(c).toString():null);delete this.visualProperties[b]}};a.prototype.init=function(b){this.selectedItems=([]);a.initListenersSupport(this);if(this.furnitureVisibleProperties==null){this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","COLOR","MOVABLE","DOOR_OR_WINDOW","VISIBLE"].slice(0)}this.topCamera=new Camera(50,1050,1010,Math.PI,Math.PI/4,Math.PI*63/180);this.observerCamera=new ObserverCamera(50,50,170,7*Math.PI/4,Math.PI/16,Math.PI*63/180);this.storedCameras=[];this.environment=new HomeEnvironment();this.rooms=([]);this.polylines=([]);this.dimensionLines=([]);this.labels=([]);this.compass=new Compass(-100,50,100);this.levels=([]);this.compass.setVisible(b);this.visualProperties=({});this.properties=({});this.version=a.CURRENT_VERSION};a.initListenersSupport=function(b){b.furnitureChangeSupport=(new CollectionChangeSupport(b));b.selectionListeners=([]);b.levelsChangeSupport=(new CollectionChangeSupport(b));b.wallsChangeSupport=(new CollectionChangeSupport(b));b.roomsChangeSupport=(new CollectionChangeSupport(b));b.polylinesChangeSupport=(new CollectionChangeSupport(b));b.dimensionLinesChangeSupport=(new CollectionChangeSupport(b));b.labelsChangeSupport=(new CollectionChangeSupport(b));b.propertyChangeSupport=new PropertyChangeSupport(b)};a.prototype.addModelListeners=function(){var b=new a.Home$0(this);for(var d=0;d<this.levels.length;d++){var c=this.levels[d];c.addPropertyChangeListener(b)}this.addLevelsListener(function(e){switch((e.getType())){case CollectionEvent.Type.ADD:e.getItem().addPropertyChangeListener(b);break;case CollectionEvent.Type.DELETE:e.getItem().removePropertyChangeListener(b);break}})};a.prototype.isFurnitureSortedPropertyBackwardCompatible=function(b){switch((b)){case"NAME":case"WIDTH":case"DEPTH":case"HEIGHT":case"MOVABLE":case"DOOR_OR_WINDOW":case"COLOR":case"VISIBLE":case"X":case"Y":case"ELEVATION":case"ANGLE":return true;default:return false}};a.prototype.getGroupFurniture=function(d){var c=([]);var b=d.getFurniture();for(var f=0;f<b.length;f++){var e=b[f];if(e!=null&&e instanceof HomeFurnitureGroup){(function(h,g){return h.push.apply(h,g)})(c,this.getGroupFurniture(e))}else{(c.push(e)>0)}}return c};a.prototype.addLevelsListener=function(b){this.levelsChangeSupport.addCollectionListener((b))};a.prototype.removeLevelsListener=function(b){this.levelsChangeSupport.removeCollectionListener((b))};a.prototype.getLevels=function(){return this.levels.slice(0)};a.prototype.addLevel=function(g){if(g.getElevationIndex()<0){var c=0;for(var e=0;e<this.levels.length;e++){var b=this.levels[e];if(b.getElevation()===g.getElevation()){c=b.getElevationIndex()+1}else{if(b.getElevation()>g.getElevation()){break}}}g.setElevationIndex(c)}this.levels=(this.levels.slice(0));var d=(function(h,q,m){var k=m;if(typeof m!="function"){k=function(r,l){return m.compare(r,l)}}var n=0;var i=h.length-1;while(n<=i){var p=(n+i)>>>1;var j=h[p];var o=k(j,q);if(o<0){n=p+1}else{if(o>0){i=p-1}else{return p}}}return -(n+1)})(this.levels,g,a.LEVEL_ELEVATION_COMPARATOR_$LI$());var f;if(d>=0){f=d}else{f=-(d+1)}this.levels.splice(f,0,g);this.levelsChangeSupport.fireCollectionChanged(g,f,CollectionEvent.Type.ADD)};a.prototype.deleteLevel=function(c){var j=this.levels.indexOf(c);if(j!==-1){for(var i=0;i<this.furniture.length;i++){var o=this.furniture[i];if(o.getLevel()===c){this.deletePieceOfFurniture(o)}}for(var h=0;h<this.rooms.length;h++){var b=this.rooms[h];if(b.getLevel()===c){this.deleteRoom(b)}}for(var g=0;g<this.walls.length;g++){var m=this.walls[g];if(m.getLevel()===c){this.deleteWall(m)}}for(var e=0;e<this.polylines.length;e++){var l=this.polylines[e];if(l.getLevel()===c){this.deletePolyline(l)}}for(var f=0;f<this.dimensionLines.length;f++){var n=this.dimensionLines[f];if(n.getLevel()===c){this.deleteDimensionLine(n)}}for(var d=0;d<this.labels.length;d++){var k=this.labels[d];if(k.getLevel()===c){this.deleteLabel(k)}}if(this.selectedLevel===c){if(this.levels.length===1){this.setSelectedLevel(null);this.setAllLevelsSelection(false)}else{this.setSelectedLevel(this.levels[j>=1?j-1:j+1])}}this.levels=(this.levels.slice(0));this.levels.splice(j,1);this.levelsChangeSupport.fireCollectionChanged(c,j,CollectionEvent.Type.DELETE)}};a.prototype.getSelectedLevel=function(){return this.selectedLevel};a.prototype.setSelectedLevel=function(c){if(c!==this.selectedLevel){var b=this.selectedLevel;this.selectedLevel=c;this.propertyChangeSupport.firePropertyChange("SELECTED_LEVEL",b,c)}};a.prototype.isAllLevelsSelection=function(){return this.allLevelsSelection};a.prototype.setAllLevelsSelection=function(b){if(b!==this.allLevelsSelection){this.allLevelsSelection=b;this.propertyChangeSupport.firePropertyChange("ALL_LEVELS_SELECTION",!b,b)}};a.prototype.addFurnitureListener=function(b){this.furnitureChangeSupport.addCollectionListener((b))};a.prototype.removeFurnitureListener=function(b){this.furnitureChangeSupport.removeCollectionListener((b))};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture=function(b){this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(b,this.furniture.length)};a.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int=function(c,b){this.furniture=(this.furniture.slice(0));c.setLevel(this.selectedLevel);this.furniture.splice(b,0,c);this.furnitureChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.ADD)};a.prototype.addPieceOfFurniture=function(c,b){if(((c!=null&&c instanceof HomePieceOfFurniture)||c===null)&&((typeof b==="number")||b===null)){return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(c,b)}else{if(((c!=null&&c instanceof HomePieceOfFurniture)||c===null)&&b===undefined){return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(c)}else{throw new Error("invalid overload")}}};a.prototype.addPieceOfFurnitureToGroup=function(c,d,b){c.setLevel(this.selectedLevel);d.addPieceOfFurniture(c,b);this.furnitureChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.ADD)};a.prototype.deletePieceOfFurniture=function(c){this.deselectItem(c);var b=this.furniture.indexOf(c);var d=b===-1?this.getPieceOfFurnitureGroup(c,null,this.furniture):null;if(b!==-1||d!=null){c.setLevel(null);this.furniture=(this.furniture.slice(0));if(d!=null){d.deletePieceOfFurniture(c);this.furnitureChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.DELETE)}else{this.furniture.splice(b,1);this.furnitureChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.DELETE)}}};a.prototype.getPieceOfFurnitureGroup=function(d,c,f){for(var b=0;b<f.length;b++){var e=f[b];if((function(i,h){if(i&&i.equals){return i.equals(h)}else{return i===h}})(e,d)){return c}else{if(e!=null&&e instanceof HomeFurnitureGroup){var g=this.getPieceOfFurnitureGroup(d,e,e.getFurniture());if(g!=null){return g}}}}return null};a.prototype.addSelectionListener=function(b){(this.selectionListeners.push(b)>0)};a.prototype.removeSelectionListener=function(b){(function(c){return c.splice(c.indexOf(b),1)})(this.selectionListeners)};a.prototype.getSelectedItems=function(){return this.selectedItems.slice(0)};a.prototype.setSelectedItems=function(f){this.selectedItems=(f.slice(0));if(!(this.selectionListeners.length==0)){var c=new SelectionEvent(this,this.getSelectedItems());var d=this.selectionListeners.slice(0);for(var b=0;b<d.length;b++){var e=d[b];e.selectionChanged(c)}}};a.prototype.deselectItem=function(c){var b=this.selectedItems.indexOf(c);if(b!==-1){var d=(this.getSelectedItems().slice(0));d.splice(b,1);this.setSelectedItems(d)}};a.prototype.addRoomsListener=function(b){this.roomsChangeSupport.addCollectionListener((b))};a.prototype.removeRoomsListener=function(b){this.roomsChangeSupport.removeCollectionListener((b))};a.prototype.getRooms=function(){return this.rooms.slice(0)};a.prototype.addRoom$com_eteks_sweethome3d_model_Room=function(b){this.addRoom$com_eteks_sweethome3d_model_Room$int(b,this.rooms.length)};a.prototype.addRoom$com_eteks_sweethome3d_model_Room$int=function(c,b){this.rooms=(this.rooms.slice(0));this.rooms.splice(b,0,c);c.setLevel(this.selectedLevel);this.roomsChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.ADD)};a.prototype.addRoom=function(c,b){if(((c!=null&&c instanceof Room)||c===null)&&((typeof b==="number")||b===null)){return this.addRoom$com_eteks_sweethome3d_model_Room$int(c,b)}else{if(((c!=null&&c instanceof Room)||c===null)&&b===undefined){return this.addRoom$com_eteks_sweethome3d_model_Room(c)}else{throw new Error("invalid overload")}}};a.prototype.deleteRoom=function(c){this.deselectItem(c);var b=this.rooms.indexOf(c);if(b!==-1){c.setLevel(null);this.rooms=(this.rooms.slice(0));this.rooms.splice(b,1);this.roomsChangeSupport.fireCollectionChanged(c,b,CollectionEvent.Type.DELETE)}};a.prototype.addWallsListener=function(b){this.wallsChangeSupport.addCollectionListener((b))};a.prototype.removeWallsListener=function(b){this.wallsChangeSupport.removeCollectionListener((b))};a.prototype.getWalls=function(){return this.walls.slice(0)};a.prototype.addWall=function(b){this.walls=(this.walls.slice(0));(this.walls.push(b)>0);b.setLevel(this.selectedLevel);this.wallsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteWall=function(b){this.deselectItem(b);var d=this.getWalls();for(var f=0;f<d.length;f++){var e=d[f];if((function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})(b,e.getWallAtStart())){e.setWallAtStart(null)}else{if((function(h,g){if(h&&h.equals){return h.equals(g)}else{return h===g}})(b,e.getWallAtEnd())){e.setWallAtEnd(null)}}}var c=this.walls.indexOf(b);if(c!==-1){b.setLevel(null);this.walls=(this.walls.slice(0));this.walls.splice(c,1);this.wallsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addPolylinesListener=function(b){this.polylinesChangeSupport.addCollectionListener((b))};a.prototype.removePolylinesListener=function(b){this.polylinesChangeSupport.removeCollectionListener((b))};a.prototype.getPolylines=function(){return this.polylines.slice(0)};a.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline=function(b){this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(b,this.polylines.length)};a.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline$int=function(b,c){this.polylines=(this.polylines.slice(0));this.polylines.splice(c,0,b);b.setLevel(this.selectedLevel);this.polylinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.addPolyline=function(b,c){if(((b!=null&&b instanceof Polyline)||b===null)&&((typeof c==="number")||c===null)){return this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(b,c)}else{if(((b!=null&&b instanceof Polyline)||b===null)&&c===undefined){return this.addPolyline$com_eteks_sweethome3d_model_Polyline(b)}else{throw new Error("invalid overload")}}};a.prototype.deletePolyline=function(b){this.deselectItem(b);var c=this.polylines.indexOf(b);if(c!==-1){b.setLevel(null);this.polylines=(this.polylines.slice(0));this.polylines.splice(c,1);this.polylinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addDimensionLinesListener=function(b){this.dimensionLinesChangeSupport.addCollectionListener((b))};a.prototype.removeDimensionLinesListener=function(b){this.dimensionLinesChangeSupport.removeCollectionListener((b))};a.prototype.getDimensionLines=function(){return this.dimensionLines.slice(0)};a.prototype.addDimensionLine=function(b){this.dimensionLines=(this.dimensionLines.slice(0));(this.dimensionLines.push(b)>0);b.setLevel(this.selectedLevel);this.dimensionLinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteDimensionLine=function(b){this.deselectItem(b);var c=this.dimensionLines.indexOf(b);if(c!==-1){b.setLevel(null);this.dimensionLines=(this.dimensionLines.slice(0));this.dimensionLines.splice(c,1);this.dimensionLinesChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.DELETE)}};a.prototype.addLabelsListener=function(b){this.labelsChangeSupport.addCollectionListener((b))};a.prototype.removeLabelsListener=function(b){this.labelsChangeSupport.removeCollectionListener((b))};a.prototype.getLabels=function(){return this.labels.slice(0)};a.prototype.addLabel=function(b){this.labels=(this.labels.slice(0));(this.labels.push(b)>0);b.setLevel(this.selectedLevel);this.labelsChangeSupport.fireCollectionChanged(b,CollectionEvent.Type.ADD)};a.prototype.deleteLabel=function(c){this.deselectItem(c);var b=this.labels.indexOf(c);if(b!==-1){c.setLevel(null);this.labels=(this.labels.slice(0));this.labels.splice(b,1);this.labelsChangeSupport.fireCollectionChanged(c,CollectionEvent.Type.DELETE)}};a.prototype.getSelectableViewableItems=function(){var c=([]);this.addViewableItems(this.walls,c);this.addViewableItems(this.rooms,c);this.addViewableItems(this.dimensionLines,c);this.addViewableItems(this.polylines,c);this.addViewableItems(this.labels,c);var b=this.getFurniture();for(var e=0;e<b.length;e++){var d=b[e];if(d.isVisible()&&(d.getLevel()==null||d.getLevel().isViewable())){(c.push(d)>0)}}if(this.getCompass().isVisible()){(c.push(this.getCompass())>0)}return c};a.prototype.addViewableItems=function(b,f){for(var d=0;d<b.length;d++){var c=b[d];if(c!=null&&(c.__interfaces!=null&&c.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0||c.constructor!=null&&c.constructor.__interfaces!=null&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0)){var e=c;if(e.getLevel()==null||e.getLevel().isViewable()){(f.push(c)>0)}}}};a.prototype.isEmpty=function(){return(this.furniture.length==0)&&(this.walls.length==0)&&(this.rooms.length==0)&&(this.dimensionLines.length==0)&&(this.polylines.length==0)&&(this.labels.length==0)};a.prototype.addPropertyChangeListener=function(c,b){this.propertyChangeSupport.addPropertyChangeListener(c,b)};a.prototype.removePropertyChangeListener=function(c,b){this.propertyChangeSupport.removePropertyChangeListener(c,b)};a.prototype.getWallHeight=function(){return this.wallHeight};a.prototype.getName=function(){return this.name};a.prototype.setName=function(b){if(b!==this.name&&(b==null||!(function(e,d){if(e&&e.equals){return e.equals(d)}else{return e===d}})(b,this.name))){var c=this.name;this.name=b;this.propertyChangeSupport.firePropertyChange("NAME",c,b)}};a.prototype.isModified=function(){return this.modified};a.prototype.setModified=function(b){if(b!==this.modified){this.modified=b;this.propertyChangeSupport.firePropertyChange("MODIFIED",!b,b)}};a.prototype.isRecovered=function(){return this.recovered};a.prototype.setRecovered=function(b){if(b!==this.recovered){this.recovered=b;this.propertyChangeSupport.firePropertyChange("RECOVERED",!b,b)}};a.prototype.isRepaired=function(){return this.repaired};a.prototype.setRepaired=function(b){if(b!==this.repaired){this.repaired=b;this.propertyChangeSupport.firePropertyChange("REPAIRED",!b,b)}};a.prototype.getFurnitureSortedProperty=function(){return this.furnitureSortedProperty};a.prototype.setFurnitureSortedProperty=function(b){if(b!==this.furnitureSortedProperty&&(b==null||!(b==this.furnitureSortedProperty))){var c=this.furnitureSortedProperty;this.furnitureSortedProperty=b;this.propertyChangeSupport.firePropertyChange("FURNITURE_SORTED_PROPERTY",c,b)}};a.prototype.isFurnitureDescendingSorted=function(){return this.furnitureDescendingSorted};a.prototype.setFurnitureDescendingSorted=function(b){if(b!==this.furnitureDescendingSorted){this.furnitureDescendingSorted=b;this.propertyChangeSupport.firePropertyChange("FURNITURE_DESCENDING_SORTED",!b,b)}};a.prototype.getFurnitureVisibleProperties=function(){if(this.furnitureVisibleProperties==null){return[]}else{return this.furnitureVisibleProperties.slice(0)}};a.prototype.setFurnitureVisibleProperties=function(c){if(c!==this.furnitureVisibleProperties&&(c==null||!(function(e,d){if(e==null&&d==null){return true}if(e==null||d==null){return false}if(e.length!=d.length){return false}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return false}}return true})(c,this.furnitureVisibleProperties))){var b=this.furnitureVisibleProperties;this.furnitureVisibleProperties=(c.slice(0));this.propertyChangeSupport.firePropertyChange("FURNITURE_VISIBLE_PROPERTIES",b.slice(0),c.slice(0))}};a.prototype.getBackgroundImage=function(){return this.backgroundImage};a.prototype.setBackgroundImage=function(c){if(c!==this.backgroundImage){var b=this.backgroundImage;this.backgroundImage=c;this.propertyChangeSupport.firePropertyChange("BACKGROUND_IMAGE",b,c)}};a.prototype.getTopCamera=function(){return this.topCamera};a.prototype.getObserverCamera=function(){return this.observerCamera};a.prototype.setCamera=function(c){if(c!==this.camera){var b=this.camera;this.camera=c;this.propertyChangeSupport.firePropertyChange("CAMERA",b,c)}};a.prototype.getCamera=function(){if(this.camera==null){this.camera=this.getTopCamera()}return this.camera};a.prototype.setStoredCameras=function(c){if(!(function(e,d){if(e==null&&d==null){return true}if(e==null||d==null){return false}if(e.length!=d.length){return false}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return false}}return true})(this.storedCameras,c)){var b=this.storedCameras;if(c==null){this.storedCameras=[]}else{this.storedCameras=(c.slice(0))}this.propertyChangeSupport.firePropertyChange("STORED_CAMERAS",b.slice(0),c.slice(0))}};a.prototype.getStoredCameras=function(){return this.storedCameras.slice(0)};a.prototype.getEnvironment=function(){return this.environment};a.prototype.getCompass=function(){return this.compass};a.prototype.getPrint=function(){return this.print};a.prototype.setPrint=function(b){if(b!==this.print){var c=this.print;this.print=b;this.propertyChangeSupport.firePropertyChange("PRINT",c,b)}this.print=b};a.prototype.getProperty=function(b){return(function(c,d){return c[d]?c[d]:null})(this.properties,b)};a.prototype.getNumericProperty=function(b){var e=(function(f,g){return f[g]?f[g]:null})(this.properties,b);if(e!=null){try{return new Number(e).valueOf()}catch(c){try{return new Number(e).valueOf()}catch(d){}}}return null};a.prototype.setProperty=function(b,c){if(c==null){if(this.properties.hasOwnProperty(b)){delete this.properties[b]}}else{(this.properties[b]=c)}};a.prototype.getPropertyNames=function(){return Object.keys(this.properties)};a.prototype.isBasePlanLocked=function(){return this.basePlanLocked};a.prototype.setBasePlanLocked=function(b){if(b!==this.basePlanLocked){this.basePlanLocked=b;this.propertyChangeSupport.firePropertyChange("BASE_PLAN_LOCKED",!b,b)}};a.prototype.getVersion=function(){return this.version};a.prototype.setVersion=function(b){this.version=b};a.prototype.clone=function(){try{var c=(function(e){var f=Object.create(e);for(var d in e){if(e.hasOwnProperty(d)){f[d]=e[d]}}return f})(this);a.copyHomeData(this,c);a.initListenersSupport(c);c.addModelListeners();return c}catch(b){throw new IllegalStateException("Super class isn't cloneable")}};a.copyHomeData=function(b,j){j.allLevelsSelection=b.allLevelsSelection;j.name=b.name;j.modified=b.modified;j.recovered=b.recovered;j.repaired=b.repaired;j.backgroundImage=b.backgroundImage;j.print=b.print;j.furnitureDescendingSorted=b.furnitureDescendingSorted;j.version=b.version;j.basePlanLocked=b.basePlanLocked;j.skyColor=b.skyColor;j.groundColor=b.groundColor;j.lightColor=b.lightColor;j.wallsAlpha=b.wallsAlpha;j.furnitureSortedProperty=b.furnitureSortedProperty;j.selectedItems=([]);j.furniture=a.cloneSelectableItems(b.furniture,b.selectedItems,j.selectedItems);for(var d=0;d<b.furniture.length;d++){var q=b.furniture[d];if((q!=null&&q instanceof HomeDoorOrWindow)&&q.isBoundToWall()){j.furniture[d].setBoundToWall(true)}}j.rooms=a.cloneSelectableItems(b.rooms,b.selectedItems,j.selectedItems);j.dimensionLines=a.cloneSelectableItems(b.dimensionLines,b.selectedItems,j.selectedItems);j.polylines=a.cloneSelectableItems(b.polylines,b.selectedItems,j.selectedItems);j.labels=a.cloneSelectableItems(b.labels,b.selectedItems,j.selectedItems);j.walls=Wall.clone(b.walls);for(var d=0;d<b.walls.length;d++){var l=b.walls[d];if((b.selectedItems.indexOf((l))>=0)){(j.selectedItems.push(j.walls[d])>0)}}j.levels=([]);if(b.levels.length>0){for(var n=0;n<b.levels.length;n++){var c=b.levels[n];(j.levels.push((function(r){if(r.clone!=undefined){return r.clone()}else{var s=Object.create(r);for(var i in r){if(r.hasOwnProperty(i)){s[i]=r[i]}}return s}})(c))>0)}for(var d=0;d<b.furniture.length;d++){var m=b.furniture[d].getLevel();if(m!=null){j.furniture[d].setLevel(j.levels[b.levels.indexOf(m)])}}for(var d=0;d<b.rooms.length;d++){var p=b.rooms[d].getLevel();if(p!=null){j.rooms[d].setLevel(j.levels[b.levels.indexOf(p)])}}for(var d=0;d<b.dimensionLines.length;d++){var o=b.dimensionLines[d].getLevel();if(o!=null){j.dimensionLines[d].setLevel(j.levels[b.levels.indexOf(o)])}}for(var d=0;d<b.polylines.length;d++){var k=b.polylines[d].getLevel();if(k!=null){j.polylines[d].setLevel(j.levels[b.levels.indexOf(k)])}}for(var d=0;d<b.labels.length;d++){var h=b.labels[d].getLevel();if(h!=null){j.labels[d].setLevel(j.levels[b.levels.indexOf(h)])}}for(var d=0;d<b.walls.length;d++){var g=b.walls[d].getLevel();if(g!=null){j.walls[d].setLevel(j.levels[b.levels.indexOf(g)])}}if(b.selectedLevel!=null){j.selectedLevel=j.levels[b.levels.indexOf(b.selectedLevel)]}}j.observerCamera=(function(r){if(r.clone!=undefined){return r.clone()}else{var s=Object.create(r);for(var i in r){if(r.hasOwnProperty(i)){s[i]=r[i]}}return s}})(b.observerCamera);j.topCamera=(function(r){if(r.clone!=undefined){return r.clone()}else{var s=Object.create(r);for(var i in r){if(r.hasOwnProperty(i)){s[i]=r[i]}}return s}})(b.topCamera);if(b.camera===b.observerCamera){j.camera=j.observerCamera;if((b.selectedItems.indexOf((b.observerCamera))>=0)){(j.selectedItems.push(j.observerCamera)>0)}}else{j.camera=j.topCamera}j.storedCameras=([]);for(var f=0;f<b.storedCameras.length;f++){var e=b.storedCameras[f];(j.storedCameras.push((function(r){if(r.clone!=undefined){return r.clone()}else{var s=Object.create(r);for(var i in r){if(r.hasOwnProperty(i)){s[i]=r[i]}}return s}})(e))>0)}j.environment=(function(r){if(r.clone!=undefined){return r.clone()}else{var s=Object.create(r);for(var i in r){if(r.hasOwnProperty(i)){s[i]=r[i]}}return s}})(b.environment);j.compass=(function(r){if(r.clone!=undefined){return r.clone()}else{var s=Object.create(r);for(var i in r){if(r.hasOwnProperty(i)){s[i]=r[i]}}return s}})(b.compass);j.furnitureVisibleProperties=(b.furnitureVisibleProperties.slice(0));j.visualProperties=({});j.properties=({})};a.cloneSelectableItems=function(b,h,c){var k=([]);for(var g=0;g<b.length;g++){var l=b[g];var j=(function(q){if(q.clone!=undefined){return q.clone()}else{var n=Object.create(q);for(var i in q){if(q.hasOwnProperty(i)){n[i]=q[i]}}return n}})(l);(k.push(j)>0);if((h.indexOf((l))>=0)){(c.push(j)>0)}else{if(l!=null&&l instanceof HomeFurnitureGroup){var m=l.getAllFurniture();var d=null;for(var f=0,e=m.length;f<e;f++){var o=m[f];if((h.indexOf((o))>=0)){if(d==null){d=j.getAllFurniture()}(c.push(d[f])>0)}}}}}return k};a.duplicate=function(c){var e=([]);for(var b=0;b<c.length;b++){var d=c[b];if(!(d!=null&&d instanceof Wall)&&!(d!=null&&d instanceof Camera)&&!(d!=null&&d instanceof Compass)){(e.push((function(g){if(g.clone!=undefined){return g.clone()}else{var h=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){h[f]=g[f]}}return h}})(d))>0)}}(function(g,f){return g.push.apply(g,f)})(e,Wall.clone(a.getWallsSubList(c)));return e};a.getFurnitureSubList=function(b){return a.getSubList(b,HomePieceOfFurniture)};a.getWallsSubList=function(b){return a.getSubList(b,Wall)};a.getRoomsSubList=function(b){return a.getSubList(b,Room)};a.getPolylinesSubList=function(b){return a.getSubList(b,Polyline)};a.getDimensionLinesSubList=function(b){return a.getSubList(b,DimensionLine)};a.getLabelsSubList=function(b){return a.getSubList(b,Label)};a.getSubList=function(d,f){var c=([]);for(var b=0;b<d.length;b++){var e=d[b];if((function(h,g){if(typeof h==="string"){return(g.constructor&&g.constructor.__interfaces&&g.constructor.__interfaces.indexOf(h)>=0)||(g.__interfaces&&g.__interfaces.indexOf(h)>=0)}else{if(typeof h==="function"){return(g instanceof h)||(g.constructor&&g.constructor===h)}}})(f,e)){(c.push(e)>0)}}return c};return a}());Home.CURRENT_VERSION=5500;Home.KEEP_BACKWARD_COMPATIBLITY=true;Home.__class="com.eteks.sweethome3d.model.Home";Home.__interfaces=["java.lang.Cloneable","java.io.Serializable"];(function(a){var b=(function(){function c(d){this.__parent=d}c.prototype.propertyChange=function(d){if((function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})("ELEVATION",d.getPropertyName())||(function(f,e){if(f&&f.equals){return f.equals(e)}else{return f===e}})("ELEVATION_INDEX",d.getPropertyName())){this.__parent.levels=(this.__parent.levels.slice(0));(function(e,f){if(f.compare){e.sort(function(h,g){return f.compare(h,g)})}else{e.sort(f)}})(this.__parent.levels,a.LEVEL_ELEVATION_COMPARATOR_$LI$())}};return c}());a.Home$0=b;b.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(Home||(Home={}));var HomeDoorOrWindow=(function(b){__extends(a,b);function a(c){var d=b.call(this,c)||this;d.wallThickness=0;d.wallDistance=0;d.wallCutOutOnBothSides=false;d.widthDepthDeformable=false;d.sashes=null;d.cutOutShape=null;d.boundToWall=false;d.wallThickness=c.getWallThickness();d.wallDistance=c.getWallDistance();d.wallCutOutOnBothSides=c.isWallCutOutOnBothSides();d.widthDepthDeformable=c.isWidthDepthDeformable();d.sashes=c.getSashes();d.cutOutShape=c.getCutOutShape();return d}a.prototype.getWallThickness=function(){return this.wallThickness};a.prototype.getWallDistance=function(){return this.wallDistance};a.prototype.getSashes=function(){if(this.sashes.length===0){return this.sashes}else{return this.sashes.slice(0)}};a.prototype.getCutOutShape=function(){return this.cutOutShape};a.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides};a.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable};a.prototype.isBoundToWall=function(){return this.boundToWall};a.prototype.setBoundToWall=function(c){this.boundToWall=c};a.prototype.setX=function(c){if(this.getX()!==c){this.boundToWall=false}b.prototype.setX.call(this,c)};a.prototype.setY=function(c){if(this.getY()!==c){this.boundToWall=false}b.prototype.setY.call(this,c)};a.prototype.setAngle=function(c){if(this.getAngle()!==c){this.boundToWall=false}b.prototype.setAngle.call(this,c)};a.prototype.setDepth=function(c){if(this.getDepth()!==c){this.boundToWall=false}b.prototype.setDepth.call(this,c)};a.prototype.isDoorOrWindow=function(){return true};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.boundToWall=false;return c};return a}(HomePieceOfFurniture));HomeDoorOrWindow.__class="com.eteks.sweethome3d.model.HomeDoorOrWindow";HomeDoorOrWindow.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];var HomeFurnitureGroup=(function(b){__extends(a,b);function a(m,g,d,c){var j=this;if(((m!=null&&(m instanceof Array))||m===null)&&((typeof g==="number")||g===null)&&((typeof d==="boolean")||d===null)&&((typeof c==="string")||c===null)){var k=Array.prototype.slice.call(arguments);j=b.call(this,m[0])||this;j.furniture=null;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false;j.fixedWidth=0;j.fixedDepth=0;j.fixedHeight=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null;j.furnitureListener=null;j.furniture=null;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false;j.fixedWidth=0;j.fixedDepth=0;j.fixedHeight=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null;j.furnitureListener=null;(function(){j.furniture=m.slice(0);j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var t=true;var u=false;for(var v=0;v<m.length;v++){var s=m[v];t=s.isMovable()&&t;u=s.isVisible()||u}j.setName(c);j.setNameVisible(false);j.setNameXOffset(0);j.setNameYOffset(0);j.setNameStyle(null);j.setDescription(null);b.prototype.setMovable.call(j,t);b.prototype.setAngle.call(j,g);b.prototype.setModelMirrored.call(j,d);j.setVisible(u);j.updateLocationAndSize(m,g,true);j.addFurnitureListener()})()}else{if(((m!=null&&(m instanceof Array))||m===null)&&((g!=null&&g instanceof HomePieceOfFurniture)||g===null)&&((typeof d==="string")||d===null)&&c===undefined){var k=Array.prototype.slice.call(arguments);var l=k[1];var i=k[2];var r=Array.prototype.slice.call(arguments);var q=l.getAngle();var f=false;j=b.call(this,m[0])||this;j.furniture=null;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false;j.fixedWidth=0;j.fixedDepth=0;j.fixedHeight=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null;j.furnitureListener=null;j.furniture=null;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false;j.fixedWidth=0;j.fixedDepth=0;j.fixedHeight=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null;j.furnitureListener=null;(function(){j.furniture=m.slice(0);j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var t=true;var v=false;for(var u=0;u<m.length;u++){var s=m[u];t=s.isMovable()&&t;v=s.isVisible()||v}j.setName(i);j.setNameVisible(false);j.setNameXOffset(0);j.setNameYOffset(0);j.setNameStyle(null);j.setDescription(null);b.prototype.setMovable.call(j,t);b.prototype.setAngle.call(j,q);b.prototype.setModelMirrored.call(j,f);j.setVisible(v);j.updateLocationAndSize(m,q,true);j.addFurnitureListener()})()}else{if(((m!=null&&(m instanceof Array))||m===null)&&((typeof g==="string")||g===null)&&d===undefined&&c===undefined){var k=Array.prototype.slice.call(arguments);var h=k[1];var p=Array.prototype.slice.call(arguments);var l=p[0][0];var o=Array.prototype.slice.call(arguments);var n=l.getAngle();var e=false;j=b.call(this,m[0])||this;j.furniture=null;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false;j.fixedWidth=0;j.fixedDepth=0;j.fixedHeight=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null;j.furnitureListener=null;j.furniture=null;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=false;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=false;j.fixedWidth=0;j.fixedDepth=0;j.fixedHeight=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null;j.furnitureListener=null;(function(){j.furniture=m.slice(0);j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;j.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;var u=true;var v=false;for(var t=0;t<m.length;t++){var s=m[t];u=s.isMovable()&&u;v=s.isVisible()||v}j.setName(h);j.setNameVisible(false);j.setNameXOffset(0);j.setNameYOffset(0);j.setNameStyle(null);j.setDescription(null);b.prototype.setMovable.call(j,u);b.prototype.setAngle.call(j,n);b.prototype.setModelMirrored.call(j,e);j.setVisible(v);j.updateLocationAndSize(m,n,true);j.addFurnitureListener()})()}else{throw new Error("invalid overload")}}}return j}a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY_$LI$=function(){if(a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY==null){a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY=[[1,0,0],[0,1,0],[0,0,1]]}return a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY};a.prototype.updateLocationAndSize=function(m,w,v){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=true;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=m[0].getCurrency();for(var l=0;l<m.length;l++){var g=m[l];this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=g.isResizable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=g.isDeformable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=g.isTexturable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=g.isDoorOrWindow()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow;if(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency!=null){if(g.getCurrency()==null||!(function(B,i){if(B&&B.equals){return B.equals(i)}else{return B===i}})(g.getCurrency(),this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency)){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null}}}var p=Number.MAX_VALUE;if(v){var y=null;for(var k=0;k<m.length;k++){var g=m[k];var e=g.getLevel();if(e!=null&&(y==null||e.getElevation()<y.getElevation())){y=e}}for(var h=0;h<m.length;h++){var g=m[h];if(g.getLevel()!=null){p=Math.min(p,g.getGroundElevation()-y.getElevation());g.setElevation(g.getGroundElevation()-y.getElevation());g.setLevel(null)}else{p=Math.min(p,g.getElevation())}}}else{for(var d=0;d<m.length;d++){var g=m[d];p=Math.min(p,g.getElevation())}}var n=0;var s=-1;for(var c=0;c<m.length;c++){var g=m[c];n=Math.max(n,g.getElevation()+g.getHeightInPlan());if(g.getDropOnTopElevation()>=0){s=Math.max(s,g.getElevation()+g.getHeightInPlan()*g.getDropOnTopElevation())}}n-=p;s-=p;var q=java.awt.geom.AffineTransform.getRotateInstance(-w);var j=null;var r=this.getFurnitureWithoutGroups(m);for(var A=0;A<r.length;A++){var g=r[A];var f=new java.awt.geom.GeneralPath();var u=g.getPoints();f.moveTo(u[0][0],u[0][1]);for(var t=1;t<u.length;t++){f.lineTo(u[t][0],u[t][1])}f.closePath();if(j==null){j=f.createTransformedShape(q).getBounds2D()}else{j.add(f.createTransformedShape(q).getBounds2D())}}var x=new java.awt.geom.Point2D.Float(j.getCenterX(),j.getCenterY());q.setToRotation(w);q.transform(x,x);if(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){var o=j.getWidth();b.prototype.setWidth.call(this,o);b.prototype.setWidthInPlan.call(this,o);var z=j.getHeight();b.prototype.setDepth.call(this,z);b.prototype.setDepthInPlan.call(this,z);b.prototype.setHeight.call(this,n);b.prototype.setHeightInPlan.call(this,n)}else{this.fixedWidth=j.getWidth();this.fixedDepth=j.getHeight();this.fixedHeight=n}this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=s/n;b.prototype.setX.call(this,x.getX());b.prototype.setY.call(this,x.getY());b.prototype.setElevation.call(this,p)};a.prototype.addFurnitureListener=function(){this.furnitureListener=new a.LocationAndSizeChangeListener(this);for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.addPropertyChangeListener(this.furnitureListener)}};a.prototype.getFurnitureWithoutGroups=function(f){var e=([]);for(var c=0;c<f.length;c++){var d=f[c];if(d!=null&&d instanceof a){(function(h,g){return h.push.apply(h,g)})(e,this.getFurnitureWithoutGroups(d.getFurniture()))}else{(e.push(d)>0)}}return e};a.prototype.getAllFurniture=function(){var e=(this.furniture.slice(0));var c=this.getFurniture();for(var f=0;f<c.length;f++){var d=c[f];if(d!=null&&d instanceof a){(function(h,g){return h.push.apply(h,g)})(e,d.getAllFurniture())}}return e};a.prototype.getFurniture=function(){return this.furniture.slice(0)};a.prototype.addPieceOfFurniture=function(d,c){this.furniture=(this.furniture.slice(0));d.setLevel(this.getLevel());this.furniture.splice(c,0,d);d.addPropertyChangeListener(this.furnitureListener);this.updateLocationAndSize(this.furniture,this.getAngle(),false)};a.prototype.deletePieceOfFurniture=function(d){var c=this.furniture.indexOf(d);if(c!==-1){if(this.furniture.length>1){d.setLevel(null);d.removePropertyChangeListener(this.furnitureListener);this.furniture=(this.furniture.slice(0));this.furniture.splice(c,1);this.updateLocationAndSize(this.furniture,this.getAngle(),false)}else{throw new IllegalStateException("Group can't be empty")}}};a.prototype.getCatalogId=function(){return null};a.prototype.getInformation=function(){return null};a.prototype.isMovable=function(){return b.prototype.isMovable.call(this)};a.prototype.setMovable=function(c){b.prototype.setMovable.call(this,c)};a.prototype.isDoorOrWindow=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow};a.prototype.isResizable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable};a.prototype.isDeformable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable};a.prototype.isTexturable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable};a.prototype.isHorizontallyRotatable=function(){return false};a.prototype.getWidth=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedWidth}else{return b.prototype.getWidth.call(this)}};a.prototype.getWidthInPlan=function(){return this.getWidth()};a.prototype.getDepth=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedDepth}else{return b.prototype.getDepth.call(this)}};a.prototype.getDepthInPlan=function(){return this.getDepth()};a.prototype.getHeight=function(){if(!this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){return this.fixedHeight}else{return b.prototype.getHeight.call(this)}};a.prototype.getHeightInPlan=function(){return this.getHeight()};a.prototype.isHorizontallyRotated=function(){if(b.prototype.isHorizontallyRotated.call(this)){return true}else{var d=this.getFurniture();for(var e=0;e<d.length;e++){var c=d[e];if(c.isHorizontallyRotated()){return true}}return false}};a.prototype.getDropOnTopElevation=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation};a.prototype.getIcon=function(){return null};a.prototype.getPlanIcon=function(){return null};a.prototype.getModel=function(){return null};a.prototype.setModelSize=function(c){throw new IllegalStateException("Can't set model size of a group")};a.prototype.getModelSize=function(){return null};a.prototype.getModelRotation=function(){return a.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY_$LI$()};a.prototype.isModelCenteredAtOrigin=function(){return true};a.prototype.getPitch=function(){return 0};a.prototype.getRoll=function(){return 0};a.prototype.getStaircaseCutOutShape=function(){return null};a.prototype.getCreator=function(){return null};a.prototype.getPrice=function(){var d=null;for(var e=0;e<this.furniture.length;e++){var c=this.furniture[e];if(c.getPrice()!=null){if(d==null){d=c.getPrice()}else{d=d.plus(c.getPrice())}}}if(d==null){return b.prototype.getPrice.call(this)}else{return d}};a.prototype.setPrice=function(e){for(var d=0;d<this.furniture.length;d++){var c=this.furniture[d];if(c.getPrice()!=null){throw new UnsupportedOperationException("Can't change the price of a group containing pieces with a price")}}b.prototype.setPrice.call(this,e)};a.prototype.getValueAddedTaxPercentage=function(){var d=this.furniture[0].getValueAddedTaxPercentage();if(d!=null){for(var f=0;f<this.furniture.length;f++){var e=this.furniture[f];var c=e.getValueAddedTaxPercentage();if(c==null||!c.eq(d)){return null}}}return d};a.prototype.getCurrency=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency};a.prototype.getValueAddedTax=function(){var c=null;for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];var f=e.getValueAddedTax();if(f!=null){if(c==null){c=f}else{c=c.plus(f)}}}return c};a.prototype.getPriceValueAddedTaxIncluded=function(){var c=null;for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];if(e.getPrice()!=null){if(c==null){c=e.getPriceValueAddedTaxIncluded()}else{c=c.plus(e.getPriceValueAddedTaxIncluded())}}}return c};a.prototype.isBackFaceShown=function(){return false};a.prototype.getColor=function(){return null};a.prototype.setColor=function(d){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.setColor(d)}}};a.prototype.getTexture=function(){return null};a.prototype.setTexture=function(e){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setTexture(e)}}};a.prototype.getModelMaterials=function(){return null};a.prototype.setModelMaterials=function(d){if(this.isTexturable()){for(var c=0;c<this.furniture.length;c++){var e=this.furniture[c];e.setModelMaterials(d)}}};a.prototype.getShininess=function(){return null};a.prototype.setShininess=function(c){if(this.isTexturable()){for(var e=0;e<this.furniture.length;e++){var d=this.furniture[e];d.setShininess(c)}}};a.prototype.setAngle=function(j){if(j!==this.getAngle()){var c=j-this.getAngle();var e=Math.cos(c);var f=Math.sin(c);for(var i=0;i<this.furniture.length;i++){var d=this.furniture[i];d.removePropertyChangeListener(this.furnitureListener);d.setAngle(d.getAngle()+c);var h=this.getX()+((d.getX()-this.getX())*e-(d.getY()-this.getY())*f);var g=this.getY()+((d.getX()-this.getX())*f+(d.getY()-this.getY())*e);d.setX(h);d.setY(g);d.addPropertyChangeListener(this.furnitureListener)}b.prototype.setAngle.call(this,j)}};a.prototype.setX=function(c){if(c!==this.getX()){var d=c-this.getX();for(var f=0;f<this.furniture.length;f++){var e=this.furniture[f];e.removePropertyChangeListener(this.furnitureListener);e.setX(e.getX()+d);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setX.call(this,c)}};a.prototype.setY=function(f){if(f!==this.getY()){var c=f-this.getY();for(var e=0;e<this.furniture.length;e++){var d=this.furniture[e];d.addPropertyChangeListener(this.furnitureListener);d.setY(d.getY()+c);d.removePropertyChangeListener(this.furnitureListener)}b.prototype.setY.call(this,f)}};a.prototype.setWidth=function(d){if(d!==this.getWidth()){var j=d/this.getWidth();var h=this.getAngle();for(var i=0;i<this.furniture.length;i++){var n=this.furniture[i];n.removePropertyChangeListener(this.furnitureListener);var g=n.getAngle()-h;var l=n.getWidth();var e=n.getDepth();n.setWidth(l+l*(j-1)*Math.abs(Math.cos(g)));n.setDepth(e+e*(j-1)*Math.abs(Math.sin(g)));var k=Math.cos(h);var f=Math.sin(h);var c=this.getX()+((n.getX()-this.getX())*k+(n.getY()-this.getY())*f);var m=this.getY()+((n.getX()-this.getX())*-f+(n.getY()-this.getY())*k);c=this.getX()+(c-this.getX())*j;n.setX(this.getX()+((c-this.getX())*k-(m-this.getY())*f));n.setY(this.getY()+((c-this.getX())*f+(m-this.getY())*k));n.addPropertyChangeListener(this.furnitureListener)}b.prototype.setWidth.call(this,d)}};a.prototype.setDepth=function(i){if(i!==this.getDepth()){var d=i/this.getDepth();var h=this.getAngle();for(var j=0;j<this.furniture.length;j++){var n=this.furniture[j];n.removePropertyChangeListener(this.furnitureListener);var g=n.getAngle()-h;var l=n.getWidth();var e=n.getDepth();n.setWidth(l+l*(d-1)*Math.abs(Math.sin(g)));n.setDepth(e+e*(d-1)*Math.abs(Math.cos(g)));var k=Math.cos(h);var f=Math.sin(h);var c=this.getX()+((n.getX()-this.getX())*k+(n.getY()-this.getY())*f);var m=this.getY()+((n.getX()-this.getX())*-f+(n.getY()-this.getY())*k);m=this.getY()+(m-this.getY())*d;n.setX(this.getX()+((c-this.getX())*k-(m-this.getY())*f));n.setY(this.getY()+((c-this.getX())*f+(m-this.getY())*k));n.addPropertyChangeListener(this.furnitureListener)}b.prototype.setDepth.call(this,i)}};a.prototype.setHeight=function(c){if(c!==this.getHeight()){var d=c/this.getHeight();for(var f=0;f<this.furniture.length;f++){var e=this.furniture[f];e.removePropertyChangeListener(this.furnitureListener);e.setHeight(e.getHeight()*d);e.setElevation(this.getElevation()+(e.getElevation()-this.getElevation())*d);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setHeight.call(this,c)}};a.prototype.scale=function(j){var i=this.getAngle();for(var d=0;d<this.furniture.length;d++){var e=this.furniture[d];e.removePropertyChangeListener(this.furnitureListener);e.setWidth(e.getWidth()*j);e.setDepth(e.getDepth()*j);e.setHeight(e.getHeight()*j);var c=Math.cos(i);var f=Math.sin(i);var h=this.getX()+((e.getX()-this.getX())*c+(e.getY()-this.getY())*f);var g=this.getY()+((e.getX()-this.getX())*-f+(e.getY()-this.getY())*c);h=this.getX()+(h-this.getX())*j;g=this.getY()+(g-this.getY())*j;e.setX(this.getX()+((h-this.getX())*c-(g-this.getY())*f));e.setY(this.getY()+((h-this.getX())*f+(g-this.getY())*c));e.setElevation(this.getElevation()+(e.getElevation()-this.getElevation())*j);e.addPropertyChangeListener(this.furnitureListener)}b.prototype.setWidth.call(this,this.getWidth()*j);b.prototype.setDepth.call(this,this.getDepth()*j);b.prototype.setHeight.call(this,this.getHeight()*j)};a.prototype.setElevation=function(e){if(e!==this.getElevation()){var f=e-this.getElevation();for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.removePropertyChangeListener(this.furnitureListener);d.setElevation(d.getElevation()+f);d.addPropertyChangeListener(this.furnitureListener)}b.prototype.setElevation.call(this,e)}};a.prototype.setModelMirrored=function(c){if(c!==this.isModelMirrored()){var j=this.getAngle();for(var e=0;e<this.furniture.length;e++){var f=this.furniture[e];f.removePropertyChangeListener(this.furnitureListener);f.setModelMirrored(!f.isModelMirrored());var d=Math.cos(j);var g=Math.sin(j);var i=this.getX()+((f.getX()-this.getX())*d+(f.getY()-this.getY())*g);var h=this.getY()+((f.getX()-this.getX())*-g+(f.getY()-this.getY())*d);i=this.getX()-(i-this.getX());f.setX(this.getX()+((i-this.getX())*d-(h-this.getY())*g));f.setY(this.getY()+((i-this.getX())*g+(h-this.getY())*d));f.addPropertyChangeListener(this.furnitureListener)}b.prototype.setModelMirrored.call(this,c)}};a.prototype.setVisible=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setVisible(e)}b.prototype.setVisible.call(this,e)};a.prototype.setLevel=function(e){for(var c=0;c<this.furniture.length;c++){var d=this.furniture[c];d.setLevel(e)}b.prototype.setLevel.call(this,e)};a.prototype.intersectsRectangle=function(e,h,d,g){for(var c=0;c<this.furniture.length;c++){var f=this.furniture[c];if(f.intersectsRectangle(e,h,d,g)){return true}}return false};a.prototype.containsPoint=function(c,f,e,d){if(((typeof c==="number")||c===null)&&((typeof f==="number")||f===null)&&((typeof e==="number")||e===null)&&d===undefined){return this.containsPoint$float$float$float(c,f,e)}else{throw new Error("invalid overload")}};a.prototype.containsPoint$float$float$float=function(c,g,e){for(var f=0;f<this.furniture.length;f++){var d=this.furniture[f];if(d.containsPoint$float$float$float(c,g,e)){return true}}return false};a.prototype.clone=function(){var g=this;var f=(function(j){if(b.prototype.clone!=undefined){return b.prototype.clone.call(g)}else{var h=Object.create(j);for(var i in j){if(j.hasOwnProperty(i)){h[i]=j[i]}}return h}})(this);f.furniture=([]);for(var e=0;e<this.furniture.length;e++){var d=this.furniture[e];var c=(function(j){if(j.clone!=undefined){return j.clone()}else{var h=Object.create(j);for(var i in j){if(j.hasOwnProperty(i)){h[i]=j[i]}}return h}})(d);(f.furniture.push(c)>0);if((d!=null&&d instanceof HomeDoorOrWindow)&&d.isBoundToWall()){c.setBoundToWall(true)}}f.furniture=f.furniture.slice(0);f.addFurnitureListener();return f};return a}(HomePieceOfFurniture));HomeFurnitureGroup.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup";HomeFurnitureGroup.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","java.io.Serializable"];(function(a){var b=(function(){function c(d){this.group=null;this.group=(d)}c.prototype.propertyChange=function(d){var e=this.group;if(e==null){d.getSource().removePropertyChangeListener(this)}else{if((function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("X",d.getPropertyName())||(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("Y",d.getPropertyName())||(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("ELEVATION",d.getPropertyName())||(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("ANGLE",d.getPropertyName())||(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("WIDTH_IN_PLAN",d.getPropertyName())||(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("DEPTH_IN_PLAN",d.getPropertyName())||(function(g,f){if(g&&g.equals){return g.equals(f)}else{return g===f}})("HEIGHT_IN_PLAN",d.getPropertyName())){e.updateLocationAndSize(e.getFurniture(),e.getAngle(),false)}}};return c}());a.LocationAndSizeChangeListener=b;b.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup.LocationAndSizeChangeListener";b.__interfaces=["java.util.EventListener","java.beans.PropertyChangeListener"]})(HomeFurnitureGroup||(HomeFurnitureGroup={}));var HomeLight=(function(b){__extends(a,b);function a(c){var d=b.call(this,c)||this;d.__com_eteks_sweethome3d_model_HomeLight_propertyChangeSupport=new PropertyChangeSupport(d);d.lightSources=null;d.power=0;d.lightSources=c.getLightSources();d.power=0.5;return d}a.prototype.addPropertyChangeListener=function(c){this.__com_eteks_sweethome3d_model_HomeLight_propertyChangeSupport.addPropertyChangeListener(c);b.prototype.addPropertyChangeListener.call(this,c)};a.prototype.removePropertyChangeListener=function(c){this.__com_eteks_sweethome3d_model_HomeLight_propertyChangeSupport.removePropertyChangeListener(c);b.prototype.removePropertyChangeListener.call(this,c)};a.prototype.getLightSources=function(){if(this.lightSources.length===0){return this.lightSources}else{return this.lightSources.slice(0)}};a.prototype.getPower=function(){return this.power};a.prototype.setPower=function(d){if(d!==this.power){var c=this.power;this.power=d;this.__com_eteks_sweethome3d_model_HomeLight_propertyChangeSupport.firePropertyChange("POWER",c,d)}};a.prototype.clone=function(){var d=this;var c=(function(g){if(b.prototype.clone!=undefined){return b.prototype.clone.call(d)}else{var e=Object.create(g);for(var f in g){if(g.hasOwnProperty(f)){e[f]=g[f]}}return e}})(this);c.__com_eteks_sweethome3d_model_HomeLight_propertyChangeSupport=new PropertyChangeSupport(c);return c};return a}(HomePieceOfFurniture));HomeLight.__class="com.eteks.sweethome3d.model.HomeLight";HomeLight.__interfaces=["java.lang.Cloneable","com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","com.eteks.sweethome3d.model.Light","java.io.Serializable"];HomeFurnitureGroup.__com_eteks_sweethome3d_model_HomeFurnitureGroup_IDENTITY_$LI$();Home.LEVEL_ELEVATION_COMPARATOR_$LI$();HomePieceOfFurniture.IDENTITY_$LI$();HomePieceOfFurniture.SORTABLE_PROPERTY_COMPARATORS_$LI$();HomePieceOfFurniture.ROUND_WALL_ANGLE_MARGIN_$LI$();HomePieceOfFurniture.STRAIGHT_WALL_ANGLE_MARGIN_$LI$();HomePieceOfFurniture.TWICE_PI_$LI$();HomePieceOfFurniture.__static_initialize();Room.TWICE_PI_$LI$();Label.TWICE_PI_$LI$();TexturesCategory.COMPARATOR_$LI$();TextStyle.textStylesCache_$LI$();FurnitureCategory.COMPARATOR_$LI$();CatalogTexture.recentFilters_$LI$();CatalogTexture.COMPARATOR_$LI$();CatalogTexture.EMPTY_CRITERIA_$LI$();CatalogTexture.__static_initialize();CatalogPieceOfFurniture.recentFilters_$LI$();CatalogPieceOfFurniture.COMPARATOR_$LI$();CatalogPieceOfFurniture.EMPTY_CRITERIA_$LI$();CatalogPieceOfFurniture.INDENTITY_ROTATION_$LI$();CatalogPieceOfFurniture.__static_initialize();Baseboard.baseboardsCache_$LI$();function DAELoader(){ModelLoader.call(this,"dae")}DAELoader.prototype=Object.create(ModelLoader.prototype);DAELoader.prototype.constructor=DAELoader;DAELoader.prototype.parseEntryScene=function(b,c,a,d,i,g){var h=new Group3D();var j=new DAEHandler(h,c);var f=new SAXParser(j,j,j,j,j);g(ModelLoader.PARSING_MODEL,c,0);try{f.parseString(b)}catch(e){h.removeAllChildren()}if(i===null){g(ModelLoader.PARSING_MODEL,c,1);return h}else{setTimeout(function(){g(ModelLoader.PARSING_MODEL,c,1);i(h)},0)}};function DAEHandler(a,b){DefaultHandler.call(this);this.sceneRoot=a;this.daeEntryName=b;this.parentGroups=[];this.parentElements=[];this.buffer="";this.postProcessingBinders=[];this.textures={};this.effectAppearances={};this.materialEffects={};this.materialNames={};this.surface2DIds={};this.sampler2DIds={};this.geometries={};this.sources={};this.positions={};this.normals={};this.textureCoordinates={};this.floatArrays={};this.sourceAccessorStrides=[];this.appearanceGeometries={};this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.nodes={};this.instantiatedNodes={};this.visualScenes={};this.visualScene=null;this.floats=[];this.geometryVertices=[];this.geometryNormals=[];this.geometryTextureCoordinates=[];this.vcount=[];this.transparentColor=[];this.transparency=null;this.inRootAsset=false;this.reverseTransparency=false;this.imageId=null;this.materialId=null;this.effectId=null;this.newParamSid=null;this.inSurface2D=false;this.inPhongBlinnOrLambert=false;this.techniqueProfile=null;this.inConstant=false;this.geometryId=null;this.meshSourceId=null;this.verticesId=null;this.floatArrayId=null;this.geometryAppearance=null;this.geometryVertexOffset=0;this.geometryNormalOffset=0;this.geometryTextureCoordinatesOffset=0;this.axis=null;this.meterScale=1;this.floatValue=0;this.opaque=null;this.inputCount=0}DAEHandler.prototype=Object.create(DefaultHandler.prototype);DAEHandler.prototype.constructor=DAEHandler;DAEHandler.prototype.startElement=function(o,g,I,r){this.buffer="";var s=this.parentElements.length===0?null:this.parentElements[this.parentElements.length-1];if(s===null&&!"COLLADA"==I){throw new SAXException("Expected COLLADA element")}else{if("COLLADA"==I){var l=r.getValue("version");if(l.indexOf("1.4")!==0){throw new SAXException("Version "+l+" not supported")}}else{if("COLLADA"==s&&"asset"==I){this.inRootAsset=true}else{if("asset"==s&&"unit"==I){var B=r.getValue("meter");if(B!==null){this.meterScale=parseFloat(B)}}else{if("image"==I){this.imageId=r.getValue("id")}else{if("material"==I){this.materialId=r.getValue("id");this.materialNames[this.materialId]=r.getValue("name")}else{if("material"==s&&"instance_effect"==I){var t=r.getValue("url");if(t.indexOf("#")===0){var f=t.substring(1);this.materialEffects[this.materialId]=f}}else{if("effect"==I){this.effectId=r.getValue("id");this.effectAppearances[this.effectId]=new Appearance3D()}else{if(this.effectId!==null){if("profile_COMMON"==s&&"newparam"==I){this.newParamSid=r.getValue("sid")}else{if("newparam"==s&&"surface"==I&&"2D"==r.getValue("type")){this.inSurface2D=true}else{if("extra"==s&&"technique"==I){this.techniqueProfile=r.getValue("profile")}else{if("phong"==I||"blinn"==I){this.inPhongBlinnOrLambert=true}else{if("lambert"==I){this.inPhongBlinnOrLambert=true;this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(0,0,0));this.effectAppearances[this.effectId].setShininess(1)}else{if("constant"==I){this.inConstant=true}else{if(this.inConstant||this.inPhongBlinnOrLambert&&("transparent"==I)){this.opaque=r.getValue("opaque");if(this.opaque===null){this.opaque="A_ONE"}}else{if("texture"==I&&"diffuse"==s){var J=this.surface2DIds[this.sampler2DIds[r.getValue("texture")]];var u=this.effectAppearances[this.effectId];var d=this;this.postProcessingBinders.push(function(){u.imageEntryName=d.textures[J]})}}}}}}}}}else{if("geometry"==I){this.geometryId=r.getValue("id");this.geometries[this.geometryId]=[]}else{if(this.geometryId!==null){if("mesh"==s&&"source"==I){this.meshSourceId=r.getValue("id")}else{if("mesh"==s&&"vertices"==I){this.verticesId=r.getValue("id")}else{if(this.meshSourceId!==null){if("float_array"==I){this.floatArrayId=r.getValue("id")}else{if("technique_common"==s&&"accessor"==I){var b=r.getValue("source").substring(1);var z=r.getValue("stride");z=z!==null?parseInt(z):1;this.sourceAccessorStrides.push({floatArray:this.floatArrays[b],stride:z})}}}else{if(this.verticesId!==null&&"input"==I){var H=r.getValue("source").substring(1);var A=this.sources[H];if("POSITION"==r.getValue("semantic")){this.positions[this.verticesId]=new Array(A.length/3);for(var E=0,C=0;C<A.length;E++,C+=3){this.positions[this.verticesId][E]=vec3.fromValues(A[C],A[C+1],A[C+2])}}else{if("NORMAL"==r.getValue("semantic")){this.normals[this.verticesId]=new Array(A.length/3);for(var E=0,C=0;C<A.length;E++,C+=3){this.normals[this.verticesId][E]=vec3.fromValues(A[C],A[C+1],A[C+2])}}else{if("TEXCOORD"==r.getValue("semantic")){this.textureCoordinates[this.verticesId]=new Array(A.length/2);for(var E=0,C=0;C<A.length;E++,C+=2){this.textureCoordinates[this.verticesId][E]=vec2.fromValues(A[C],A[C+1])}}}}}else{if(this.verticesId===null&&"input"==I){var H=r.getValue("source").substring(1);var n=parseInt(r.getValue("offset"));if(this.inputCount<n+1){this.inputCount=n+1}if("VERTEX"==r.getValue("semantic")){this.geometryVertices=this.positions[H];this.geometryVertexOffset=n;if(this.geometryNormals===null){this.geometryNormals=this.normals[H];this.geometryNormalOffset=n}if(this.geometryTextureCoordinates===null){this.geometryTextureCoordinates=this.textureCoordinates[H];this.geometryTextureCoordinatesOffset=n}}else{if("NORMAL"==r.getValue("semantic")){var A=this.sources[H];this.geometryNormals=new Array(A.length/3);for(var E=0,C=0;C<A.length;E++,C+=3){this.geometryNormals[E]=vec3.fromValues(A[C],A[C+1],A[C+2])}this.geometryNormalOffset=n}else{if("TEXCOORD"==r.getValue("semantic")){var A=this.sources[H];this.geometryTextureCoordinates=new Array(A.length/2);for(var E=0,C=0;C<A.length;E++,C+=2){this.geometryTextureCoordinates[E]=vec2.fromValues(A[C],A[C+1])}this.geometryTextureCoordinatesOffset=n}}}}else{if("triangles"==I||"trifans"==I||"tristrips"==I||"polylist"==I||"polygons"==I||"lines"==I||"linestrips"==I){this.geometryAppearance=r.getValue("material");this.inputCount=0;this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.vcount=null}}}}}}}else{if("visual_scene"==I){var v=new TransformGroup3D();this.parentGroups.push(v);this.visualScenes[r.getValue("id")]=v}else{if("node"==I){var G=new TransformGroup3D();if(this.parentGroups.length>0){this.parentGroups[this.parentGroups.length-1].addChild(G)}this.parentGroups.push(G);this.nodes[r.getValue("id")]=G;var c=r.getValue("name");if(c!==null){G.setName(c)}}else{if("node"==s&&"instance_geometry"==I){var D=r.getValue("url");if(D.indexOf("#")===0){var p=D.substring(1);var c=r.getValue("name");var j=new Group3D();this.parentGroups[this.parentGroups.length-1].addChild(j);this.parentGroups.push(j);var d=this;this.postProcessingBinders.push(function(){var M=0;var L=d.geometries[p];for(var K=0;K<L.length;K++){var k=new Shape3D(L[K]);j.addChild(k);if(c!==null){if(M===0){k.setName(c)}else{k.setName(c+"_"+M)}M++}}})}}else{if("instance_node"==I){var h=r.getValue("url");if(h.indexOf("#")===0){var y=h.substring(1);var F=this.parentGroups[this.parentGroups.length-1];var d=this;this.postProcessingBinders.push(function(){var i=d.instantiatedNodes[y];if(i===undefined){i=new SharedGroup3D();i.addChild(d.nodes[y]);d.instantiatedNodes[y]=i}F.addChild(new Link3D(i))})}}else{if("instance_material"==I&&this.parentGroups.length>0){var m=r.getValue("target");if(m.indexOf("#")==0){var x=m.substring(1);var a=r.getValue("symbol");var q=this.parentGroups[this.parentGroups.length-1];var d=this;this.postProcessingBinders.push(function(){var i=d.effectAppearances[d.materialEffects[x]];var k=function(O,K){if(O instanceof Group3D){var M=O.getChildren();for(var L=0;L<M.length;L++){k(M[L],K)}}else{if(O instanceof Link3D){k(O.getSharedGroup(),K)}else{if(O instanceof Shape3D){var N=d.appearanceGeometries[a];if(N!==undefined){for(var L=0;L<N.length;L++){if(N[L]===O.getGeometries()[0]){O.setAppearance(K);break}}}}}}};k(q,i);i.setName(d.materialNames[x])})}}else{if("instance_visual_scene"==I){var w=r.getValue("url");if(w.indexOf("#")===0){var e=w.substring(1);var d=this;this.postProcessingBinders.push(function(){d.visualScene=d.visualScenes[e]})}}}}}}}}}}}}}}}}}}this.parentElements.push(I)};DAEHandler.prototype.characters=function(a,c,b){this.buffer+=a.substring(c,c+b)};DAEHandler.prototype.endElement=function(c,f,b){this.parentElements.pop();var l=this.parentElements.length===0?null:this.parentElements[this.parentElements.length-1];if("color"==b||"float_array"==b||"matrix"==b||"rotate"==b||"scale"==b||"translate"==b){var g=this.getCharacters().split(/\s/);this.floats=new Array(g.length);var d=0;for(var h=0;h<g.length;h++){if(g[h].length>0){var j=parseFloat(g[h]);if(isNaN(j)){j=0}this.floats[d++]=j}}if(d!==g.length){this.floats.splice(d,this.floats.length-d)}if(this.floatArrayId!==null){this.floatArrays[this.floatArrayId]=this.floats;this.floatArrayId=null}}else{if("float"==b){this.floatValue=parseFloat(this.getCharacters())}}if(this.inRootAsset){this.handleRootAssetElementsEnd(b)}else{if("image"==b){this.imageId=null}else{if(this.imageId!==null){this.handleImageElementsEnd(b)}else{if("material"==b){this.materialId=null}else{if("effect"==b){this.effectId=null}else{if(this.effectId!==null){this.handleEffectElementsEnd(b,l)}else{if("geometry"==b){this.geometryId=null}}}}}}}if(this.geometryId!==null){this.handleGeometryElementsEnd(b,l)}else{if("visual_scene"==b||"node"==b||"node"==l&&"instance_geometry"==b){this.parentGroups.pop()}else{if("matrix"==b){var k=mat4.fromValues(this.floats[0],this.floats[4],this.floats[8],this.floats[12],this.floats[1],this.floats[5],this.floats[9],this.floats[13],this.floats[2],this.floats[6],this.floats[10],this.floats[14],this.floats[3],this.floats[7],this.floats[11],this.floats[15]);this.mulTransformGroup(k)}else{if("node"==l&&"rotate"==b){var m=mat4.create();mat4.fromRotation(m,this.floats[3]*Math.PI/180,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(m)}else{if("scale"==b){var e=mat4.create();mat4.scale(e,e,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(e)}else{if("node"==l&&"translate"==b){var a=mat4.create();mat4.translate(a,a,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]));this.mulTransformGroup(a)}}}}}}};DAEHandler.prototype.getCharacters=function(){return this.buffer.trim()};DAEHandler.prototype.handleRootAssetElementsEnd=function(c){if("asset"==c){this.inRootAsset=false}else{if("up_axis"==c){this.axis=this.getCharacters()}else{if("subject"==c){this.scene.setName(this.getCharacters())}else{if("authoring_tool"==c){var b=this.getCharacters();if(b.indexOf("Google SketchUp")===0){var d=b.substring("Google SketchUp".length).trim();if(d.length>0){var f=d.indexOf(".");var e=f===-1?d:d.substring(0,f);var a=parseInt(e);if(a<7||(a==7&&(f>=d.length-1||d[f+1]<"1"))){this.reverseTransparency=true}}}}}}}};DAEHandler.prototype.handleImageElementsEnd=function(c){if("init_from"==c){var f=this.getCharacters();if(f.indexOf("./")===0){f=f.substring(2)}var a=this.daeEntryName.lastIndexOf("/");if(a>=0){var e=this.daeEntryName.split("/");var b=f.split("/");e.splice(e.length-1,1);while(b[0]==".."||b[0]=="."){if(b[0]==".."){e.splice(e.length-1,1)}b.splice(0,1)}f="";for(var d=0;d<e.length;d++){f+=e[d]+"/"}for(var d=0;d<b.length;d++){f+=b[d]+"/"}f=f.substring(0,f.length-1)}this.textures[this.imageId]=f}else{if("data"==c){throw new SAXException("<data> not supported")}}};DAEHandler.prototype.handleEffectElementsEnd=function(b,c){if("profile_COMMON"==c&&"newparam"==b){this.newParamSid=null}else{if("newparam"==c&&"surface"==b){this.inSurface2D=false}else{if(this.newParamSid!==null){if(this.inSurface2D&&"init_from"==b){this.surface2DIds[this.newParamSid]=this.getCharacters()}else{if("sampler2D"==c&&"source"==b){this.sampler2DIds[this.newParamSid]=this.getCharacters()}}}else{if("extra"==c&&"technique"==b){this.techniqueProfile=null}else{if("phong"==b||"blinn"==b||"lambert"==b||"constant"==b){var d;if(this.transparentColor!==null){if("RGB_ZERO"==this.opaque){d=this.transparentColor[0]*0.212671+this.transparentColor[1]*0.71516+this.transparentColor[2]*0.072169;if(this.transparency!==null){d*=this.transparency}}else{if(this.transparency!==null){d=1-this.transparentColor[3]*this.transparency}else{d=1-this.transparentColor[3]}if(this.reverseTransparency){d=1-d}}}else{d=0}var a=this.effectAppearances[this.effectId];if(d>0){a.setTransparency(d)}else{var e=vec3.fromValues(0,0,0);if(!a.getAmbientColor()){a.setAmbientColor(e)}if(!a.getDiffuseColor()){a.setDiffuseColor(e)}if(!a.getSpecularColor()){a.setSpecularColor(e)}if(!a.getShininess()){a.setShininess(1)}}this.transparentColor=null;this.transparency=null;this.inPhongBlinnOrLambert=false;this.inConstant=false}else{if(this.inConstant||this.inPhongBlinnOrLambert){if("color"==b){if("emission"==c){if(this.inPhongBlinnOrLambert){this.effectAppearances[this.effectId].setEmissiveColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}}else{if("ambient"==c){this.effectAppearances[this.effectId].setAmbientColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("diffuse"==c){this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("specular"==c){this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2]))}else{if("transparent"==c){this.transparentColor=this.floats}}}}}}else{if("float"==b){if("shininess"==c){this.effectAppearances[this.effectId].setShininess(this.floatValue)}else{if("transparency"==c){this.transparency=this.floatValue}}}}}else{if("double_sided"==b&&"1"==this.getCharacters()&&("GOOGLEEARTH"==this.techniqueProfile||"MAX3D"==this.techniqueProfile||"MAYA"==this.techniqueProfile)){this.effectAppearances[this.effectId].setCullFace(Appearance3D.CULL_NONE)}}}}}}}};DAEHandler.prototype.handleGeometryElementsEnd=function(a,e){if("mesh"==e&&"source"==a){this.sources[this.meshSourceId]=this.floats;this.meshSourceId=null}else{if("mesh"==e&&"vertices"==a){this.verticesId=null}else{if("p"==a||"h"==a||"vcount"==a){var f=this.getCharacters().split(/\s/);var h=new Array(f.length);var d=0;for(var b=0;b<f.length;b++){if(f[b].length>0){h[d++]=parseInt(f[b])}}if(d!==f.length){h.splice(d,h.length-d)}if("ph"!=e&&"p"==a){this.facesAndLinesPrimitives.push(h)}else{if("vcount"==a){this.vcount=h}else{if("ph"==e){if("p"==a){this.polygonsPrimitives.push(h)}else{if("h"==a){if(this.polygonsPrimitives.length>this.polygonsHoles.length){this.polygonsHoles.push([])}this.polygonsHoles[this.polygonsPrimitives.length-1].push(h)}}}}}}else{if(("triangles"==a||"trifans"==a||"tristrips"==a||"polylist"==a||"polygons"==a||"lines"==a||"linestrips"==a)&&this.geometryVertices!==null){var g;if("lines"==a||"linestrips"==a){g=this.getLinesGeometry(a)}else{g=this.getFacesGeometry(a)}if(g!==null){this.geometries[this.geometryId].push(g);if(this.geometryAppearance!==null){var c=this.appearanceGeometries[this.geometryAppearance];if(c===undefined){c=[];this.appearanceGeometries[this.geometryAppearance]=c}c.push(g)}}this.geometryAppearance=null;this.geometryVertices=null;this.geometryNormals=null;this.geometryTextureCoordinates=null;this.facesAndLinesPrimitives=[];this.polygonsPrimitives=[];this.polygonsHoles=[];this.vcount=null}}}}};DAEHandler.prototype.getFacesGeometry=function(b){var o;if("triangles"==b){o=GeometryInfo3D.TRIANGLE_ARRAY}else{if("trifans"==b){o=GeometryInfo3D.TRIANGLE_FAN_ARRAY}else{if("tristrips"==b){o=GeometryInfo3D.TRIANGLE_STRIP_ARRAY}else{o=GeometryInfo3D.POLYGON_ARRAY}}}var d=new GeometryInfo3D(o);d.setCoordinates(this.geometryVertices);d.setCoordinateIndices(this.getIndices(this.geometryVertexOffset));if(this.geometryNormals){d.setNormals(this.geometryNormals);d.setNormalIndices(this.getIndices(this.geometryNormalOffset))}if(this.geometryTextureCoordinates){var a;for(var f=0;f<this.sourceAccessorStrides.length;f++){var p=this.sourceAccessorStrides[f];if(p.floatArray===this.geometryTextureCoordinates){a=p.stride;break}}var c;if(a>2){c=new Array(this.geometryTextureCoordinates.length/a*2);for(var f=0,e=0;e<this.geometryTextureCoordinates.length;e+=a){c[f++]=this.geometryTextureCoordinates[e];c[f++]=this.geometryTextureCoordinates[e+1]}}else{c=this.geometryTextureCoordinates}d.setTextureCoordinates(c);d.setTextureCoordinateIndices(this.getIndices(this.geometryTextureCoordinatesOffset))}if("tristrips"==b||"trifans"==b){var h=new Array(this.facesAndLinesPrimitives.length);for(var f=0;f<h.length;f++){h[f]=this.facesAndLinesPrimitives[f].length/this.inputCount}d.setStripCounts(h)}else{if("polylist"==b){d.setStripCounts(this.vcount)}else{if("polygons"==b){var m=0;for(var f=0;f<this.polygonsHoles.length;f++){m+=this.polygonsHoles[f].length}var h=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length+m);var n=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length);var l=0;var k=0;for(var f=0;f<this.facesAndLinesPrimitives.length;f++){h[l++]=this.facesAndLinesPrimitives[f].length/this.inputCount;n[k++]=1}for(var f=0;f<this.polygonsPrimitives.length;f++){h[l++]=this.polygonsPrimitives[f].length/this.inputCount;var g=this.polygonsHoles[f];for(var e=0;e<g.length;e++){h[l++]=g[e].length/this.inputCount}n[k++]=1+g.length}d.setStripCounts(h);d.setContourCounts(n)}}}if(!this.geometryNormals){d.setCreaseAngle(Math.PI/2);d.setGeneratedNormals(true)}return d.getIndexedGeometryArray()};DAEHandler.prototype.getLinesGeometry=function(a){var h=this.getIndices(this.geometryVertexOffset);if(h.length!==0){var f=this.geometryTextureCoordinates?this.getIndices(this.geometryTextureCoordinatesOffset):[];if("linestrips"==a){var j=[];var b=[];for(var d=0,e=0;d<this.facesAndLinesPrimitives.length;d++){var g=this.facesAndLinesPrimitives[d].length/this.inputCount;for(var c=0;c<g-1;c++){j.push(h[e+c]);j.push(h[e+c+1]);if(textureCoordinateIndices.length>0){b.push(textureCoordinateIndices[e+c]);b.push(textureCoordinateIndices[e+c+1])}}e+=g}h=j;f=b}return new IndexedLineArray3D(this.geometryVertices,h,this.geometryTextureCoordinates,f)}else{return null}};DAEHandler.prototype.getIndices=function(f){if(this.facesAndLinesPrimitives.length===1&&this.polygonsPrimitives.length===1&&this.inputCount===1){return facesAndLinesPrimitives[0]}else{var m=this.getIndexCount(this.facesAndLinesPrimitives);m+=this.getIndexCount(this.polygonsPrimitives);for(var e=0;e<this.polygonsHoles.length;e++){m+=this.getIndexCount(this.polygonsHoles[e])}var o=new Array(m/this.inputCount);var e=0;for(var d=0;d<this.facesAndLinesPrimitives.length;d++){var n=this.facesAndLinesPrimitives[d];for(var c=f;c<n.length;c+=this.inputCount){o[e++]=n[c]}}for(var d=0;d<this.polygonsPrimitives.length;d++){var h=this.polygonsPrimitives[d];for(var c=f;c<h.length;c+=this.inputCount){o[e++]=h[c]}var g=this.polygonsHoles[d];for(var c=0;c<g.length;c++){var a=g[c];for(var b=f;b<a.length;b+=this.inputCount){o[e++]=a[b]}}}return o}};DAEHandler.prototype.getIndexCount=function(a){var c=0;for(var b=0;b<a.length;b++){c+=a[b].length}return c};DAEHandler.prototype.mulTransformGroup=function(b){var c=this.parentGroups[this.parentGroups.length-1];var a=mat4.create();c.getTransform(a);mat4.mul(a,a,b);c.setTransform(a)};DAEHandler.prototype.endDocument=function(){for(var b=0;b<this.postProcessingBinders.length;b++){this.postProcessingBinders[b]()}if(this.visualScene!==null){var g=mat4.create();this.visualScene.getTransform(g);var e=new BoundingBox3D(vec3.fromValues(Infinity,Infinity,Infinity),vec3.fromValues(-Infinity,-Infinity,-Infinity));this.computeBounds(this.visualScene,e,mat4.create());var a=vec3.create();e.getLower(a);if(a[0]!==Infinity){var d=vec3.create();e.getUpper(d);var h=mat4.create();mat4.translate(h,h,vec3.fromValues(-a[0]-(d[0]-a[0])/2,-a[1]-(d[1]-a[1])/2,-a[2]-(d[2]-a[2])/2));mat4.mul(h,h,g);g=h}var c=mat4.create();mat4.scale(c,c,vec3.fromValues(this.meterScale*100,this.meterScale*100,this.meterScale*100));mat4.mul(c,c,g);var f=mat4.create();if("Z_UP"==this.axis){mat4.fromXRotation(f,-Math.PI/2)}else{if("X_UP"==this.axis){mat4.fromZRotation(f,Math.PI/2)}}mat4.mul(f,f,c);this.visualScene.setTransform(f);this.sceneRoot.addChild(this.visualScene)}};DAEHandler.prototype.computeBounds=function(g,f,e){if(g instanceof Group3D){if(g instanceof TransformGroup3D){e=mat4.clone(e);var b=mat4.create();g.getTransform(b);mat4.mul(e,e,b)}var d=g.getChildren();for(var c=0;c<d.length;c++){this.computeBounds(d[c],f,e)}}else{if(g instanceof Link3D){this.computeBounds(g.getSharedGroup(),f,e)}else{if(g instanceof Shape3D){var a=g.getBounds();a.transform(e);f.combine(a)}}}};function Max3DSLoader(){ModelLoader.call(this,"3ds");if(Max3DSLoader.DEFAULT_APPEARANCE===null){Max3DSLoader.DEFAULT_APPEARANCE=new Appearance3D("Default");Max3DSLoader.DEFAULT_APPEARANCE.setAmbientColor(vec3.fromValues(0.4,0.4,0.4));Max3DSLoader.DEFAULT_APPEARANCE.setDiffuseColor(vec3.fromValues(0.7102,0.702,0.6531));Max3DSLoader.DEFAULT_APPEARANCE.setSpecularColor(vec3.fromValues(0.3,0.3,0.3));Max3DSLoader.DEFAULT_APPEARANCE.setShininess(128)}}Max3DSLoader.prototype=Object.create(ModelLoader.prototype);Max3DSLoader.prototype.constructor=Max3DSLoader;Max3DSLoader.NULL_CHUNK=0;Max3DSLoader.M3DMAGIC=19789;Max3DSLoader.MLIBMAGIC=15786;Max3DSLoader.CMAGIC=49725;Max3DSLoader.M3D_VERSION=2;Max3DSLoader.COLOR_FLOAT=16;Max3DSLoader.COLOR_24=17;Max3DSLoader.LINEAR_COLOR_24=18;Max3DSLoader.LINEAR_COLOR_FLOAT=19;Max3DSLoader.PERCENTAGE_INT=48;Max3DSLoader.EDITOR_DATA=15677;Max3DSLoader.MESH_VERSION=15678;Max3DSLoader.MASTER_SCALE=256;Max3DSLoader.MATERIAL_ENTRY=45055;Max3DSLoader.MATERIAL_NAME=40960;Max3DSLoader.MATERIAL_AMBIENT=40976;Max3DSLoader.MATERIAL_DIFFUSE=40992;Max3DSLoader.MATERIAL_SPECULAR=41008;Max3DSLoader.MATERIAL_SHININESS=41024;Max3DSLoader.MATERIAL_TRANSPARENCY=41040;Max3DSLoader.MATERIAL_TWO_SIDED=41089;Max3DSLoader.MATERIAL_TEXMAP=41472;Max3DSLoader.MATERIAL_MAPNAME=41728;Max3DSLoader.NAMED_OBJECT=16384;Max3DSLoader.TRIANGLE_MESH_OBJECT=16640;Max3DSLoader.POINT_ARRAY=16656;Max3DSLoader.FACE_ARRAY=16672;Max3DSLoader.MESH_MATERIAL_GROUP=16688;Max3DSLoader.SMOOTHING_GROUP=16720;Max3DSLoader.MESH_BOXMAP=16784;Max3DSLoader.TEXTURE_COORDINATES=16704;Max3DSLoader.MESH_MATRIX=16736;Max3DSLoader.MESH_COLOR=16741;Max3DSLoader.KEY_FRAMER_DATA=45056;Max3DSLoader.OBJECT_NODE_TAG=45058;Max3DSLoader.NODE_ID=45104;Max3DSLoader.NODE_HIERARCHY=45072;Max3DSLoader.PIVOT=45075;Max3DSLoader.POSITION_TRACK_TAG=45088;Max3DSLoader.ROTATION_TRACK_TAG=45089;Max3DSLoader.SCALE_TRACK_TAG=45090;Max3DSLoader.TRACK_KEY_USE_TENS=1;Max3DSLoader.TRACK_KEY_USE_CONT=2;Max3DSLoader.TRACK_KEY_USE_BIAS=4;Max3DSLoader.TRACK_KEY_USE_EASE_TO=8;Max3DSLoader.TRACK_KEY_USE_EASE_FROM=16;Max3DSLoader.DEFAULT_APPEARANCE=null;Max3DSLoader.prototype.createScene=function(j,b,d,s,c,l,r){var m=new Group3D();var n=mat4.create();mat4.fromXRotation(n,-Math.PI/2);mat4.scale(n,n,vec3.fromValues(c,c,c));var g=new TransformGroup3D(n);m.addChild(g);if(s.getChildren().length>0){g.addChild(s);g=s}var q={};for(var u in d){var o=d[u];var p=new Appearance3D(u);if(o.ambientColor!==null){p.setAmbientColor(o.ambientColor)}if(o.diffuseColor!==null){p.setDiffuseColor(o.diffuseColor)}if(o.shininess!==null){p.setShininess(o.shininess*128*0.6)}if(o.specularColor!==null){if(o.shininess!==null){var a=vec3.clone(o.specularColor);vec3.scale(a,a,o.shininess);p.setSpecularColor(a)}else{p.setSpecularColor(o.specularColor)}}if(o.transparency!==null&&o.transparency>0){p.setTransparency(Math.min(1,o.transparency))}if(o.texture){p.imageEntryName=o.texture}q[u]=p}if(l===null){r(ModelLoader.BUILDING_MODEL,"",0);for(var t=0;t<j.length;t++){this.createShapes(j[t],b,q,m,g)}r(ModelLoader.BUILDING_MODEL,"",1);return m}else{var e=j.length;var h=0;var k=this;var f=function(){r(ModelLoader.BUILDING_MODEL,"",e!==0?h/e:0);var i=Date.now();while(j.length>0){k.createShapes(j[0],b,q,m,g);h++;j.splice(0,1);if(h<e&&Date.now()-i>10){setTimeout(f,0);return}}setTimeout(function(){r(ModelLoader.BUILDING_MODEL,"",1);l(m)},0)};f()}};Max3DSLoader.prototype.createShapes=function(s,R,h,w,e){var J=mat4.create();var g=s.faces;if(g!==null&&g.length>0){var a=s.vertices;var S=new Array(a.length);for(var Q=0;Q<S.length;Q++){S[Q]=null}var F=new Array(3*g.length);var p=vec3.create();var m=vec3.create();for(var Q=0,O=0;Q<g.length;Q++){var f=g[Q];var x=f.vertexIndices;for(var P=0;P<3;P++,O++){var C=x[P];vec3.subtract(p,a[x[P<2?P+1:0]],a[C]);vec3.subtract(m,a[x[P>0?P-1:2]],a[C]);var G=vec3.create();vec3.cross(G,p,m);var n=vec3.length(G);if(n>0){var I=Math.atan2(n,vec3.dot(p,m));vec3.scale(G,G,I/n)}var c=new Max3DSLoader.Mesh3DSSharedVertex(Q,G);c.nextVertex=S[C];S[C]=c;F[O]=G}}var q=new Array(3*g.length);for(var Q=0,O=0;Q<g.length;Q++){var f=g[Q];var x=f.vertexIndices;var d=new Array(3);for(var P=0;P<3;P++,O++){var C=x[P];var G=vec3.create();if(f.smoothingGroup===null){for(var c=S[C];c!==null;c=c.nextVertex){if(g[c.faceIndex].smoothingGroup===null&&(c.normal===F[O]||vec3.dot(c.normal,F[O])>0)){vec3.add(G,G,c.normal)}}}else{var E=f.smoothingGroup;for(var c=S[C];c!==null;c=c.nextVertex){var L=g[c.faceIndex];if(L.smoothingGroup!==null&&(f.smoothingGroup&L.smoothingGroup)!==0){E|=L.smoothingGroup}}for(var c=S[C];c!==null;c=c.nextVertex){var L=g[c.faceIndex];if(L.smoothingGroup!==null&&(E&L.smoothingGroup)!==0){vec3.add(G,G,c.normal)}}}if(vec3.squaredLength(G)!==0){vec3.normalize(G,G)}else{vec3.copy(G,F[O]);if(vec3.squaredLength(G)!==0){vec3.normalize(G,G)}}q[O]=G;d[P]=O}f.normalIndices=d}g.sort(function(j,l){var k=j.material;var i=l.material;if(k===null){if(i===null){return j.index-l.index}else{return -1}}else{if(i===null){return 1}else{return 0}}});var K;var B=R[s.name];if(B===undefined){K=e}else{if(B.length===1){K=B[0]}else{var b=new SharedGroup3D();for(var Q=0;Q<B.length;Q++){B[Q].addChild(new Link3D(b))}K=b}}var z=s.transform;if(z!==null){if(!mat4.exactEquals(z,J)){var y=new TransformGroup3D(z);K.addChild(y);K=y}}var r=s.textureCoordinates;var Q=0;var o=null;var N=null;while(Q<g.length){var D=g[Q];var v=D.material;var u=Q;while(++u<g.length){if(v!==g[u].material){break}}var U=u-Q;var T=new Array(U*3);var d=new Array(U*3);for(var P=0,O=0;P<U;P++){var f=g[Q+P];var x=f.vertexIndices;var A=f.normalIndices;for(var M=0;M<3;M++,O++){T[O]=x[M];d[O]=A[M]}}var H=new GeometryInfo3D(GeometryInfo3D.TRIANGLE_ARRAY);H.setCoordinates(a);H.setCoordinateIndices(T);H.setNormals(q);H.setNormalIndices(d);if(r!==null){H.setTextureCoordinates(r);H.setTextureCoordinateIndices(T)}geometryArray=H.getIndexedGeometryArray();if(o===null||N!==v){N=v;var t=Max3DSLoader.DEFAULT_APPEARANCE;if(v!==null&&h[v.name]!==undefined){t=h[v.name]}t=t.clone();if(v!==null&&v.twoSided){t.setCullFace(Appearance3D.CULL_NONE)}o=new Shape3D(geometryArray,t);K.addChild(o);o.setName(s.name+(Q===0?"":Q))}else{o.addGeometry(geometryArray)}Q=u}}};Max3DSLoader.prototype.getModelContent=function(a){return a.asUint8Array()};Max3DSLoader.prototype.parseEntryScene=function(f,a,c,g,k,h){var d=[];var m={};var l={};var b;var i=new TransformGroup3D();if(k===null){h(ModelLoader.PARSING_MODEL,a,0);b=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(f),a,c,d,m,l,i);h(ModelLoader.PARSING_MODEL,a,1);return this.createScene(d,m,l,i,b,null,h)}else{var j=this;b=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(f),a,c,d,m,l,i);var e=function(){setTimeout(function(){h(ModelLoader.PARSING_MODEL,a,1);j.createScene(d,m,l,i,b,function(n){k(n)},h)},0)};e()}};Max3DSLoader.prototype.parse3DSStream=function(g,a,b,c,h,i,f){try{masterScale=1;var d=false;switch(g.readChunkHeader().id){case Max3DSLoader.M3DMAGIC:case Max3DSLoader.MLIBMAGIC:case Max3DSLoader.CMAGIC:d=true;while(!g.isChunckEndReached()){switch(g.readChunkHeader().id){case Max3DSLoader.M3D_VERSION:g.readLittleEndianUnsignedInt();break;case Max3DSLoader.EDITOR_DATA:this.parseEditorData(g,a,b,c,i);break;case Max3DSLoader.KEY_FRAMER_DATA:this.parseKeyFramerData(g,h,f);break;default:g.readUntilChunkEnd();break}g.releaseChunk()}break;case Max3DSLoader.EDITOR_DATA:masterScale=this.parseEditorData(g,a,b,c,i);break;default:if(d){g.readUntilChunkEnd()}else{throw new IncorrectFormat3DException("Bad magic number")}}g.releaseChunk()}catch(e){c.length=0}return masterScale};Max3DSLoader.prototype.parseEditorData=function(e,b,g,a,c){var d=1;while(!e.isChunckEndReached()){switch(e.readChunkHeader().id){case Max3DSLoader.MESH_VERSION:e.readLittleEndianInt();break;case Max3DSLoader.MASTER_SCALE:d=e.readLittleEndianFloat();break;case Max3DSLoader.NAMED_OBJECT:this.parseNamedObject(e,a,c);break;case Max3DSLoader.MATERIAL_ENTRY:var f=this.parseMaterial(e,b,g);c[f.name]=f;break;default:e.readUntilChunkEnd();break}e.releaseChunk()}return d};Max3DSLoader.prototype.parseNamedObject=function(c,a,b){var d=c.readString();while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.TRIANGLE_MESH_OBJECT:a.push(this.parseMeshData(c,d,b));break;default:c.readUntilChunkEnd();break}c.releaseChunk()}};Max3DSLoader.prototype.parseMeshData=function(l,a,o){var k=null;var e=null;var c=null;var f=null;var d=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.MESH_MATRIX:c=this.parseMatrix(l);c=mat4.invert(c,c);break;case Max3DSLoader.MESH_COLOR:f=l.readUnsignedByte();break;case Max3DSLoader.POINT_ARRAY:k=new Array(l.readLittleEndianUnsignedShort());for(var g=0;g<k.length;g++){k[g]=vec3.fromValues(l.readLittleEndianFloat(),l.readLittleEndianFloat(),l.readLittleEndianFloat())}break;case Max3DSLoader.FACE_ARRAY:d=this.parseFacesData(l);while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.MESH_MATERIAL_GROUP:var m=l.readString();var j=null;if(o!==null){j=o[m]}for(var g=0,b=l.readLittleEndianUnsignedShort();g<b;g++){var h=l.readLittleEndianUnsignedShort();if(h<d.length){d[h].material=j}}break;case Max3DSLoader.SMOOTHING_GROUP:for(var g=0;g<d.length;g++){d[g].smoothingGroup=l.readLittleEndianUnsignedInt()}break;case Max3DSLoader.MESH_BOXMAP:default:l.readUntilChunkEnd();break}l.releaseChunk()}break;case Max3DSLoader.TEXTURE_COORDINATES:e=new Array(l.readLittleEndianUnsignedShort());for(var g=0;g<e.length;g++){e[g]=vec2.fromValues(l.readLittleEndianFloat(),l.readLittleEndianFloat())}break;default:l.readUntilChunkEnd();break}l.releaseChunk()}return new Max3DSLoader.Mesh3DS(a,k,e,d,f,c)};Max3DSLoader.prototype.parseKeyFramerData=function(l,b,o){var j=[];var i=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.OBJECT_NODE_TAG:var q=true;var h=null;var t=null;var f=0;var s=null;var u=null;while(!l.isChunckEndReached()){switch(l.readChunkHeader().id){case Max3DSLoader.NODE_HIERARCHY:var r=l.readString();q="$$$DUMMY"!=r;l.readLittleEndianUnsignedShort();l.readLittleEndianUnsignedShort();var p=l.readLittleEndianShort();var k=new TransformGroup3D();if(p===-1){o.addChild(k)}else{if(p>j.length-1){throw new IncorrectFormat3DException("Inconsistent nodes hierarchy")}j[p].addChild(k)}j.push(k);if(q){var d=b[r];if(d===undefined){d=[];b[r]=d}d.push(k)}i=k;break;case Max3DSLoader.PIVOT:h=this.parseVector(l);break;case Max3DSLoader.POSITION_TRACK_TAG:this.parseKeyFramerTrackStart(l);t=this.parseVector(l);l.readUntilChunkEnd();break;case Max3DSLoader.ROTATION_TRACK_TAG:this.parseKeyFramerTrackStart(l);f=l.readLittleEndianFloat();s=this.parseVector(l);l.readUntilChunkEnd();break;case Max3DSLoader.SCALE_TRACK_TAG:this.parseKeyFramerTrackStart(l);u=this.parseVector(l);l.readUntilChunkEnd();break;default:l.readUntilChunkEnd();break}l.releaseChunk()}var m=mat4.create();if(t!==null){mat4.translate(m,m,t)}if(s!==null&&f!==0){var e=vec3.length(s);if(e>0){var n=-f/2;var a=Math.sin(n)/e;var c=Math.cos(n);var g=mat4.create();mat4.fromQuat(g,quat.fromValues(s[0]*a,s[1]*a,s[2]*a,c));mat4.mul(m,m,g)}}if(u!==null){mat4.scale(m,m,u)}if(h!==null&&q){vec3.negate(h,h);mat4.translate(m,m,h)}i.setTransform(m);break;default:l.readUntilChunkEnd();break}l.releaseChunk()}};Max3DSLoader.prototype.parseKeyFramerTrackStart=function(b){b.readLittleEndianUnsignedShort();b.readLittleEndianUnsignedInt();b.readLittleEndianUnsignedInt();b.readLittleEndianInt();b.readLittleEndianInt();var a=b.readLittleEndianUnsignedShort();if((a&Max3DSLoader.TRACK_KEY_USE_TENS)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_CONT)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_BIAS)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_EASE_TO)!==0){b.readLittleEndianFloat()}if((a&Max3DSLoader.TRACK_KEY_USE_EASE_FROM)!==0){b.readLittleEndianFloat()}};Max3DSLoader.prototype.parseFacesData=function(b){var a=new Array(b.readLittleEndianUnsignedShort());for(var c=0;c<a.length;c++){a[c]=new Max3DSLoader.Face3DS(c,b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort(),b.readLittleEndianUnsignedShort())}return a};Max3DSLoader.prototype.parseMaterial=function(j,a,c){var b=null;var g=null;var h=null;var e=null;var k=null;var d=null;var f=false;var i=null;while(!j.isChunckEndReached()){switch(j.readChunkHeader().id){case Max3DSLoader.MATERIAL_NAME:b=j.readString();break;case Max3DSLoader.MATERIAL_AMBIENT:g=this.parseColor(j);break;case Max3DSLoader.MATERIAL_DIFFUSE:h=this.parseColor(j);break;case Max3DSLoader.MATERIAL_SPECULAR:e=this.parseColor(j);break;case Max3DSLoader.MATERIAL_SHININESS:k=this.parsePercentage(j);break;case Max3DSLoader.MATERIAL_TRANSPARENCY:d=this.parsePercentage(j);break;case Max3DSLoader.MATERIAL_TWO_SIDED:f=true;break;case Max3DSLoader.MATERIAL_TEXMAP:i=this.parseTextureMap(j,a,c);break;default:j.readUntilChunkEnd();break}j.releaseChunk()}return new Max3DSLoader.Material3DS(b,g,h,e,k,d,i,f)};Max3DSLoader.prototype.parseColor=function(c){var d=false;var b=null;var a;while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.LINEAR_COLOR_24:d=true;b=vec3.fromValues(c.readUnsignedByte()/255,c.readUnsignedByte()/255,c.readUnsignedByte()/255);break;case Max3DSLoader.COLOR_24:a=vec3.fromValues(c.readUnsignedByte()/255,c.readUnsignedByte()/255,c.readUnsignedByte()/255);if(!d){b=a}break;case Max3DSLoader.LINEAR_COLOR_FLOAT:d=true;b=vec3.fromValues(c.readLittleEndianFloat(),c.readLittleEndianFloat(),c.readLittleEndianFloat());break;case Max3DSLoader.COLOR_FLOAT:a=vec3.fromValues(c.readLittleEndianFloat(),c.readLittleEndianFloat(),c.readLittleEndianFloat());if(!d){b=a}break;default:c.readUntilChunkEnd();break}c.releaseChunk()}if(b!==null){return b}else{throw new IncorrectFormat3DException("Expected color value")}};Max3DSLoader.prototype.parsePercentage=function(b){var a=null;while(!b.isChunckEndReached()){switch(b.readChunkHeader().id){case Max3DSLoader.PERCENTAGE_INT:a=b.readLittleEndianShort()/100;break;default:b.readUntilChunkEnd();break}b.releaseChunk()}if(a!==null){return a}else{throw new IncorrectFormat3DException("Expected percentage value")}};Max3DSLoader.prototype.parseTextureMap=function(c,b,f){var e=null;while(!c.isChunckEndReached()){switch(c.readChunkHeader().id){case Max3DSLoader.MATERIAL_MAPNAME:e=c.readString();break;case Max3DSLoader.PERCENTAGE_INT:default:c.readUntilChunkEnd();break}c.releaseChunk()}if(e!==null){var a=b.lastIndexOf("/");if(a>=0){e=b.substring(0,a+1)+e}var d=f.file(e);if(d!==null){return e}else{return this.getEntryNameIgnoreCase(f,e)}}return null};Max3DSLoader.prototype.getEntryNameIgnoreCase=function(c,d){d=d.toUpperCase();var a=c.file(/.*/);for(var b=0;b<a.length;b++){if(a[b].name.toUpperCase()==d){return a[b].name}}return null};Max3DSLoader.prototype.parseMatrix=function(a){return mat4.fromValues(a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),0,a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat(),1)};Max3DSLoader.prototype.parseVector=function(a){return vec3.fromValues(a.readLittleEndianFloat(),a.readLittleEndianFloat(),a.readLittleEndianFloat())};Max3DSLoader.Chunk3DS=function(b,a){if(a<6){throw new IncorrectFormat3DException("Invalid chunk "+b+" length "+a)}this.id=b;this.length=a;this.readLength=6};Max3DSLoader.Chunk3DS.prototype.incrementReadLength=function(a){this.readLength+=a};Max3DSLoader.Chunk3DS.prototype.toString=function(){return this.id+" "+this.length};Max3DSLoader.ChunksInputStream=function(a){this.input=a;this.index=0;this.stack=[]};Max3DSLoader.ChunksInputStream.prototype.read=function(){if(this.index>=this.input.length){return -1}else{return this.input[this.index++]}};Max3DSLoader.ChunksInputStream.prototype.readChunkHeader=function(){var a=this.readLittleEndianUnsignedShort(false);var b=new Max3DSLoader.Chunk3DS(a,this.readLittleEndianUnsignedInt(false));this.stack.push(b);return b};Max3DSLoader.ChunksInputStream.prototype.releaseChunk=function(){var a=this.stack.pop();if(a.length!==a.readLength){throw new IncorrectFormat3DException("Chunk "+a.id+" invalid length. Expected to read "+a.length+" bytes, but actually read "+a.readLength+" bytes")}if(this.stack.length!==0){this.stack[this.stack.length-1].incrementReadLength(a.length)}};Max3DSLoader.ChunksInputStream.prototype.isChunckEndReached=function(){var a=this.stack[this.stack.length-1];return a.length===a.readLength};Max3DSLoader.ChunksInputStream.prototype.readUntilChunkEnd=function(){var a=this.stack[this.stack.length-1];var c=a.length-a.readLength;for(var b=c;b>0;b--){if(this.read()<0){throw new IncorrectFormat3DException("Chunk "+a.id+" too short")}}a.incrementReadLength(c)};Max3DSLoader.ChunksInputStream.prototype.readUnsignedByte=function(){var a=this.read();if(a===-1){throw new IncorrectFormat3DException("Unexpected EOF")}else{this.stack[this.stack.length-1].incrementReadLength(1);return a}};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedShort=function(c){if(c===undefined){c=true}var b=this.read();if(b===-1){throw new IncorrectFormat3DException("Unexpected EOF")}var a=this.read();if(a===-1){throw new IncorrectFormat3DException("Can't read short")}if(c){this.stack[this.stack.length-1].incrementReadLength(2)}return(a<<8)|b};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianShort=function(b){var a=this.readLittleEndianUnsignedShort(b);if(a&32768){a=(-1&~32767)|a}return a};Max3DSLoader.ChunksInputStream.converter=new Int8Array(4);Max3DSLoader.ChunksInputStream.int32Converter=new Int32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1);Max3DSLoader.ChunksInputStream.float32Converter=new Float32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1);Max3DSLoader.ChunksInputStream.prototype.readLittleEndianFloat=function(){Max3DSLoader.ChunksInputStream.int32Converter[0]=this.readLittleEndianUnsignedInt(true);return Max3DSLoader.ChunksInputStream.float32Converter[0]};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedInt=function(e){if(e===undefined){e=true}var d=this.read();if(d===-1){throw new IncorrectFormat3DException("Unexpected EOF")}var c=this.read();var b=this.read();var a=this.read();if(c===-1||b===-1||a===-1){throw new IncorrectFormat3DException("Can't read int")}if(e){this.stack[this.stack.length-1].incrementReadLength(4)}return(a<<24)|(b<<16)|(c<<8)|d};Max3DSLoader.ChunksInputStream.prototype.readLittleEndianInt=function(b){var a=this.readLittleEndianUnsignedInt(b);if(a&2147483648){a=(-1&~2147483647)|a}return a};Max3DSLoader.ChunksInputStream.prototype.readString=function(){var c="";var a;while((a=this.read())!==-1&&a!==0){c+=String.fromCharCode(a)}if(a===-1){throw new IncorrectFormat3DException("Unexpected end of file")}this.stack[this.stack.length-1].incrementReadLength(c.length+1);return c};Max3DSLoader.Mesh3DS=function(f,e,b,a,c,d){this.name=f;this.vertices=e;this.textureCoordinates=b;this.faces=a;this.color=c;this.transform=d};Max3DSLoader.Face3DS=function(e,d,b,c,a){this.index=e;this.vertexIndices=[d,b,c];this.normalIndices=null;this.material=null;this.smoothingGroup=null};Max3DSLoader.Material3DS=function(d,c,g,h,e,b,f,a){this.name=d;this.ambientColor=c;this.diffuseColor=g;this.specularColor=h;this.shininess=e;this.transparency=b;this.texture=f;this.twoSided=a};Max3DSLoader.Mesh3DSSharedVertex=function(a,b){this.faceIndex=a;this.normal=b;this.nextVertex=null};var LengthUnit={};LengthUnit.getMagnetizedMeterLength=function(d,a){a*=2;var b=1/10;if(a>100){b=100}else{if(a>10){b=10}else{if(a>5){b=5}else{if(a>1){b=1}else{if(a>0.5){b=0.5}}}}}var c=Math.round(d/b)*b;if(c===0&&d>0){return d}else{return c}};LengthUnit.getMagnetizedInchLength=function(d,a){a=LengthUnit.centimeterToInch(a)*2;var b=1/8;if(a>6){b=6}else{if(a>3){b=3}else{if(a>1){b=1}else{if(a>0.5){b=0.5}else{if(a>0.25){b=0.25}}}}}var c=LengthUnit.inchToCentimeter(Math.round(LengthUnit.centimeterToInch(d)/b)*b);if(c===0&&d>0){return d}else{return c}};LengthUnit.centimeterToInch=function(a){return a/2.54};LengthUnit.centimeterToFoot=function(a){return a/2.54/12};LengthUnit.inchToCentimeter=function(a){return a*2.54};LengthUnit.footToCentimeter=function(a){return a*2.54*12};LengthUnit.MILLIMETER={formatLocale:null};LengthUnit.MILLIMETER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.MILLIMETER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.MILLIMETER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.MILLIMETER.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.MILLIMETER.checkLocaleChange=function(){throw new UnsupportedOperationException("Not implemented yet");if(!Locale.getDefault().equals(this.formatLocale)){this.formatLocale=Locale.getDefault();var b=ResourceBundle.getBundle(LengthUnit.name);this.name=b.getString("millimeterUnit");this.lengthFormatWithUnit=new MeterFamilyFormat("#,##0 "+this.name,10);this.lengthFormat=new MeterFamilyFormat("#,##0",10);var a=b.getString("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(a)}};LengthUnit.MILLIMETER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.MILLIMETER.getMinimumLength=function(){return 0.1};LengthUnit.MILLIMETER.getMaximumLength=function(){return 100000};LengthUnit.MILLIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.MILLIMETER.centimeterToUnit=function(a){return a*10};LengthUnit.MILLIMETER.unitToCentimeter=function(a){return a/10};LengthUnit.CENTIMETER={formatLocale:null};LengthUnit.CENTIMETER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.CENTIMETER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.CENTIMETER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.CENTIMETER.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.CENTIMETER.checkLocaleChange=function(){throw new UnsupportedOperationException("Not implemented yet");if(!Locale.getDefault().equals(this.formatLocale)){this.formatLocale=Locale.getDefault();var b=ResourceBundle.getBundle(LengthUnit.name);this.name=b.getString("centimeterUnit");this.lengthFormatWithUnit=new MeterFamilyFormat("#,##0.# "+this.name,1);this.lengthFormat=new MeterFamilyFormat("#,##0.#",1);var a=b.getString("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(a)}};LengthUnit.CENTIMETER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.CENTIMETER.getMinimumLength=function(){return 0.1};LengthUnit.CENTIMETER.getMaximumLength=function(){return 100000};LengthUnit.CENTIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.CENTIMETER.centimeterToUnit=function(a){return a};LengthUnit.CENTIMETER.unitToCentimeter=function(a){return a};LengthUnit.METER={formatLocale:null};LengthUnit.METER.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.METER.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.METER.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.METER.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.METER.checkLocaleChange=function(){throw new UnsupportedOperationException("Not implemented yet");if(!Locale.getDefault().equals(this.formatLocale)){this.formatLocale=Locale.getDefault();var b=ResourceBundle.getBundle(LengthUnit.name);this.name=b.getString("meterUnit");this.lengthFormatWithUnit=new MeterFamilyFormat("#,##0.00# "+this.name,0.01);this.lengthFormat=new MeterFamilyFormat("#,##0.00#",0.01);var a=b.getString("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(a)}};LengthUnit.METER.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedMeterLength(b,a)};LengthUnit.METER.getMinimumLength=function(){return 0.1};LengthUnit.METER.getMaximumLength=function(){return 100000};LengthUnit.METER.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.METER.centimeterToUnit=function(a){return a/100};LengthUnit.METER.unitToCentimeter=function(a){return a*100};LengthUnit.INCH={formatLocale:null};LengthUnit.INCH.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH.getFormat=function(){return this.getFormatWithUnit()};LengthUnit.INCH.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.INCH.checkLocaleChange=function(){throw new UnsupportedOperationException("Not implemented yet");if(!Locale.getDefault().equals(this.formatLocale)){this.formatLocale=Locale.getDefault();var c=ResourceBundle.getBundle(LengthUnit.name);this.name=c.getString("inchUnit");var a=["\u215b","\u00bc","\u215c","\u00bd","\u215d","\u00be","\u215e"];var d=["1/8","1/4","3/8","1/2","5/8","3/4","7/8"];var b=c.getString("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("#,##0 "+b)}};LengthUnit.INCH.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH.centimeterToUnit=function(a){return LengthUnit.centimeterToInch(a)};LengthUnit.INCH.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};LengthUnit.INCH_DECIMALS={formatLocale:null};LengthUnit.INCH_DECIMALS.getFormatWithUnit=function(){this.checkLocaleChange();return this.lengthFormatWithUnit};LengthUnit.INCH_DECIMALS.getFormat=function(){this.checkLocaleChange();return this.lengthFormat};LengthUnit.INCH_DECIMALS.getAreaFormatWithUnit=function(){this.checkLocaleChange();return this.areaFormatWithUnit};LengthUnit.INCH_DECIMALS.getName=function(){this.checkLocaleChange();return this.name};LengthUnit.INCH_DECIMALS.checkLocaleChange=function(){throw new UnsupportedOperationException("Not implemented yet");if(!Locale.getDefault().equals(this.formatLocale)){this.formatLocale=Locale.getDefault();var b=ResourceBundle.getBundle(LengthUnit.name);this.name=b.getString("inchUnit");this.lengthFormat=new InchDecimalsFormat(new MessageFormat(b.getString("inchDecimalsFormat")));this.lengthFormatWithUnit=new InchDecimalsFormat(new MessageFormat(b.getString("inchDecimalsFormatWithUnit")));var a=b.getString("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("#,##0.## "+a)}};LengthUnit.INCH_DECIMALS.getMagnetizedLength=function(b,a){return LengthUnit.getMagnetizedInchLength(b,a)};LengthUnit.INCH_DECIMALS.getMinimumLength=function(){return LengthUnit.inchToCentimeter(0.125)};LengthUnit.INCH_DECIMALS.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)};LengthUnit.INCH_DECIMALS.getMaximumElevation=function(){return this.getMaximumLength()/10};LengthUnit.INCH_DECIMALS.centimeterToUnit=function(a){return centimeterToInch(a)};LengthUnit.INCH_DECIMALS.unitToCentimeter=function(a){return LengthUnit.inchToCentimeter(a)};function UserPreferences(){this.propertyChangeSupport=new PropertyChangeSupport(this);this.supportedLanguages=UserPreferences.DEFAULT_SUPPORTED_LANGUAGES;this.defaultCountry=navigator.language.substring(navigator.language.indexOf("_")+1,navigator.language.length);var c=navigator.language.substring(0,navigator.language.indexOf("_"));for(var a=0;a<this.supportedLanguages;a++){var b=this.supportedLanguages[a];if(b==c+"_"+this.defaultCountry){this.language=b;break}else{if(this.language===null&&b.indexOf(c)===0){this.language=b}}}if(this.language===null){this.language="en"}this.resourceBundles={};this.furnitureCatalog=null;this.texturesCatalog=null;this.patternsCatalog=null;this.currency=null;this.unit=null;this.furnitureCatalogViewedInTree=true;this.aerialViewCenteredOnSelectionEnabled=false;this.observerCameraSelectedAtChange=true;this.navigationPanelVisible=true;this.magnetismEnabled=true;this.rulersVisible=true;this.gridVisible=true;this.defaultFontName=null;this.furnitureViewedFromTop=true;this.furnitureModelIconSize=128;this.roomFloorColoredOrTextured=true;this.wallPattern=null;this.newWallPattern=null;this.newWallThickness=7.5;this.newWallHeight=250;this.newWallBaseboardThickness=1;this.newWallBaseboardHeight=7;this.newFloorThickness=12;this.recentHomes=[];this.autoSaveDelayForRecovery;this.autoCompletionStrings={};this.recentColors=[];this.recentTextures=[];this.homeExamples=[]}UserPreferences.DEFAULT_SUPPORTED_LANGUAGES=["en"];UserPreferences.DEFAULT_TEXT_STYLE=new TextStyle(18);UserPreferences.DEFAULT_ROOM_TEXT_STYLE=new TextStyle(24);UserPreferences.prototype.addPropertyChangeListener=function(b,a){this.propertyChangeSupport.addPropertyChangeListener(b,a)};UserPreferences.prototype.removePropertyChangeListener=function(b,a){this.propertyChangeSupport.removePropertyChangeListener(b,a)};UserPreferences.prototype.getFurnitureCatalog=function(){return this.furnitureCatalog};UserPreferences.prototype.setFurnitureCatalog=function(a){this.furnitureCatalog=a};UserPreferences.prototype.getTexturesCatalog=function(){return this.texturesCatalog};UserPreferences.prototype.setTexturesCatalog=function(a){this.texturesCatalog=a};UserPreferences.prototype.getPatternsCatalog=function(){return this.patternsCatalog};UserPreferences.prototype.setPatternsCatalog=function(a){this.patternsCatalog=a};UserPreferences.prototype.getLengthUnit=function(){return this.unit};UserPreferences.prototype.setUnit=function(a){if(this.unit!==a){var b=this.unit;this.unit=a;this.propertyChangeSupport.firePropertyChange("UNIT",b,a)}};UserPreferences.prototype.getLanguage=function(){return this.language};UserPreferences.prototype.setLanguage=function(b){if(b!=this.language&&this.isLanguageEditable()){var a=this.language;this.language=b;this.propertyChangeSupport.firePropertyChange("LANGUAGE",a,b)}};UserPreferences.prototype.isLanguageEditable=function(){return true};UserPreferences.prototype.getDefaultSupportedLanguages=function(){return UserPreferences.DEFAULT_SUPPORTED_LANGUAGES.slice(0)};UserPreferences.prototype.getSupportedLanguages=function(){return this.supportedLanguages.slice(0)};UserPreferences.prototype.setSupportedLanguages=function(a){if(this.supportedLanguages!=a){var b=this.supportedLanguages;this.supportedLanguages=a.slice(0);this.propertyChangeSupport.firePropertyChange("SUPPORTED_LANGUAGES",b,a)}};UserPreferences.prototype.getLocalizedString=function(c,j,i){throw new UnsupportedOperationException("Not implemented yet");if(typeof c!=="string"){var e=this.classResourceBundles[c];if(e===null){try{e=this.getResourceBundle(c.constructor.name);this.classResourceBundles[c.constructor.name]=e}catch(h){try{var g=c.constructor.name;var d=g.lastIndexOf(".");var f;if(d!==-1){f=g.substring(0,d)+".package"}else{f="package"}e=new PrefixedResourceBundle(getResourceBundle(f),c.constructor.name+".");this.classResourceBundles[c.constructor.name]=e}catch(a){throw new IllegalArgumentException("Can't find resource bundle for "+c,h)}}}return this.getBundleLocalizedString(e,j,i)}else{var f=c;try{var b=this.getResourceBundle(f);return this.getBundleLocalizedString(b,j,i)}catch(h){throw new IllegalArgumentException("Can't find resource bundle for "+f,h)}}};UserPreferences.prototype.getResourceBundle=function(h){h=h.replace(".","/");var b=this.resourceBundles.get(h);if(b!==null){return b}var p=this.language;var e=p.getLanguage();var c=p.getCountry();var o=[".properties","_"+e+".properties","_"+e+"_"+c+".properties"];for(var f=0;f<o.length;f++){var n=o[f];var g=this.getResourceClassLoaders();for(var d=0;d<g.length;d++){var a=g[d];var m=a.getResourceAsStream(h+n);if(m!==null){var k=b;try{b=new PropertyResourceBundle(m);b.setParent(k);break}catch(l){l.printStackTrace()}finally{m.close()}}}}if(b===null){throw new IOException("No available resource bundle for "+h)}this.resourceBundles.put(h,b);return b};UserPreferences.prototype.getBundleLocalizedString=function(d,c,e){try{var a=d.getString(c);if(e.length>0){a=String.format(a,e)}return a}catch(b){throw new IllegalArgumentException("Unknown key "+c)}};UserPreferences.prototype.getResourceClassLoaders=function(){throw new UnsupportedOperationException("Not implemented yet");return DEFAULT_CLASS_LOADER};UserPreferences.prototype.getCurrency=function(){return this.currency};UserPreferences.prototype.setCurrency=function(a){this.currency=a};UserPreferences.prototype.isFurnitureCatalogViewedInTree=function(){return this.furnitureCatalogViewedInTree};UserPreferences.prototype.setFurnitureCatalogViewedInTree=function(a){if(this.furnitureCatalogViewedInTree!==a){this.furnitureCatalogViewedInTree=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_CATALOG_VIEWED_IN_TREE",!a,a)}};UserPreferences.prototype.isNavigationPanelVisible=function(){return this.navigationPanelVisible};UserPreferences.prototype.setNavigationPanelVisible=function(a){if(this.navigationPanelVisible!==a){this.navigationPanelVisible=a;this.propertyChangeSupport.firePropertyChange("NAVIGATION_PANEL_VISIBLE",!a,a)}};UserPreferences.prototype.setAerialViewCenteredOnSelectionEnabled=function(a){if(a!==this.aerialViewCenteredOnSelectionEnabled){this.aerialViewCenteredOnSelectionEnabled=a;this.propertyChangeSupport.firePropertyChange("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",!a,a)}};UserPreferences.prototype.isAerialViewCenteredOnSelectionEnabled=function(){return this.aerialViewCenteredOnSelectionEnabled};UserPreferences.prototype.setObserverCameraSelectedAtChange=function(a){if(a!==this.observerCameraSelectedAtChange){this.observerCameraSelectedAtChange=a;this.propertyChangeSupport.firePropertyChange("OBSERVER_CAMERA_SELECTED_AT_CHANGE",!a,a)}};UserPreferences.prototype.isObserverCameraSelectedAtChange=function(){return this.observerCameraSelectedAtChange};UserPreferences.prototype.isMagnetismEnabled=function(){return this.magnetismEnabled};UserPreferences.prototype.setMagnetismEnabled=function(a){if(this.magnetismEnabled!==a){this.magnetismEnabled=a;this.propertyChangeSupport.firePropertyChange("MAGNETISM_ENABLED",!a,a)}};UserPreferences.prototype.isRulersVisible=function(){return this.rulersVisible};UserPreferences.prototype.setRulersVisible=function(a){if(this.rulersVisible!==a){this.rulersVisible=a;this.propertyChangeSupport.firePropertyChange("RULERS_VISIBLE",!a,a)}};UserPreferences.prototype.isGridVisible=function(){return this.gridVisible};UserPreferences.prototype.setGridVisible=function(a){if(this.gridVisible!==a){this.gridVisible=a;this.propertyChangeSupport.firePropertyChange("GRID_VISIBLE",!a,a)}};UserPreferences.prototype.getDefaultFontName=function(){return this.defaultFontName};UserPreferences.prototype.setDefaultFontName=function(b){if(b!=this.defaultFontName){var a=this.defaultFontName;this.defaultFontName=b;this.propertyChangeSupport.firePropertyChange("DEFAULT_FONT_NAME",a,b)}};UserPreferences.prototype.isFurnitureViewedFromTop=function(){return this.furnitureViewedFromTop};UserPreferences.prototype.setFurnitureViewedFromTop=function(a){if(this.furnitureViewedFromTop!==a){this.furnitureViewedFromTop=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_VIEWED_FROM_TOP",!a,a)}};UserPreferences.prototype.getFurnitureModelIconSize=function(){return this.furnitureModelIconSize};UserPreferences.prototype.setFurnitureModelIconSize=function(a){if(a!==this.furnitureModelIconSize){var b=this.furnitureModelIconSize;this.furnitureModelIconSize=a;this.propertyChangeSupport.firePropertyChange("FURNITURE_MODEL_ICON_SIZE",b,a)}};UserPreferences.prototype.isRoomFloorColoredOrTextured=function(){return this.roomFloorColoredOrTextured};UserPreferences.prototype.setFloorColoredOrTextured=function(a){if(this.roomFloorColoredOrTextured!==a){this.roomFloorColoredOrTextured=a;this.propertyChangeSupport.firePropertyChange("ROOM_FLOOR_COLORED_OR_TEXTURED",!a,a)}};UserPreferences.prototype.getWallPattern=function(){return this.wallPattern};UserPreferences.prototype.setWallPattern=function(a){if(this.wallPattern!==a){var b=this.wallPattern;this.wallPattern=a;this.propertyChangeSupport.firePropertyChange("WALL_PATTERN",b,a)}};UserPreferences.prototype.getNewWallPattern=function(){return this.newWallPattern};UserPreferences.prototype.setNewWallPattern=function(a){if(this.newWallPattern!==a){var b=this.newWallPattern;this.newWallPattern=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_PATTERN",b,a)}};UserPreferences.prototype.getNewWallThickness=function(){return this.newWallThickness};UserPreferences.prototype.setNewWallThickness=function(b){if(this.newWallThickness!==b){var a=this.newWallThickness;this.newWallThickness=b;this.propertyChangeSupport.firePropertyChange("NEW_WALL_THICKNESS",a,b)}};UserPreferences.prototype.getNewWallHeight=function(){return this.newWallHeight};UserPreferences.prototype.setNewWallHeight=function(a){if(this.newWallHeight!==a){var b=this.newWallHeight;this.newWallHeight=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_HEIGHT",b,a)}};UserPreferences.prototype.getNewWallBaseboardThickness=function(){return this.newWallBaseboardThickness};UserPreferences.prototype.setNewWallBaseboardThickness=function(b){if(this.newWallBaseboardThickness!==b){var a=this.newWallBaseboardThickness;this.newWallBaseboardThickness=b;this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_THICKNESS",a,b)}};UserPreferences.prototype.getNewWallBaseboardHeight=function(){return this.newWallBaseboardHeight};UserPreferences.prototype.setNewWallBaseboardHeight=function(a){if(this.newWallBaseboardHeight!==a){var b=this.newWallBaseboardHeight;this.newWallBaseboardHeight=a;this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_HEIGHT",b,a)}};UserPreferences.prototype.getNewFloorThickness=function(){return this.newFloorThickness};UserPreferences.prototype.setNewFloorThickness=function(a){if(this.newFloorThickness!==a){var b=this.newFloorThickness;this.newFloorThickness=a;this.propertyChangeSupport.firePropertyChange("NEW_FLOOR_THICKNESS",b,a)}};UserPreferences.prototype.getAutoSaveDelayForRecovery=function(){return this.autoSaveDelayForRecovery};UserPreferences.prototype.setAutoSaveDelayForRecovery=function(b){if(this.autoSaveDelayForRecovery!==b){var a=this.autoSaveDelayForRecovery;this.autoSaveDelayForRecovery=b;this.propertyChangeSupport.firePropertyChange("AUTO_SAVE_DELAY_FOR_RECOVERY",a,b)}};UserPreferences.prototype.getRecentHomes=function(){return Collections.unmodifiableList(this.recentHomes)};UserPreferences.prototype.setRecentHomes=function(b){if(b!=this.recentHomes){var a=this.recentHomes;this.recentHomes=new ArrayList<String>(b);this.propertyChangeSupport.firePropertyChange("RECENT_HOMES",a,this.getRecentHomes())}};UserPreferences.prototype.getRecentHomesMaxCount=function(){return 10};UserPreferences.prototype.getStoredCamerasMaxCount=function(){return 50};UserPreferences.prototype.setActionTipIgnored=function(a){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,a)};UserPreferences.prototype.isActionTipIgnored=function(a){return true};UserPreferences.prototype.resetIgnoredActionTips=function(){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,null)};UserPreferences.prototype.getDefaultTextStyle=function(a){if(a.name=="Room"){return UserPreferences.DEFAULT_ROOM_TEXT_STYLE}else{return UserPreferences.DEFAULT_TEXT_STYLE}};UserPreferences.prototype.getAutoCompletionStrings=function(b){var a=this.autoCompletionStrings.get(b);if(a!==null){return Collections.unmodifiableList(a)}else{return[]}};UserPreferences.prototype.addAutoCompletionString=function(c,b){if(b!==null&&b.length()>0){var a=this.autoCompletionStrings[c];if(a===undefined){a=[]}else{if(!a.contains(b)){a=new ArrayList<String>(a)}else{return}}a.splice(0,0,b);this.setAutoCompletionStrings(c,a)}};UserPreferences.prototype.setAutoCompletionStrings=function(b,c){var a=this.autoCompletionStrings[b];if(c!=a){this.autoCompletionStrings.put(b,c.slice(0));this.propertyChangeSupport.firePropertyChange("AUTO_COMPLETION_STRINGS",null,b)}};UserPreferences.prototype.getAutoCompletedProperties=function(){if(this.autoCompletionStrings!==null){return Object.keys(this.autoCompletionStrings)}else{return Collections.emptyList()}};UserPreferences.prototype.getRecentColors=function(){return this.recentColors};UserPreferences.prototype.setRecentColors=function(a){if(a!=this.recentColors){var b=this.recentColors;this.recentColors=a.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_COLORS",b,this.getRecentColors())}};UserPreferences.prototype.getRecentTextures=function(){return this.recentTextures};UserPreferences.prototype.setRecentTextures=function(b){if(b!=this.recentTextures){var a=this.recentTextures;this.recentTextures=b.slice(0);this.propertyChangeSupport.firePropertyChange("RECENT_TEXTURES",a,this.getRecentTextures())}};UserPreferences.prototype.setHomeExamples=function(a){if(a!=this.homeExamples){var b=this.homeExamples;this.homeExamples=a.slice(0);this.propertyChangeSupport.firePropertyChange("HOME_EXAMPLES",b,this.getHomeExamples())}};UserPreferences.prototype.getHomeExamples=function(){return this.homeExamples};function DefaultUserPreferences(){UserPreferences.call(this);this.setUnit(LengthUnit.CENTIMETER);this.setNavigationPanelVisible(false)}DefaultUserPreferences.prototype=Object.create(UserPreferences.prototype);DefaultUserPreferences.prototype.constructor=DefaultUserPreferences;function HomeRecorder(){}HomeRecorder.READING_HOME="Reading home";HomeRecorder.PARSING_HOME="Parsing home";HomeRecorder.prototype.readHome=function(d,c){c.progression(HomeRecorder.READING_HOME,d,0);var b="Home.xml";if(d.indexOf("jar:")===0){var e=d.indexOf("!/");b=d.substring(e+2);d=d.substring(4,e)}var a=this;ZIPTools.getZIP(d,{zipReady:function(g){try{var h=g.file(b);if(h!==null){a.parseHomeXMLEntry(g.file(b),g,d,c)}else{this.zipError("No "+b+" entry in "+d)}}catch(f){this.zipError(f)}},zipError:function(f){if(c.homeError!==undefined){c.homeError(f)}},progression:function(g,h,f){if(c.progression!==undefined){c.progression(HomeRecorder.READING_HOME,d,f)}}})};HomeRecorder.prototype.parseHomeXMLEntry=function(h,e,f,b){var g=h.asText();b.progression(HomeRecorder.READING_HOME,h.name,1);b.progression(HomeRecorder.PARSING_HOME,h.name,0);var d=this.getHomeXMLHandler();d.homeUrl=f;var a=new SAXParser(d,d,d,d,d);try{g=g.replace(/\'/g,'"');a.parseString(g);b.homeLoaded(d.getHome())}catch(c){b.homeError(c)}b.progression(HomeRecorder.PARSING_HOME,h.name,1)};HomeRecorder.prototype.getHomeXMLHandler=function(){return new HomeXMLHandler()};function Object3DBranch(){BranchGroup3D.call(this)}Object3DBranch.prototype=Object.create(BranchGroup3D.prototype);Object3DBranch.prototype.constructor=Object3DBranch;Object3DBranch.DEFAULT_COLOR=16777215;Object3DBranch.DEFAULT_AMBIENT_COLOR=3355443;Object3DBranch.prototype.getShape=function(b){var c=new java.awt.geom.GeneralPath();c.moveTo(Math.fround(b[0][0]),Math.fround(b[0][1]));for(var a=1;a<b.length;a++){c.lineTo(Math.fround(b[a][0]),Math.fround(b[a][1]))}c.closePath();return c};Object3DBranch.prototype.updateAppearanceMaterial=function(a,d,b,c){if(d!==null){a.setAmbientColor(vec3.fromValues(((b>>>16)&255)/255,((b>>>8)&255)/255,(b&255)/255));a.setDiffuseColor(vec3.fromValues(((d>>>16)&255)/255,((d>>>8)&255)/255,(d&255)/255));a.setSpecularColor(vec3.fromValues(c,c,c));a.setShininess(Math.max(1,c*128))}else{a.setAmbientColor(vec3.fromValues(0.2,0.2,0.2));a.setDiffuseColor(vec3.fromValues(1,1,1));a.setSpecularColor(vec3.fromValues(c,c,c));a.setShininess(Math.max(1,c*128))}};Object3DBranch.prototype.updateTextureTransform=function(b,h,d){var a=h.getWidth();var c=h.getHeight();if(a===-1||c===-1){a=100;c=100}var g=1/h.getScale();var f=mat3.create();mat3.rotate(f,f,h.getAngle());var e=mat3.create();if(d){mat3.scale(e,e,vec2.fromValues(g/a,g/c))}else{mat3.multiplyScalar(e,e,g)}mat3.mul(e,e,f);b.setTextureTransform(e)};Object3DBranch.prototype.getAreaPoints=function(s,a,A,e,K){if(e===undefined&&K===undefined){e=a;K=A;a=null;A=null}var p=[];var v=[];var r=null;var O=null;for(var q=s.getPathIterator(null,e);!q.isDone();q.next()){var t=[0,0];switch((q.currentSegment(t))){case java.awt.geom.PathIterator.SEG_MOVETO:r=[];r.push(t);O=t;break;case java.awt.geom.PathIterator.SEG_LINETO:if(t[0]!==O[0]||t[1]!==O[1]){r.push(t)}O=t;break;case java.awt.geom.PathIterator.SEG_CLOSE:var n=r[0];if(n[0]===O[0]&&n[1]===O[1]){r.splice(r.length-1,1)}if(r.length>2){var E=r;var f=new Room(E);if(f.getArea()>0){var N=f.isClockwise();if(N){v.push(r)}else{p.push(r)}if(a!==null||A!==null){if(N!==K){E=r.slice(0);E.reverse()}if(N){if(A!=null){A.push(E)}}else{if(a!=null){a.push(E)}}}}}break}}var H=[];if((v.length===0)&&a!==null){H.push.apply(H,a)}else{if((p.length===0)&&!(v.length===0)){if(A!==null){A.length=0}}else{var m;var g=[];if(p.length>1){m=[];for(var J=0;p.length!==0;){var w=p[J];var I=0;for(;I<p.length;I++){if(J!==I){var M=p[I];var h=null;for(var G=0;G<g.length;G++){if(g[G].key===M){h=g[G].value;break}}if(h==null){h=new java.awt.geom.Area(this.getShape(M.slice(0)));g.push({key:M,value:h})}if(h.contains(w[0][0],w[0][1])){break}}}if(I===p.length){p.splice(J,1);m.push(w);J=0}else{if(J<p.length){J++}else{J=0}}}}else{m=p}for(var J=m.length-1;J>=0;J--){var B=m[J];var h=null;for(var G=0;G<g.length;G++){if(g[G].key===B){h=g[G].value;break}}if(h===null){h=new java.awt.geom.Area(this.getShape(B.slice(0)))}var C=[];for(var G=0;G<v.length;G++){var D=v[G];if(h.contains(D[0][0],D[0][1])){C.push(D)}}while(C.length!==0){var c=Number.MAX_VALUE;var x=0;var u=0;var L=0;for(var I=0;I<C.length&&c>0;I++){var D=C[I];for(var G=0;G<D.length&&c>0;G++){for(var F=0;F<B.length&&c>0;F++){var o=java.awt.geom.Point2D.distanceSq(D[G][0],D[G][1],B[F][0],B[F][1]);if(o<c){c=o;x=I;u=G;L=F}}}}var d=C[x];if(c!==0){B.splice(L,0,B[L]);B.splice(++L,0,d[u])}var z=d.slice(u,d.length);for(var G=0;G<z.length;G++,L++){B.splice(L,0,z[G])}var y=d.slice(0,u);for(var G=0;G<y.length;G++,L++){B.splice(L,0,y[G])}C.splice(x,1);v.splice(d,1)}}for(var G=0;G<m.length;G++){var b=m[G];if(K){b.reverse()}H.push(b.slice(0))}}}return H};function HomeComponent3D(e,d,c,b,a){this.home=d;this.object3dFactory=b!==null?b:new Object3DBranchFactory();this.homeObjects=[];this.sceneLights=[];this.camera=null;this.windowSizeListener=null;this.cameraChangeListener=null;this.homeCameraListener=null;this.groundChangeListener=null;this.backgroundChangeListener=null;this.lightColorListener=null;this.elevationChangeListener=null;this.wallsAlphaListener=null;this.levelListener=null;this.levelChangeListener=null;this.wallListener=null;this.wallChangeListener=null;this.furnitureListener=null;this.furnitureChangeListener=null;this.roomListener=null;this.roomChangeListener=null;this.labelListener=null;this.labelChangeListener=null;this.approximateHomeBoundsCache=null;this.createComponent3D(e,c,a)}HomeComponent3D.prototype.createComponent3D=function(d,c,a){this.canvas3D=new HTMLCanvas3D(d);if(a){this.addMouseListeners(a,this.canvas3D);if(c!==null){this.navigationPanelId=this.createNavigationPanel(this.home,c,a);this.setNavigationPanelVisible(c.isNavigationPanelVisible());var b=this;c.addPropertyChangeListener("NAVIGATION_PANEL_VISIBLE",function(e){b.setNavigationPanelVisible(e.getNewValue())})}this.createActions(a);this.installKeyboardActions()}this.updateView(this.home.getCamera());this.updateViewPlatformTransform(this.home.getCamera(),false);this.addCameraListeners();this.canvas3D.setScene(this.createSceneTree(true,false))};HomeComponent3D.prototype.disposeGeometries=function(){if(this.home.structure){ModelManager.getInstance().unloadModel(this.home.structure,true)}ModelManager.getInstance().disposeGeometries(this.canvas3D.getScene())};HomeComponent3D.prototype.createNavigationPanel=function(m,h,j){var a=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]);var k=null;var c;try{c=h.getLocalizedString(HomeComponent3D,"navigationPanel.innerHTML")}catch(l){c='<img src="'+ZIPTools.getScriptFolder("gl-matrix-min.js")+'/navigationPanel.png"     style="width: 56px; height:59px; margin:5px; user-drag: none; user-select: none; -moz-user-select: none; -webkit-user-drag: none; -webkit-user-select: none; -ms-user-select: none;"     usemap="#navigationPanelMap"/><map name="navigationPanelMap" id="navigationPanelMap">  <area shape="poly" coords="19,13,28,2,36,13,31,13,31,18,24,18,24,13" data-simulated-key="UP" />  <area shape="poly" coords="3,28,13,20,13,25,18,25,18,32,13,32,13,37" data-simulated-key="LEFT" />  <area shape="poly" coords="24,40,31,40,31,45,36,45,27,55,19,45,24,45" data-simulated-key="DOWN" />  <area shape="poly" coords="37,25,42,25,42,20,52,28,42,37,42,32,37,31" data-simulated-key="RIGHT" />  <area shape="poly" coords="20,28,28,19,35,28" data-simulated-key="PAGE_UP" />  <area shape="poly" coords="20,30,36,30,28,39" data-simulated-key="PAGE_DOWN" /></map>'}var n=this;if(c!==null){k=document.createElement("div");k.setAttribute("id","div"+Math.floor(Math.random()*10000000000));k.style.position="absolute";var b=this.canvas3D.getCanvas();this.windowSizeListener=function(){var i=b.getBoundingClientRect();k.style.left=(i.left+window.pageXOffset)+"px";k.style.top=(i.top+window.pageYOffset)+"px";n.canvas3D.updateViewportSize()};window.addEventListener("resize",this.windowSizeListener);this.windowSizeListener();var e=0;for(var g=this.canvas3D.getCanvas();g&&g.style&&isNaN(e=parseInt(g.style.zIndex));g=g.parentElement){}k.style.zIndex=isNaN(e)?"1":(e+1).toString();k.style.visibility="hidden";k.innerHTML=c;a.push.apply(a,this.getSimulatedKeyElements(k));var d=document.getElementsByTagName("body")[0];d.insertBefore(k,d.firstChild);k.addEventListener("mousedown",function(i){n.userActionsListener.mousePressed(i)})}this.simulatedElementMousePressedListener=function(p){var r=p.target;var i=function(){var s=r.getAttribute("data-simulated-key");n.callAction(s.substring(s.indexOf(":")+1),p)};var q=function(s){window.clearInterval(o);r.removeEventListener("mouseup",q);r.removeEventListener("mouseleave",q);n.userActionsListener.windowMouseReleased(s);s.stopPropagation()};r.addEventListener("mouseup",q);r.addEventListener("mouseleave",q);i();var o=window.setInterval(i,80)};for(var f=0;f<a.length;f++){a[f].addEventListener("mousedown",this.simulatedElementMousePressedListener)}if(k!==null){return k.getAttribute("id")}else{return null}};HomeComponent3D.prototype.getSimulatedKeyElements=function(c){var e=[];if(c.hasChildNodes()){for(var b=0;b<c.childNodes.length;b++){var d=c.childNodes[b];if(d.hasAttribute&&d.hasAttribute("data-simulated-key")){var a=d.getAttribute("data-simulated-key");if(a.indexOf(":")===-1||a.indexOf(this.canvas3D.getCanvas().getAttribute("id")+":")===0){e.push(d)}}e.push.apply(e,this.getSimulatedKeyElements(d))}}return e};HomeComponent3D.prototype.setNavigationPanelVisible=function(a){if(this.navigationPanelId!=null){document.getElementById(this.navigationPanelId).style.visibility=a?"visible":"hidden"}};HomeComponent3D.prototype.getClosestItemAt=function(a,c){var b=this.canvas3D.getClosestShapeAt(a,c);while(b!==null&&!(b instanceof Object3DBranch)){b=b.getParent()}if(b!=null){return b.getUserData()}else{return null}};HomeComponent3D.prototype.removeHomeListeners=function(){this.home.removePropertyChangeListener("CAMERA",this.homeCameraListener);var h=this.home.getEnvironment();h.removePropertyChangeListener("SKY_COLOR",this.backgroundChangeListener);h.removePropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener);h.removePropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener);h.removePropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener);h.removePropertyChangeListener("GROUND_COLOR",this.groundChangeListener);h.removePropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener);h.removePropertyChangeListener("LIGHT_COLOR",this.lightColorListener);h.removePropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener);this.home.getCamera().removePropertyChangeListener(this.cameraChangeListener);this.home.removePropertyChangeListener("CAMERA",this.elevationChangeListener);this.home.getCamera().removePropertyChangeListener(this.elevationChangeListener);this.home.removeLevelsListener(this.levelListener);var k=this.home.getLevels();for(var e=0;e<k.length;e++){k[e].removePropertyChangeListener(this.levelChangeListener)}this.home.removeWallsListener(this.wallListener);var a=this.home.getWalls();for(var e=0;e<a.length;e++){a[e].removePropertyChangeListener(this.wallChangeListener)}this.home.removeFurnitureListener(this.furnitureListener);var g=this.home.getFurniture();for(var e=0;e<g.length;e++){var l=g[e];l.removePropertyChangeListener(this.furnitureChangeListener);if(l instanceof HomeFurnitureGroup){var b=l.getAllFurniture();for(var d=0;d<b.length;d++){b[d].removePropertyChangeListener(this.furnitureChangeListener)}}}this.home.removeRoomsListener(this.roomListener);var c=this.home.getRooms();for(var e=0;e<c.length;e++){c[e].removePropertyChangeListener(this.roomChangeListener)}this.home.removeLabelsListener(this.labelListener);var f=this.home.getLabels();for(var e=0;e<f.length;e++){f[e].removePropertyChangeListener(this.labelChangeListener)}};HomeComponent3D.prototype.removeMouseListeners=function(a){if(this.userActionsListener){if(window.PointerEvent){a.getCanvas().removeEventListener("pointerdown",this.userActionsListener.pointerPressed);a.getCanvas().removeEventListener("mousedown",this.userActionsListener.pointerMousePressed);window.removeEventListener("pointermove",this.userActionsListener.windowPointerMoved);window.removeEventListener("pointerup",this.userActionsListener.windowPointerReleased)}else{a.getCanvas().removeEventListener("touchstart",this.userActionsListener.touchStarted);a.getCanvas().removeEventListener("touchmove",this.userActionsListener.touchMoved);a.getCanvas().removeEventListener("touchend",this.userActionsListener.touchEnded);a.getCanvas().removeEventListener("mousedown",this.userActionsListener.mousePressed);window.removeEventListener("mousemove",this.userActionsListener.windowMouseMoved);window.removeEventListener("mouseup",this.userActionsListener.windowMouseReleased)}a.getCanvas().removeEventListener("DOMMouseScroll",this.userActionsListener.mouseScrolled);a.getCanvas().removeEventListener("mousewheel",this.userActionsListener.mouseWheelMoved)}};HomeComponent3D.prototype.dispose=function(){this.removeHomeListeners();this.removeMouseListeners(this.canvas3D);if(this.navigationPanelId!=null){window.removeEventListener("resize",this.windowSizeListener);var c=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]);for(var b=0;b<c.length;b++){c[b].removeEventListener("mousedown",this.simulatedElementMousePressedListener)}var a=document.getElementById(this.navigationPanelId);a.parentElement.removeChild(a)}this.canvas3D.clear()};HomeComponent3D.prototype.addCameraListeners=function(){var a=this;var b=this.home;this.cameraChangeListener=function(c){setTimeout(function(){if(a.canvas3D){a.updateView(b.getCamera());a.updateViewPlatformTransform(b.getCamera(),true)}},0)};b.getCamera().addPropertyChangeListener(this.cameraChangeListener);this.homeCameraListener=function(c){a.updateView(b.getCamera());a.updateViewPlatformTransform(b.getCamera(),false);c.getOldValue().removePropertyChangeListener(a.cameraChangeListener);b.getCamera().addPropertyChangeListener(a.cameraChangeListener)};this.home.addPropertyChangeListener("CAMERA",this.homeCameraListener)};HomeComponent3D.prototype.updateView=function(i){var f=i.getFieldOfView();if(f===0){f=Math.PI*63/180}this.canvas3D.setFieldOfView(f);var j=2.5;var c=3000;var d=this.getApproximateHomeBounds();if(d!=null&&!d.intersect(vec3.fromValues(i.getX(),i.getY(),i.getZ()))){var a=this.getDistanceToBox(i.getX(),i.getY(),i.getZ(),d);if(!isNaN(a)){j=Math.max(j,0.1*a)}}var h=this.canvas3D.getCanvas().getBoundingClientRect();if(i.getZ()>0&&h.width!==0&&h.height!==0){var e=Math.atan(Math.tan(f/2)*h.height/h.width);var g=i.getPitch()+e;if(g>0){var b=(i.getZ()/Math.sin(g));j=Math.min(j,0.35*b);if(j*c<b){j=b/c}}}this.canvas3D.setFrontClipDistance(j);this.canvas3D.setBackClipDistance(j*c)};HomeComponent3D.prototype.getApproximateHomeBounds=function(){if(this.approximateHomeBoundsCache===null){var f=null;var l=this.home.getFurniture();for(var j=0;j<l.length;j++){var p=l[j];if(p.isVisible()&&(p.getLevel()===null||p.getLevel().isViewable())){var g=Math.max(p.getWidthInPlan(),p.getDepthInPlan())/2;var o=p.getGroundElevation();var d=vec3.fromValues(p.getX()-g,p.getY()-g,o);if(f===null){f=new BoundingBox3D(d,d)}else{f.combine(d)}f.combine(vec3.fromValues(p.getX()+g,p.getY()+g,o+p.getHeightInPlan()))}}var e=this.home.getWalls();for(var j=0;j<e.length;j++){var n=e[j];if(n.getLevel()===null||n.getLevel().isViewable()){var c=vec3.fromValues(n.getXStart(),n.getYStart(),n.getLevel()!==null?n.getLevel().getElevation():0);if(f===null){f=new BoundingBox3D(c,c)}else{f.combine(c)}f.combine(vec3.fromValues(n.getXEnd(),n.getYEnd(),c.z+(n.getHeight()!==null?n.getHeight():this.home.getWallHeight())))}}var h=this.home.getRooms();for(var j=0;j<h.length;j++){var b=h[j];if(b.getLevel()===null||b.getLevel().isViewable()){var a=vec3.fromValues(b.getXCenter(),b.getYCenter(),b.getLevel()!==null?b.getLevel().getElevation():0);if(f===null){f=new BoundingBox3D(a,a)}else{f.combine(a)}}}var k=this.home.getLabels();for(var j=0;j<k.length;j++){var m=k[j];if((m.getLevel()===null||m.getLevel().isViewable())&&m.getPitch()!==null){var a=vec3.fromValues(m.getX(),m.getY(),m.getGroundElevation());if(f==null){f=new BoundingBox3D(a,a)}else{f.combine(a)}}}this.approximateHomeBoundsCache=f}return this.approximateHomeBoundsCache};HomeComponent3D.prototype.getDistanceToBox=function(h,g,f,d){var j=vec3.fromValues(h,g,f);var c=vec3.create();d.getLower(c);var k=vec3.create();d.getUpper(k);var m=[vec3.fromValues(c[0],c[1],c[2]),vec3.fromValues(k[0],c[1],c[2]),vec3.fromValues(c[0],k[1],c[2]),vec3.fromValues(k[0],k[1],c[2]),vec3.fromValues(c[0],c[1],k[2]),vec3.fromValues(k[0],c[1],k[2]),vec3.fromValues(c[0],k[1],k[2]),vec3.fromValues(k[0],k[1],k[2])];var e=new Array(m.length);for(var b=0;b<e.length;b++){e[b]=vec3.squaredDistance(j,m[b])}var l=[this.getDistanceToSide(j,m,e,0,1,3,2,2),this.getDistanceToSide(j,m,e,0,1,5,4,1),this.getDistanceToSide(j,m,e,0,2,6,4,0),this.getDistanceToSide(j,m,e,4,5,7,6,2),this.getDistanceToSide(j,m,e,2,3,7,6,1),this.getDistanceToSide(j,m,e,1,3,7,5,0)];var a=l[0];for(var b=1;b<l.length;b++){a=Math.min(a,l[b])}return a};HomeComponent3D.prototype.getDistanceToSide=function(i,j,k,h,g,e,c,a){switch(a){case 0:if(i[1]<=j[h][1]){if(i[2]<=j[h][2]){return Math.sqrt(k[h])}else{if(i[2]>=j[c][2]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[1]>=j[g][1]){if(i[2]<=j[g][2]){return Math.sqrt(k[g])}else{if(i[2]>=j[e][2]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[2]<=j[h][2]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[2]>=j[c][2]){return this.getDistanceToLine(i,j[e],j[c])}}}}break;case 1:if(i[0]<=j[h][0]){if(i[2]<=j[h][2]){return Math.sqrt(k[h])}else{if(i[2]>=j[c][2]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[0]>=j[g][0]){if(i[2]<=j[g][2]){return Math.sqrt(k[g])}else{if(i[2]>=j[e][2]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[2]<=j[h][2]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[2]>=j[c][2]){return this.getDistanceToLine(i,j[e],j[c])}}}}break;case 2:if(i[0]<=j[h][0]){if(i[1]<=j[h][1]){return Math.sqrt(k[h])}else{if(i[1]>=j[c][1]){return Math.sqrt(k[c])}else{return this.getDistanceToLine(i,j[h],j[c])}}}else{if(i[0]>=j[g][0]){if(i[1]<=j[g][1]){return Math.sqrt(k[g])}else{if(i[1]>=j[e][1]){return Math.sqrt(k[e])}else{return this.getDistanceToLine(i,j[g],j[e])}}}else{if(i[1]<=j[h][1]){return this.getDistanceToLine(i,j[h],j[g])}else{if(i[1]>=j[c][1]){return this.getDistanceToLine(i,j[e],j[c])}}}}break}var d=vec3.fromValues(j[g][0]-j[h][0],j[g][1]-j[h][1],j[g][2]-j[h][2]);var b=vec3.fromValues(j[e][0]-j[h][0],j[e][1]-j[h][1],j[e][2]-j[h][2]);var f=vec3.create();vec3.cross(f,d,b);return Math.abs(vec3.dot(f,vec3.fromValues(j[h][0]-i[0],j[h][1]-i[1],j[h][2]-i[2])))/vec3.length(f)};HomeComponent3D.prototype.getDistanceToLine=function(a,e,d){var f=vec3.fromValues(d[0]-e[0],d[1]-e[1],d[2]-e[2]);var b=vec3.fromValues(a[0]-e[0],a[1]-e[1],a[2]-e[2]);var c=vec3.create();vec3.cross(c,f,b);return vec3.length(c)/vec3.length(f)};HomeComponent3D.prototype.updateViewPlatformTransform=function(b,a){if(a){this.moveCameraWithAnimation(b)}else{delete this.cameraInterpolator;var c=mat4.create();this.computeViewPlatformTransform(c,b.getX(),b.getY(),b.getZ(),b.getYaw(),b.getPitch());this.canvas3D.setViewPlatformTransform(c)}};HomeComponent3D.prototype.moveCameraWithAnimation=function(c){if(this.cameraInterpolator===undefined){this.cameraInterpolator={initialCamera:null,finalCamera:null,alpha:null}}if(this.cameraInterpolator.finalCamera===null||this.cameraInterpolator.finalCamera.getX()!==c.getX()||this.cameraInterpolator.finalCamera.getY()!==c.getY()||this.cameraInterpolator.finalCamera.getZ()!==c.getZ()||this.cameraInterpolator.finalCamera.getYaw()!==c.getYaw()||this.cameraInterpolator.finalCamera.getPitch()!==c.getPitch()){if(this.cameraInterpolator.alpha===null||this.cameraInterpolator.alpha===1){this.cameraInterpolator.initialCamera=new Camera(this.camera.getX(),this.camera.getY(),this.camera.getZ(),this.camera.getYaw(),this.camera.getPitch(),this.camera.getFieldOfView())}else{if(this.cameraInterpolator.alpha<0.3){var b=mat4.create();this.computeViewPlatformTransform(b,this.cameraInterpolator.finalCamera.getX(),this.cameraInterpolator.finalCamera.getY(),this.cameraInterpolator.finalCamera.getZ(),this.cameraInterpolator.finalCamera.getYaw(),this.cameraInterpolator.finalCamera.getPitch());this.canvas3D.setViewPlatformTransform(b);this.cameraInterpolator.initialCamera=this.cameraInterpolator.finalCamera}else{this.cameraInterpolator.initialCamera=new Camera(this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*this.cameraInterpolator.alpha,c.getFieldOfView())}}this.cameraInterpolator.finalCamera=new Camera(c.getX(),c.getY(),c.getZ(),c.getYaw(),c.getPitch(),c.getFieldOfView());if(this.cameraInterpolator.alpha===null){this.cameraInterpolator.animationDuration=75}this.cameraInterpolator.startTime=Date.now();this.cameraInterpolator.alpha=0;var a=this;requestAnimationFrame(function(){a.interpolateUntilAlphaEquals1()})}};HomeComponent3D.prototype.interpolateUntilAlphaEquals1=function(){if(this.cameraInterpolator){var c=Date.now();var d=Math.min(1,(c-this.cameraInterpolator.startTime)/this.cameraInterpolator.animationDuration);if(this.cameraInterpolator.alpha!==d){var b=mat4.create();this.computeTransform(d,b);this.canvas3D.setViewPlatformTransform(b);this.cameraInterpolator.alpha=d}if(this.cameraInterpolator.alpha<1){var a=this;requestAnimationFrame(function(){a.interpolateUntilAlphaEquals1()})}}};HomeComponent3D.prototype.computeTransform=function(b,a){this.computeViewPlatformTransform(a,this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*b,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*b,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*b,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*b,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*b)};HomeComponent3D.prototype.computeViewPlatformTransform=function(a,g,f,d,c,e){var h=mat4.create();mat4.fromYRotation(h,-c+Math.PI);var b=mat4.create();mat4.fromXRotation(b,-e);mat4.mul(h,h,b);mat4.identity(a);mat4.translate(a,a,vec3.fromValues(g,d,f));mat4.mul(a,a,h);this.camera=new Camera(g,f,d,c,e,0)};HomeComponent3D.prototype.addMouseListeners=function(a,d){var b=this;var c={xLastMove:-1,yLastMove:-1,buttonPressed:-1,pointerTouches:{},distanceLastPinch:-1,mousePressed:function(e){c.xLastMove=e.clientX;c.yLastMove=e.clientY;c.buttonPressed=e.button;c.mousePressedInCanvas=true;e.stopPropagation()},windowMouseMoved:function(e){if(c.mousePressedInCanvas){c.moved(e.clientX,e.clientY,e.altKey,e.shiftKey)}},windowMouseReleased:function(e){c.buttonPressed=-1;if(c.mousePressedInCanvas){delete c.mousePressedInCanvas}},pointerPressed:function(e){if(e.pointerType=="mouse"){c.mousePressed(e)}else{c.copyPointerToTargetTouches(e);c.touchStarted(e)}},pointerMousePressed:function(e){e.stopPropagation()},windowPointerMoved:function(e){if(e.pointerType=="mouse"){c.windowMouseMoved(e)}else{c.copyPointerToTargetTouches(e);c.touchMoved(e)}},windowPointerReleased:function(e){if(e.pointerType=="mouse"){c.windowMouseReleased(e)}else{delete c.pointerTouches[e.pointerId];c.touchEnded(e)}},touchStarted:function(e){e.preventDefault();if(e.targetTouches.length==1){c.xLastMove=e.targetTouches[0].pageX;c.yLastMove=e.targetTouches[0].pageY;if(b.home.getCamera()===b.home.getObserverCamera()){c.xLastMove=-c.xLastMove;c.yLastMove=-c.yLastMove}c.buttonPressed=0}else{if(e.targetTouches.length==2){c.distanceLastPinch=c.distance(e.targetTouches[0],e.targetTouches[1])}}},touchMoved:function(g){g.preventDefault();if(g.targetTouches.length==1){if(b.home.getCamera()===b.home.getObserverCamera()){c.moved(-g.targetTouches[0].pageX,-g.targetTouches[0].pageY,false,false)}else{c.moved(g.targetTouches[0].pageX,g.targetTouches[0].pageY,false,false)}}else{if(g.targetTouches.length==2){var f=c.distance(g.targetTouches[0],g.targetTouches[1]);var e=f/c.distanceLastPinch;c.zoomed((1-e)*50,false);c.distanceLastPinch=f}}},touchEnded:function(e){c.buttonPressed=-1},copyPointerToTargetTouches:function(f){c.pointerTouches[f.pointerId]={pageX:f.clientX,pageY:f.clientY};f.targetTouches=[];for(var e in c.pointerTouches){if(c.pointerTouches.hasOwnProperty(e)){f.targetTouches.push(c.pointerTouches[e])}}},distance:function(f,e){return Math.sqrt(Math.pow(e.pageX-f.pageX,2)+Math.pow(e.pageY-f.pageY,2))},moved:function(e,l,i,g){if(c.buttonPressed===0){if(i){var k=1.25*(c.yLastMove-l);if(g){k*=5}a.moveCamera(k)}else{var j=0.005;var h=j*(e-c.xLastMove);if(g){h*=5}a.rotateCameraYaw(h);var f=j*(l-c.yLastMove);a.rotateCameraPitch(f)}c.xLastMove=e;c.yLastMove=l}},mouseScrolled:function(e){c.zoomed(e.detail,e.shiftKey)},mouseWheelMoved:function(e){e.preventDefault();c.zoomed((e.deltaY!==undefined?e.deltaY:-e.wheelDelta)/4,e.shiftKey)},zoomed:function(f,e){var f=-2.5*f;if(e){f*=5}a.moveCamera(f)}};if(window.PointerEvent){d.getCanvas().addEventListener("pointerdown",c.pointerPressed);d.getCanvas().addEventListener("mousedown",c.pointerMousePressed);window.addEventListener("pointermove",c.windowPointerMoved);window.addEventListener("pointerup",c.windowPointerReleased)}else{d.getCanvas().addEventListener("touchstart",c.touchStarted);d.getCanvas().addEventListener("touchmove",c.touchMoved);d.getCanvas().addEventListener("touchend",c.touchEnded);d.getCanvas().addEventListener("mousedown",c.mousePressed);window.addEventListener("mousemove",c.windowMouseMoved);window.addEventListener("mouseup",c.windowMouseReleased)}d.getCanvas().addEventListener("DOMMouseScroll",c.mouseScrolled);d.getCanvas().addEventListener("mousewheel",c.mouseWheelMoved);this.userActionsListener=c};HomeComponent3D.prototype.installKeyboardActions=function(){this.inputMap={"shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","alt shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","shift pressed W":"MOVE_CAMERA_FAST_FORWARD","pressed UP":"MOVE_CAMERA_FORWARD","alt pressed UP":"MOVE_CAMERA_FORWARD","pressed W":"MOVE_CAMERA_FORWARD","shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","alt shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","shift pressed S":"MOVE_CAMERA_FAST_BACKWARD","pressed DOWN":"MOVE_CAMERA_BACKWARD","alt pressed DOWN":"MOVE_CAMERA_BACKWARD","pressed S":"MOVE_CAMERA_BACKWARD","alt shift pressed LEFT":"MOVE_CAMERA_FAST_LEFT","alt pressed LEFT":"MOVE_CAMERA_LEFT","alt shift pressed RIGHT":"MOVE_CAMERA_FAST_RIGHT","alt pressed RIGHT":"MOVE_CAMERA_RIGHT","shift pressed LEFT":"ROTATE_CAMERA_YAW_FAST_LEFT","shift pressed A":"ROTATE_CAMERA_YAW_FAST_LEFT","pressed LEFT":"ROTATE_CAMERA_YAW_LEFT","pressed A":"ROTATE_CAMERA_YAW_LEFT","shift pressed RIGHT":"ROTATE_CAMERA_YAW_FAST_RIGHT","shift pressed D":"ROTATE_CAMERA_YAW_FAST_RIGHT","pressed RIGHT":"ROTATE_CAMERA_YAW_RIGHT","pressed D":"ROTATE_CAMERA_YAW_RIGHT","shift pressed PAGE_UP":"ROTATE_CAMERA_PITCH_FAST_UP","pressed PAGE_UP":"ROTATE_CAMERA_PITCH_UP","shift pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_FAST_DOWN","pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_DOWN","shift pressed HOME":"ELEVATE_CAMERA_FAST_UP","pressed HOME":"ELEVATE_CAMERA_UP","shift pressed END":"ELEVATE_CAMERA_FAST_DOWN","pressed END":"ELEVATE_CAMERA_DOWN"};var a=this;this.canvas3D.getCanvas().addEventListener("keydown",function(b){if(HomeComponent3D.KEY_CODE_TEXTS===undefined){HomeComponent3D.KEY_CODE_TEXTS=new Array(223);HomeComponent3D.KEY_CODE_TEXTS[8]="BACK_SPACE";HomeComponent3D.KEY_CODE_TEXTS[9]="TAB";HomeComponent3D.KEY_CODE_TEXTS[13]="ENTER";HomeComponent3D.KEY_CODE_TEXTS[16]="SHIFT";HomeComponent3D.KEY_CODE_TEXTS[17]="CONTROL";HomeComponent3D.KEY_CODE_TEXTS[18]="ALT";HomeComponent3D.KEY_CODE_TEXTS[19]="PAUSE";HomeComponent3D.KEY_CODE_TEXTS[20]="CAPS_LOCK";HomeComponent3D.KEY_CODE_TEXTS[27]="ESCAPE";HomeComponent3D.KEY_CODE_TEXTS[33]="PAGE_UP";HomeComponent3D.KEY_CODE_TEXTS[34]="PAGE_DOWN";HomeComponent3D.KEY_CODE_TEXTS[35]="END";HomeComponent3D.KEY_CODE_TEXTS[36]="HOME";HomeComponent3D.KEY_CODE_TEXTS[37]="LEFT";HomeComponent3D.KEY_CODE_TEXTS[38]="UP";HomeComponent3D.KEY_CODE_TEXTS[39]="RIGHT";HomeComponent3D.KEY_CODE_TEXTS[40]="DOWN";HomeComponent3D.KEY_CODE_TEXTS[45]="INSERT";HomeComponent3D.KEY_CODE_TEXTS[46]="DELETE";HomeComponent3D.KEY_CODE_TEXTS[48]="0";HomeComponent3D.KEY_CODE_TEXTS[49]="1";HomeComponent3D.KEY_CODE_TEXTS[50]="2";HomeComponent3D.KEY_CODE_TEXTS[51]="3";HomeComponent3D.KEY_CODE_TEXTS[52]="4";HomeComponent3D.KEY_CODE_TEXTS[53]="5";HomeComponent3D.KEY_CODE_TEXTS[54]="6";HomeComponent3D.KEY_CODE_TEXTS[55]="7";HomeComponent3D.KEY_CODE_TEXTS[56]="8";HomeComponent3D.KEY_CODE_TEXTS[57]="9";HomeComponent3D.KEY_CODE_TEXTS[65]="A";HomeComponent3D.KEY_CODE_TEXTS[66]="B";HomeComponent3D.KEY_CODE_TEXTS[67]="C";HomeComponent3D.KEY_CODE_TEXTS[68]="D";HomeComponent3D.KEY_CODE_TEXTS[69]="E";HomeComponent3D.KEY_CODE_TEXTS[70]="F";HomeComponent3D.KEY_CODE_TEXTS[71]="G";HomeComponent3D.KEY_CODE_TEXTS[72]="H";HomeComponent3D.KEY_CODE_TEXTS[73]="I";HomeComponent3D.KEY_CODE_TEXTS[74]="J";HomeComponent3D.KEY_CODE_TEXTS[75]="K";HomeComponent3D.KEY_CODE_TEXTS[76]="L";HomeComponent3D.KEY_CODE_TEXTS[77]="M";HomeComponent3D.KEY_CODE_TEXTS[78]="N";HomeComponent3D.KEY_CODE_TEXTS[79]="O";HomeComponent3D.KEY_CODE_TEXTS[80]="P";HomeComponent3D.KEY_CODE_TEXTS[81]="Q";HomeComponent3D.KEY_CODE_TEXTS[82]="R";HomeComponent3D.KEY_CODE_TEXTS[83]="S";HomeComponent3D.KEY_CODE_TEXTS[84]="T";HomeComponent3D.KEY_CODE_TEXTS[85]="U";HomeComponent3D.KEY_CODE_TEXTS[86]="V";HomeComponent3D.KEY_CODE_TEXTS[87]="W";HomeComponent3D.KEY_CODE_TEXTS[88]="X";HomeComponent3D.KEY_CODE_TEXTS[89]="Y";HomeComponent3D.KEY_CODE_TEXTS[90]="Z";HomeComponent3D.KEY_CODE_TEXTS[91]="META";HomeComponent3D.KEY_CODE_TEXTS[92]="META";HomeComponent3D.KEY_CODE_TEXTS[96]="NUMPAD0";HomeComponent3D.KEY_CODE_TEXTS[97]="NUMPAD1";HomeComponent3D.KEY_CODE_TEXTS[98]="NUMPAD2";HomeComponent3D.KEY_CODE_TEXTS[99]="NUMPAD3";HomeComponent3D.KEY_CODE_TEXTS[100]="NUMPAD4";HomeComponent3D.KEY_CODE_TEXTS[101]="NUMPAD5";HomeComponent3D.KEY_CODE_TEXTS[102]="NUMPAD6";HomeComponent3D.KEY_CODE_TEXTS[103]="NUMPAD7";HomeComponent3D.KEY_CODE_TEXTS[104]="NUMPAD8";HomeComponent3D.KEY_CODE_TEXTS[105]="NUMPAD9";HomeComponent3D.KEY_CODE_TEXTS[106]="MULTIPLY";HomeComponent3D.KEY_CODE_TEXTS[107]="ADD";HomeComponent3D.KEY_CODE_TEXTS[109]="VK_SUBTRACT";HomeComponent3D.KEY_CODE_TEXTS[110]="VK_DECIMAL";HomeComponent3D.KEY_CODE_TEXTS[111]="VK_DIVIDE";HomeComponent3D.KEY_CODE_TEXTS[112]="F1";HomeComponent3D.KEY_CODE_TEXTS[113]="F2";HomeComponent3D.KEY_CODE_TEXTS[114]="F3";HomeComponent3D.KEY_CODE_TEXTS[115]="F4";HomeComponent3D.KEY_CODE_TEXTS[116]="F5";HomeComponent3D.KEY_CODE_TEXTS[117]="F6";HomeComponent3D.KEY_CODE_TEXTS[118]="F7";HomeComponent3D.KEY_CODE_TEXTS[119]="F8";HomeComponent3D.KEY_CODE_TEXTS[120]="F9";HomeComponent3D.KEY_CODE_TEXTS[121]="F10";HomeComponent3D.KEY_CODE_TEXTS[122]="F11";HomeComponent3D.KEY_CODE_TEXTS[123]="F12";HomeComponent3D.KEY_CODE_TEXTS[144]="VK_NUM_LOCK";HomeComponent3D.KEY_CODE_TEXTS[145]="VK_SCROLL_LOCK";HomeComponent3D.KEY_CODE_TEXTS[186]="VK_SEMICOLON";HomeComponent3D.KEY_CODE_TEXTS[187]="VK_EQUALS";HomeComponent3D.KEY_CODE_TEXTS[188]="VK_COMMA";HomeComponent3D.KEY_CODE_TEXTS[190]="VK_PERIOD";HomeComponent3D.KEY_CODE_TEXTS[191]="VK_SLASH";HomeComponent3D.KEY_CODE_TEXTS[219]="VK_OPEN_BRACKET";HomeComponent3D.KEY_CODE_TEXTS[220]="VK_BACK_SLASH";HomeComponent3D.KEY_CODE_TEXTS[221]="VK_CLOSE_BRACKET";HomeComponent3D.KEY_CODE_TEXTS[222]="VK_QUOTE"}a.callAction(HomeComponent3D.KEY_CODE_TEXTS[b.keyCode],b)},false)};HomeComponent3D.prototype.callAction=function(a,b){if(a){var e="";if(b.ctrlKey||a.indexOf("control ")!=-1){e+="control "}if(b.altKey||a.indexOf("alt ")!=-1){e+="alt "}if(b.metaKey||a.indexOf("meta ")!=-1){e+="meta "}if(b.shiftKey||a.indexOf("shift ")!=-1){e+="shift "}e+="pressed "+a.substring(a.lastIndexOf(" ")+1);var d=this.inputMap[e];if(d!==undefined){var c=this.actionMap[d];if(c!==undefined){c.actionPerformed(b)}b.stopPropagation()}}};HomeComponent3D.prototype.createActions=function(a){function f(g){this.delta=g}f.prototype.actionPerformed=function(g){a.moveCamera(this.delta)};function b(g){this.delta=g}b.prototype.actionPerformed=function(g){a.moveCameraSideways(this.delta)};function e(g){this.delta=g}e.prototype.actionPerformed=function(g){a.elevateCamera(this.delta)};function d(g){this.delta=g}d.prototype.actionPerformed=function(g){a.rotateCameraYaw(this.delta)};function c(g){this.delta=g}c.prototype.actionPerformed=function(g){a.rotateCameraPitch(this.delta)};this.actionMap={MOVE_CAMERA_FORWARD:new f(6.5),MOVE_CAMERA_FAST_FORWARD:new f(32.5),MOVE_CAMERA_BACKWARD:new f(-6.5),MOVE_CAMERA_FAST_BACKWARD:new f(-32.5),MOVE_CAMERA_LEFT:new b(-2.5),MOVE_CAMERA_FAST_LEFT:new b(-10),MOVE_CAMERA_RIGHT:new b(2.5),MOVE_CAMERA_FAST_RIGHT:new b(10),ELEVATE_CAMERA_DOWN:new e(-2.5),ELEVATE_CAMERA_FAST_DOWN:new e(-10),ELEVATE_CAMERA_UP:new e(2.5),ELEVATE_CAMERA_FAST_UP:new e(10),ROTATE_CAMERA_YAW_LEFT:new d(-Math.PI/60),ROTATE_CAMERA_YAW_FAST_LEFT:new d(-Math.PI/12),ROTATE_CAMERA_YAW_RIGHT:new d(Math.PI/60),ROTATE_CAMERA_YAW_FAST_RIGHT:new d(Math.PI/12),ROTATE_CAMERA_PITCH_UP:new c(-Math.PI/120),ROTATE_CAMERA_PITCH_FAST_UP:new c(-Math.PI/24),ROTATE_CAMERA_PITCH_DOWN:new c(Math.PI/120),ROTATE_CAMERA_PITCH_FAST_DOWN:new c(Math.PI/24)}};HomeComponent3D.prototype.getActionMap=function(){return this.actionMap};HomeComponent3D.prototype.getInputMap=function(){return this.inputMap};HomeComponent3D.prototype.createSceneTree=function(b,d){var a=new Group3D();a.addChild(this.createBackgroundNode(b,d));var e=this.createGroundNode(-50000,-50000,100000,100000,b,d);a.addChild(e);a.addChild(this.createHomeTree(b,d));this.sceneLights=this.createLights(b);for(var c=0;c<this.sceneLights.length;c++){a.addChild(this.sceneLights[c])}return a};HomeComponent3D.prototype.createBackgroundNode=function(e,f){var j=new Appearance3D();var d=this.createHalfSphereGeometry(true);var b=new Shape3D(d,j);var c=new BranchGroup3D();c.addChild(b);c.addChild(new Shape3D(this.createHalfSphereGeometry(false)));var h=new Appearance3D();var g=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-1,-0.01,-1),vec3.fromValues(-1,-0.01,1),vec3.fromValues(1,-0.01,1),vec3.fromValues(1,-0.01,-1)],[0,1,2,0,2,3],[],[],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),h);c.addChild(g);var a=new Background3D(c);this.updateBackgroundColorAndTexture(j,h,this.home,f);h.setVisible(this.home.getCamera().getZ()>=0);if(e){var i=this;this.backgroundChangeListener=function(k){i.updateBackgroundColorAndTexture(j,h,i.home,f)};i.home.getEnvironment().addPropertyChangeListener("SKY_COLOR",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener);i.home.getEnvironment().addPropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener);this.elevationChangeListener=function(k){if(k.getSource()===i.home){k.getOldValue().removePropertyChangeListener(i.elevationChangeListener);i.home.getCamera().addPropertyChangeListener(i.elevationChangeListener)}if(k.getSource()===i.home||k.getPropertyName()==="Z"){h.setVisible(i.home.getCamera().getZ()>=0)}};this.home.getCamera().addPropertyChangeListener(this.elevationChangeListener);this.home.addPropertyChangeListener("CAMERA",this.elevationChangeListener)}return a};HomeComponent3D.prototype.createHalfSphereGeometry=function(l){var w=48;var q=[];var e=[];var r=[];for(var s=0,n=0;s<w;s++){var b=s*2*Math.PI/w;var g=Math.cos(b);var m=Math.sin(b);var d=(s+1)*2*Math.PI/w;var c=Math.cos(d);var u=Math.sin(d);for(var o=0;o<w/4;o++,n+=4){var v=2*o*Math.PI/w;var t=Math.cos(v);var x=Math.sin(v);var h=o!==0?(l?x:-x):-0.01;var f=2*(o+1)*Math.PI/w;if(!l){f=-f}var a=Math.cos(f);var p=Math.sin(f);q.push(vec3.fromValues(g*t,h,m*t));q.push(vec3.fromValues(c*t,h,u*t));q.push(vec3.fromValues(c*a,p,u*a));q.push(vec3.fromValues(g*a,p,m*a));if(l){e.push(n);e.push(n+1);e.push(n+2);e.push(n);e.push(n+2);e.push(n+3);r.push(vec2.fromValues(s/w,x));r.push(vec2.fromValues((s+1)/w,x));r.push(vec2.fromValues((s+1)/w,p));r.push(vec2.fromValues(s/w,p))}else{e.push(n);e.push(n+2);e.push(n+1);e.push(n);e.push(n+3);e.push(n+2)}}}return new IndexedTriangleArray3D(q,e,r,e,[],[])};HomeComponent3D.prototype.updateBackgroundColorAndTexture=function(h,f,e,d){var g=e.getEnvironment().getSkyColor();h.setDiffuseColor(vec3.fromValues(((g>>>16)&255)/255,((g>>>8)&255)/255,(g&255)/255));var i=e.getEnvironment().getSkyTexture();if(i!==null){TextureManager.getInstance().loadTexture(i.getImage(),0,d,{textureUpdated:function(j){h.setTextureImage(j)},textureError:function(j){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(k,l,j){}})}else{h.setTextureImage(null)}var b=e.getEnvironment().getGroundColor();var c=vec3.fromValues(((b>>>16)&255)/255,((b>>>8)&255)/255,(b&255)/255);f.setDiffuseColor(c);f.setAmbientColor(c);var a=e.getEnvironment().getGroundTexture();if(a!==null){TextureManager.getInstance().loadTexture(a.getImage(),0,d,{textureUpdated:function(j){f.setTextureImage(j);f.setTextureCoordinatesGeneration({planeS:vec4.fromValues(100000,0,0,0),planeT:vec4.fromValues(0,0,100000,0)})},textureError:function(j){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(k,l,j){}})}else{f.setTextureImage(null)}};HomeComponent3D.prototype.createGroundNode=function(g,f,b,c,d,e){if(this.home.structure){var k=new BranchGroup3D();k.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);ModelManager.getInstance().loadModel(this.home.structure,e,{modelUpdated:function(l){k.addChild(l)},modelError:function(l){var m=new Appearance3D();m.setDiffuseColor(vec3.fromValues(1,0,0));k.addChild(new Box3D(10000000,0,10000000,m))},progression:function(){}});this.groundChangeListener=function(l){};return k}else{var j=typeof Ground3D!=="undefined"?new Ground3D(this.home,g,f,b,c,e):new Box3D(10000000,0,10000000,new Appearance3D());var a=mat4.create();mat4.translate(a,a,vec3.fromValues(0,-0.2,0));var i=new TransformGroup3D(a);i.addChild(j);if(d){this.groundChangeListener=function(m){if(!this.updater){var l=this;this.updater=function(){j.update();delete l.updater};setTimeout(this.updater,0)}};var h=this.home.getEnvironment();h.addPropertyChangeListener("GROUND_COLOR",this.groundChangeListener);h.addPropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener)}return i}};HomeComponent3D.prototype.createLights=function(b){var c=[new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(1.5,-0.8,-1)),new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(-1.5,-0.8,-1)),new DirectionalLight3D(vec3.fromValues(0.9,0.9,0.9),vec3.fromValues(0,-0.8,1)),new DirectionalLight3D(vec3.fromValues(0.7,0.7,0.7),vec3.fromValues(0,1,0)),new AmbientLight3D(vec3.fromValues(0.2,0.2,0.2))];for(var d=0;d<c.length-1;d++){c[d].defaultColor=c[d].getColor();this.updateLightColor(c[d])}if(b){var a=this;this.lightColorListener=function(f){for(var e=0;e<c.length-1;e++){a.updateLightColor(c[e])}};this.home.getEnvironment().addPropertyChangeListener("LIGHT_COLOR",this.lightColorListener)}return c};HomeComponent3D.prototype.updateLightColor=function(b){var c=b.defaultColor;var a=this.home.getEnvironment().getLightColor();b.setColor(vec3.fromValues(((a>>>16)&255)/255*c[0],((a>>>8)&255)/255*c[1],(a&255)/255*c[2]))};HomeComponent3D.prototype.createHomeTree=function(g,h){var a=new BranchGroup3D();a.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);var k=this.home.getLabels();for(var f=0;f<k.length;f++){this.addObject(a,k[f],g,h)}var d=this.home.getRooms();for(var f=0;f<d.length;f++){this.addObject(a,d[f],g,h)}var b=this.home.getWalls();for(var f=0;f<b.length;f++){this.addObject(a,b[f],g,h)}var l=this.home.getFurniture();for(var f=0;f<l.length;f++){var n=l[f];if(n instanceof HomeFurnitureGroup){var c=n.getAllFurniture();for(var e=0;e<c.length;e++){var m=c[e];if(!(m instanceof HomeFurnitureGroup)){this.addObject(a,m,g,h)}}}else{this.addObject(a,n,g,h)}}if(g){this.addLevelListener(a);this.addWallListener(a);this.addFurnitureListener(a);this.addRoomListener(a);this.addLabelListener(a);this.addEnvironmentListeners()}return a};HomeComponent3D.prototype.addLevelListener=function(d){var a=this;this.levelChangeListener=function(f){var e=f.getPropertyName();if("ELEVATION"==e||"VISIBLE"==e||"VIEWABLE"==e){a.updateObjects(a.homeObjects.slice(0));a.groundChangeListener(null)}else{if("FLOOR_THICKNESS"==e){a.updateObjects(a.home.getWalls());a.updateObjects(a.home.getRooms())}else{if("HEIGHT"==e){a.updateObjects(a.home.getRooms())}}}};var c=this.home.getLevels();for(var b=0;b<c.length;b++){c[b].addPropertyChangeListener(this.levelChangeListener)}this.levelListener=function(e){var f=e.getItem();switch((e.getType())){case CollectionEvent.Type.ADD:f.addPropertyChangeListener(a.levelChangeListener);break;case CollectionEvent.Type.DELETE:f.removePropertyChangeListener(a.levelChangeListener);break}a.updateObjects(a.home.getRooms())};this.home.addLevelsListener(this.levelListener)};HomeComponent3D.prototype.containsDoorsAndWindows=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){if(this.containsDoorsAndWindows(c[a])){return true}}return false}else{return b.isDoorOrWindow()}};HomeComponent3D.prototype.containsStaircases=function(b){if(b instanceof HomeFurnitureGroup){var c=b.getFurniture();for(var a=0;a<c.length;a++){if(this.containsStaircases(c[a])){return true}}return false}else{return b.getStaircaseCutOutShape()!==null}};HomeComponent3D.prototype.addWallListener=function(d){var a=this;this.wallChangeListener=function(g){var f=g.getPropertyName();if("PATTERN"!=f){var e=g.getSource();a.updateWall(e);a.updateObjects(a.home.getRooms());if(e.getLevel()!=null&&e.getLevel().getElevation()<0){a.groundChangeListener(null)}}};var b=this.home.getWalls();for(var c=0;c<b.length;c++){b[c].addPropertyChangeListener(this.wallChangeListener)}this.wallListener=function(f){var e=f.getItem();switch((f.getType())){case CollectionEvent.Type.ADD:a.addObject(d,e,true,false);e.addPropertyChangeListener(a.wallChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.wallChangeListener);break}a.updateObjects(a.home.getRooms());a.groundChangeListener(null)};this.home.addWallsListener(this.wallListener)};HomeComponent3D.prototype.addFurnitureListener=function(h){var a=this;var f=function(i){a.updateObjects([i]);if(a.containsDoorsAndWindows(i)){a.updateObjects(a.home.getWalls())}else{if(a.containsStaircases(i)){a.updateObjects(a.home.getRooms())}}if(i.getLevel()!==null&&i.getLevel().getElevation()<0){a.groundChangeListener(null)}};this.furnitureChangeListener=function(k){var i=k.getSource();var j=k.getPropertyName();if("X"==j||"Y"==j||"ANGLE"==j||"ROLL"==j||"PITCH"==j||"WIDTH"==j||"DEPTH"==j){f(i)}else{if("HEIGHT"==j||"ELEVATION"==j||"MODEL_MIRRORED"==j||"VISIBLE"==j||"LEVEL"==j){f(i)}else{if("COLOR"==j||"TEXTURE"==j||"MODEL_MATERIALS"==j||"SHININESS"==j||("POWER"==j&&home.getEnvironment().getSubpartSizeUnderLight()>0)){a.updateObjects([i])}}}};var g=this.home.getFurniture();for(var d=0;d<g.length;d++){var e=g[d];if(e instanceof HomeFurnitureGroup){var c=e.getAllFurniture();for(var b=0;b<c.length;b++){c[b].addPropertyChangeListener(this.furnitureChangeListener)}}else{e.addPropertyChangeListener(this.furnitureChangeListener)}}this.furnitureListener=function(n){var m=n.getItem();switch(n.getType()){case CollectionEvent.Type.ADD:if(m instanceof HomeFurnitureGroup){var l=m.getAllFurniture();for(var k=0;k<l.length;k++){var i=l[k];if(!(i instanceof HomeFurnitureGroup)){a.addObject(h,i,true,false);i.addPropertyChangeListener(a.furnitureChangeListener)}}}else{a.addObject(h,m,true,false);m.addPropertyChangeListener(a.furnitureChangeListener)}break;case CollectionEvent.Type.DELETE:if(m instanceof HomeFurnitureGroup){var l=m.getAllFurniture();for(var k=0;k<l.length;k++){var i=l[k];if(!(i instanceof HomeFurnitureGroup)){a.deleteObject(i);i.removePropertyChangeListener(a.furnitureChangeListener)}}}else{a.deleteObject(m);m.removePropertyChangeListener(a.furnitureChangeListener)}break}if(a.containsDoorsAndWindows(m)){a.updateObjects(a.home.getWalls())}else{if(a.containsStaircases(m)){a.updateObjects(a.home.getRooms())}else{approximateHomeBoundsCache=null}}a.groundChangeListener(null)};this.home.addFurnitureListener(this.furnitureListener)};HomeComponent3D.prototype.addRoomListener=function(c){var a=this;this.roomChangeListener=function(o){var p=o.getSource();var m=o.getPropertyName();if("FLOOR_COLOR"==m||"FLOOR_TEXTURE"==m||"FLOOR_SHININESS"==m||"CEILING_COLOR"==m||"CEILING_TEXTURE"==m||"CEILING_SHININESS"==m){a.updateObjects([p])}else{if("FLOOR_VISIBLE"==m||"CEILING_VISIBLE"==m||"LEVEL"==m){a.updateObjects(a.home.getRooms());a.groundChangeListener(null)}else{if("POINTS"==m){if(a.homeObjectsToUpdate!=null){a.updateObjects(a.home.getRooms())}else{a.updateObjects([p]);var f=new java.awt.geom.Area(a.getShape(o.getOldValue()));var n=new java.awt.geom.Area(a.getShape(o.getNewValue()));var j=p.getLevel();var h=a.home.getRooms();for(var k=0;k<h.length;k++){var e=h[k];var q=e.getLevel();if(e!=p&&(q==null||Math.abs(j.getElevation()+j.getHeight()-(q.getElevation()+q.getHeight()))<0.00001||Math.abs(j.getElevation()+j.getHeight()-(q.getElevation()-q.getFloorThickness()))<0.00001)){var l=new java.awt.geom.Area(a.getShape(e.getPoints()));var g=new java.awt.geom.Area(l);g.intersect(n);if(!g.isEmpty()){updateObjects([e])}else{l.intersect(f);if(!l.isEmpty()){updateObjects([e])}}}}}a.groundChangeListener(null)}}}};var d=this.home.getRooms();for(var b=0;b<d.length;b++){d[b].addPropertyChangeListener(this.roomChangeListener)}this.roomListener=function(e){var f=e.getItem();switch((e.getType())){case CollectionEvent.Type.ADD:a.addObject(c,f,e.getIndex(),true,false);f.addPropertyChangeListener(a.roomChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(f);f.removePropertyChangeListener(a.roomChangeListener);break}a.updateObjects(a.home.getRooms());a.groundChangeListener(null)};this.home.addRoomsListener(this.roomListener)};HomeComponent3D.prototype.getShape=function(b){var c=new java.awt.geom.GeneralPath();c.moveTo(b[0][0],b[0][1]);for(var a=1;a<b.length;a++){c.lineTo(b[a][0],b[a][1])}c.closePath();return c};HomeComponent3D.prototype.addLabelListener=function(c){var a=this;this.labelChangeListener=function(f){var e=f.getSource();a.updateObjects([e])};var d=this.home.getLabels();for(var b=0;b<d.length;b++){d[b].addPropertyChangeListener(this.labelChangeListener)}this.labelListener=function(f){var e=f.getItem();switch((f.getType())){case CollectionEvent.Type.ADD:a.addObject(c,e,true,false);e.addPropertyChangeListener(a.labelChangeListener);break;case CollectionEvent.Type.DELETE:a.deleteObject(e);e.removePropertyChangeListener(a.labelChangeListener);break}};this.home.addLabelsListener(this.labelListener)};HomeComponent3D.prototype.addEnvironmentListeners=function(){var a=this;this.wallsAlphaListener=function(b){a.updateObjects(a.home.getWalls());a.updateObjects(a.home.getRooms())};this.home.getEnvironment().addPropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener)};HomeComponent3D.prototype.addObject=function(e,b,c,a,d){if(d===undefined){d=a;a=c;c=-1}var f=this.object3dFactory.createObject3D(this.home,b,d);if(a){b.object3D=f;this.homeObjects.push(b)}if(c===-1){e.addChild(f)}else{e.insertChild(f,c)}return f};HomeComponent3D.prototype.deleteObject=function(a){if(a.object3D){a.object3D.detach();delete a.object3D;this.homeObjects.splice(this.homeObjects.indexOf(a),1)}};HomeComponent3D.prototype.updateObjects=function(c){if(this.homeObjectsToUpdate){for(var b=0;b<c.length;b++){var a=c[b];if(this.homeObjectsToUpdate.indexOf(a)<=-1){this.homeObjectsToUpdate.push(a)}}}else{this.homeObjectsToUpdate=c.slice(0);setTimeout(function(e){for(var f=0;f<e.homeObjectsToUpdate.length;f++){var d=e.homeObjectsToUpdate[f];if(d.object3D){d.object3D.update()}}delete e.homeObjectsToUpdate},0,this)}this.approximateHomeBoundsCache=null};HomeComponent3D.prototype.updateWall=function(b){var a=[];a.push(b);if(b.getWallAtStart()!=null){a.push(b.getWallAtStart())}if(b.getWallAtEnd()!=null){a.push(b.getWallAtEnd())}this.updateObjects(a)};function Object3DBranchFactory(){}Object3DBranchFactory.prototype.createObject3D=function(c,a,b){if(a instanceof HomePieceOfFurniture){return new HomePieceOfFurniture3D(a,c,b)}else{if(a instanceof Wall){return new Wall3D(a,c,b)}else{if(a instanceof Room){return new Room3D(a,c,false,b)}else{if(a instanceof Label){return new Label3D(a,c,b)}else{return new Group3D()}}}}};function HomePieceOfFurniture3D(a,c,b){Object3DBranch.call(this);this.setUserData(a);this.home=c;this.createPieceOfFurnitureNode(a,b)}HomePieceOfFurniture3D.prototype=Object.create(Object3DBranch.prototype);HomePieceOfFurniture3D.prototype.constructor=HomePieceOfFurniture3D;HomePieceOfFurniture3D.DEFAULT_BOX=new Object();HomePieceOfFurniture3D.prototype.createPieceOfFurnitureNode=function(e,f){var b=new TransformGroup3D();b.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);b.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);this.addChild(b);var d=new BranchGroup3D();var a=new TransformGroup3D();a.addChild(this.getModelBox(vec3.fromValues(1,1,1)));d.addChild(a);b.addChild(d);this.updatePieceOfFurnitureTransform();var c=e.getModel();var g=this;ModelManager.getInstance().loadModel(c,f,{modelUpdated:function(j){var i=e.getModelRotation();var h=ModelManager.getInstance().getNormalizedTransformGroup(j,i,1,e.isModelCenteredAtOrigin());g.updatePieceOfFurnitureModelNode(j,h,f)},modelError:function(h){g.updatePieceOfFurnitureModelNode(g.getModelBox(vec3.fromValues(1,0,0)),new TransformGroup3D(),f)},progression:function(){}})};HomePieceOfFurniture3D.prototype.update=function(){this.updatePieceOfFurnitureTransform();this.updatePieceOfFurnitureModelMirrored();this.updatePieceOfFurnitureColorAndTexture(false);this.updatePieceOfFurnitureVisibility()};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureTransform=function(){var a=this.getChild(0);var b=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(this.getUserData(),a.getChild(0));a.setTransform(b)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureColorAndTexture=function(d){var c=this.getUserData();var a=this.getModelNode();var b=a.getChild(0);if(b.getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX){if(c.getColor()!==null){this.setColorAndTexture(a,c.getColor(),null,c.getShininess(),null,false,null,null,[])}else{if(c.getTexture()!==null){this.setColorAndTexture(a,null,c.getTexture(),c.getShininess(),null,d,vec3.fromValues(c.getWidth(),c.getHeight(),c.getDepth()),ModelManager.getInstance().getBounds(b),[])}else{if(c.getModelMaterials()!==null){this.setColorAndTexture(a,null,null,null,c.getModelMaterials(),d,vec3.fromValues(c.getWidth(),c.getHeight(),c.getDepth()),ModelManager.getInstance().getBounds(b),[])}else{this.setColorAndTexture(a,null,null,c.getShininess(),null,false,null,null,[])}}}}};HomePieceOfFurniture3D.prototype.getModelNode=function(){var a=this.getChild(0);var b=a.getChild(0);return b.getChild(0)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureVisibility=function(){var b=this.getUserData();var c=b.isVisible()&&(b.getLevel()===null||b.getLevel().isViewableAndVisible());var a=b.getColor()===null&&b.getTexture()===null?b.getModelMaterials():null;this.setVisible(this.getModelNode(),c,a)};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelMirrored=function(){var a=this.getUserData();this.setCullFace(this.getModelNode(),a.isModelMirrored(),a.isBackFaceShown())};HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelNode=function(b,a,f){a.addChild(b);var d=new BranchGroup3D();d.addChild(a);var e=this.getChild(0);e.removeAllChildren();e.addChild(d);var c=this.getUserData();if(c.isHorizontallyRotated()){this.updatePieceOfFurnitureTransform()}if(c.isBackFaceShown()){this.setBackFaceNormalFlip(this.getModelNode(),true)}this.updatePieceOfFurnitureModelMirrored();this.updatePieceOfFurnitureColorAndTexture(f);this.updatePieceOfFurnitureVisibility();if(c.isDoorOrWindow()){this.setTransparentShapeNotPickable(this)}};HomePieceOfFurniture3D.prototype.getModelBox=function(a){var c=new Appearance3D();c.setDiffuseColor(a);c.setAmbientColor(vec3.scale(vec3.create(),a,0.7));var b=new Box3D(0.5,0.5,0.5,c);b.setUserData(HomePieceOfFurniture3D.DEFAULT_BOX);return b};HomePieceOfFurniture3D.prototype.setColorAndTexture=function(r,t,n,s,c,k,y,d,x){if(r instanceof Group3D){var e=r.getChildren();for(var v=0;v<e.length;v++){this.setColorAndTexture(e[v],t,n,s,c,k,y,d,x)}}else{if(r instanceof Link3D){this.setColorAndTexture(r.getSharedGroup(),t,n,s,c,k,y,d,x)}else{if(r instanceof Shape3D){var b=r;var u=b.getName();var m=b.getAppearance();if(m===null){m=new Appearance3D();r.setAppearance(m)}if(x.indexOf(m)===-1){var a=null;var w=t!==null;var p=!w&&n!==null;var g=!w&&!p&&c!==null&&c.length>0;var j=w||p||g||s!==null;var q=u!==null&&u.indexOf(ModelManager.WINDOW_PANE_SHAPE_PREFIX)===0;if(!q&&j||q&&g){if(m.defaultAppearance===undefined){m.defaultAppearance=m.clone()}a=m.defaultAppearance}var f=0;if(j){f=s!==null?s:(m.getSpecularColor()!==undefined&&m.getShininess()!==undefined?m.getShininess()/128:0)}if(w){if(q){this.restoreDefaultAppearance(m,null)}else{this.updateAppearanceMaterial(m,t,t,f);if(a.getTransparency()!==undefined){m.setTransparency(a.getTransparency())}if(a.getCullFace()!==undefined){m.setCullFace(a.getCullFace())}if(a.getBackFaceNormalFlip()!==undefined){m.setBackFaceNormalFlip(a.getBackFaceNormalFlip())}m.setTextureCoordinatesGeneration(a.getTextureCoordinatesGeneration());m.setTextureImage(null)}}else{if(p){if(q){this.restoreDefaultAppearance(m,null)}else{m.setTextureCoordinatesGeneration(this.getTextureCoordinates(m,n,y,d));this.updateTextureTransform(m,n,true);this.updateAppearanceMaterial(m,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,f);TextureManager.getInstance().loadTexture(n.getImage(),0,k,this.getTextureObserver(m))}}else{if(g){var o=false;for(var v=0;v<c.length;v++){var l=c[v];if(l!==null&&(l.getKey()!=null&&l.getKey()==m.getName()||l.getKey()==null&&l.getName()==m.getName())){if(l.getShininess()!==null){f=l.getShininess()}t=l.getColor();if(t!==null&&(t&4278190080)!=0){this.updateAppearanceMaterial(m,t,t,f);if(a.getTransparency()!==undefined){m.setTransparency(a.getTransparency())}if(a.getCullFace()!==undefined){m.setCullFace(a.getCullFace())}if(a.getBackFaceNormalFlip()!==undefined){m.setBackFaceNormalFlip(a.getBackFaceNormalFlip())}m.setTextureImage(null)}else{if(t===null&&l.getTexture()!==null){var h=l.getTexture();if(this.isTexturesCoordinatesDefined(b)){this.restoreDefaultTextureCoordinatesGeneration(m);this.updateTextureTransform(m,h)}else{m.setTextureCoordinatesGeneration(this.getTextureCoordinates(m,l.getTexture(),y,d));this.updateTextureTransform(m,h,true)}this.updateAppearanceMaterial(m,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,f);var h=l.getTexture();TextureManager.getInstance().loadTexture(h.getImage(),0,k,this.getTextureObserver(m))}else{this.restoreDefaultAppearance(m,l.getShininess())}}o=true;break}}if(!o){this.restoreDefaultAppearance(m,null)}}else{this.restoreDefaultAppearance(m,s)}}}x.push(m)}}}}};HomePieceOfFurniture3D.prototype.getTextureObserver=function(a){return{textureUpdated:function(b){if(TextureManager.getInstance().isTextureTransparent(b)){a.setCullFace(Appearance3D.CULL_NONE)}else{var c=a.defaultAppearance;if(c!==null&&c.getCullFace()!==null){a.setCullFace(c.getCullFace())}}if(a.getTextureImage()!==b){a.setTextureImage(b)}},textureError:function(b){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(c,d,b){}}};HomePieceOfFurniture3D.prototype.getTextureCoordinates=function(g,h,d,k){var e=vec3.create();k.getLower(e);var l=vec3.create();k.getUpper(l);var a=ModelManager.getInstance().getMinimumSize();var i=d[0]/Math.max(l[0]-e[0],a);var j=-e[0]*i;var c=d[1]/Math.max(l[1]-e[1],a);var b=d[2]/Math.max(l[2]-e[2],a);var f=-e[1]*c+l[2]*b;return{planeS:vec4.fromValues(i,0,0,j),planeT:vec4.fromValues(0,c,-b,f)}};HomePieceOfFurniture3D.prototype.isTexturesCoordinatesDefined=function(a){var c=a.getGeometries();for(var b=0,d=c.length;b<d;b++){if(!c[b].hasTextureCoordinates()){return false}}return true};HomePieceOfFurniture3D.prototype.restoreDefaultAppearance=function(a,b){if(a.defaultAppearance!==undefined){var c=a.defaultAppearance;if(c.getAmbientColor()!==undefined){a.setAmbientColor(c.getAmbientColor())}if(c.getDiffuseColor()!==undefined){a.setDiffuseColor(c.getDiffuseColor());a.setSpecularColor(vec3.fromValues(b,b,b));a.setShininess(b*128)}if(c.getTransparency()!==undefined){a.setTransparency(c.getTransparency())}if(a.getCullFace()!==undefined){a.setCullFace(c.getCullFace());a.setBackFaceNormalFlip(c.isBackFaceNormalFlip())}if(c.getTextureCoordinatesGeneration()!==undefined){a.setTextureCoordinatesGeneration(c.getTextureCoordinatesGeneration())}if(a.getTextureImage()!==undefined){a.setTextureImage(c.getTextureImage())}}};HomePieceOfFurniture3D.prototype.restoreDefaultTextureCoordinatesGeneration=function(a){if(a.defaultAppearance!==undefined){var b=a.defaultAppearance;if(b.getTextureCoordinatesGeneration()!==undefined){a.setTextureCoordinatesGeneration(b.getTextureCoordinatesGeneration())}}};HomePieceOfFurniture3D.prototype.setVisible=function(c,b,k){if(c instanceof Group3D){var a=c.getChildren();for(var e=0;e<a.length;e++){this.setVisible(a[e],b,k)}}else{if(c instanceof Link3D){this.setVisible(c.getSharedGroup(),b,k)}else{if(c instanceof Shape3D){var h=c;var f=h.getAppearance();if(f===null){f=new Appearance3D();c.setAppearance(f)}var j=h.getName();if(b&&j!==null&&j.indexOf(ModelManager.LIGHT_SHAPE_PREFIX)===0&&this.home!==null&&!this.isSelected(this.home.getSelectedItems())&&(typeof HomeLight==="undefined"||this.getUserData() instanceof HomeLight)){b=false}if(b&&k!==null){for(var e=0;e<k.length;e++){var g=k[e];if(g!==null&&g.getName()==f.getName()){var d=g.getColor();b=d===null||(d&4278190080)!==0;break}}}f.setVisible(b)}}}};HomePieceOfFurniture3D.prototype.isSelected=function(c){for(var a=0;a<c.length;a++){var b=c[a];if(b===this.getUserData()||(b instanceof HomeFurnitureGroup&&this.isSelected(b.getFurniture()))){return true}}return false};HomePieceOfFurniture3D.prototype.setCullFace=function(f,g,h){if(f instanceof Group3D){var e=f.getChildren();for(var d=0;d<e.length;d++){this.setCullFace(e[d],g,h)}}else{if(f instanceof Link3D){this.setCullFace(f.getSharedGroup(),g,h)}else{if(f instanceof Shape3D){var a=f.getAppearance();if(a===null){a=new Appearance3D();f.setAppearance(a)}if(a.getCullFace()!==Appearance3D.CULL_NONE){var c=a.getCullFace()!==undefined?a.getCullFace():Appearance3D.CULL_BACK;var b=a.defaultCullFace;if(b===undefined){a.defaultCullFace=(b=c)}a.setCullFace((g^h^b===Appearance3D.CULL_FRONT)?Appearance3D.CULL_FRONT:Appearance3D.CULL_BACK)}}}}};HomePieceOfFurniture3D.prototype.setBackFaceNormalFlip=function(d,e){if(d instanceof Group3D){var c=d.getChildren();for(var b=0;b<c.length;b++){this.setBackFaceNormalFlip(c[b],e)}}else{if(d instanceof Link3D){this.setBackFaceNormalFlip(d.getSharedGroup(),e)}else{if(d instanceof Shape3D){var a=d.getAppearance();if(a===null){a=new Appearance3D();d.setAppearance(a)}a.setBackFaceNormalFlip(e^a.getCullFace()===Appearance3D.CULL_FRONT)}}}};HomePieceOfFurniture3D.prototype.setTransparentShapeNotPickable=function(d){if(d instanceof Group3D){var c=d.getChildren();for(var b=0;b<c.length;b++){this.setTransparentShapeNotPickable(c[b])}}else{if(d instanceof Link3D){this.setTransparentShapeNotPickable(d.getSharedGroup())}else{if(d instanceof Shape3D){var a=d.getAppearance();if(a!==null&&a.getTransparency()>0){d.setPickable(false)}}}}};function Wall3D(b,e,d){Object3DBranch.call(this);this.setUserData(b);this.home=e;for(var c=0;c<8;c++){var a=new Group3D();a.addChild(this.createWallPartShape());this.addChild(a)}this.updateWallGeometry(d);this.updateWallAppearance(d)}Wall3D.prototype=Object.create(Object3DBranch.prototype);Wall3D.prototype.constructor=Wall3D;Wall3D.LEVEL_ELEVATION_SHIFT=0.1;Wall3D.FULL_FACE_CUT_OUT_AREA=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(-0.5,0.5,1,1));Wall3D.WALL_LEFT_SIDE=0;Wall3D.WALL_RIGHT_SIDE=1;Wall3D.rotatedModelsFrontAreas=[];Wall3D.prototype.createWallPartShape=function(){var b=new Shape3D();b.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var a=new Appearance3D();b.setAppearance(a);this.updateAppearanceMaterial(a,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);return b};Wall3D.prototype.update=function(){this.updateWallGeometry(false);this.updateWallAppearance(false)};Wall3D.prototype.updateWallGeometry=function(a){this.updateWallSideGeometry(Wall3D.WALL_LEFT_SIDE,a);this.updateWallSideGeometry(Wall3D.WALL_RIGHT_SIDE,a)};Wall3D.prototype.updateWallSideGeometry=function(b,l){var n=this.getUserData();var d;var a;if(b===Wall3D.WALL_LEFT_SIDE){d=n.getLeftSideTexture();a=n.getLeftSideBaseboard()}else{d=n.getRightSideTexture();a=n.getRightSideBaseboard()}var m=[this.getChild(b),this.getChild(b+2),this.getChild(b+4),this.getChild(b+6)];var g=new Array(m.length);var h=new Array(m.length);for(var f=0;f<m.length;f++){g[f]=m[f].getChild(0);h[f]=g[f].getGeometries().length}if(n.getLevel()==null||n.getLevel().isViewableAndVisible()){var o=[[],[],[],[]];this.createWallGeometries(o[0],o[2],o[3],b,null,d,l);if(a!=null){var c=a.getTexture();if(c===null&&a.getColor()===null){c=d}this.createWallGeometries(o[1],o[1],o[1],b,a,c,l)}for(var f=0;f<m.length;f++){for(var e=0;e<o[f].length;e++){var k=o[f][e];if(k!==null){g[f].addGeometry(k)}}}}for(var f=0;f<m.length;f++){for(var e=h[f]-1;e>=0;e--){g[f].removeGeometry(e)}}};Wall3D.prototype.createWallGeometries=function(x,W,N,ai,ag,ae,av){var aw=this.getUserData();var at=this.getShape(aw.getPoints());var af=this.getWallSidePoints(ai);var y=this.getShape(af);var K=ag==null?af:this.getWallBaseboardPoints(ai);var aq=this.getShape(K);var a=new java.awt.geom.Area(aq);var V=ai===Wall3D.WALL_LEFT_SIDE?K[0].slice(0):K[K.length-1].slice(0);var k=this.getWallElevation(ag!==null);var ab;var j;if(ag===null){ab=this.getWallTopElevationAtStart();j=this.getWallTopElevationAtEnd()}else{ab=j=this.getBaseboardTopElevation(ag)}var s=Math.max(ab,j);var O=Math.atan2(aw.getYEnd()-aw.getYStart(),aw.getXEnd()-aw.getXStart());var J=Math.cos(O);var P=Math.sin(O);var ak=J*aw.getXStart()+P*aw.getYStart();var g=J*aw.getXEnd()+P*aw.getYEnd();var R=aw.getArcExtent();var am=R!==null&&R!==0;var u;var b;if(ab===j){u=0;b=ab}else{u=(j-ab)/(g-ak);b=ab-u*ak}var z=[];var t=[];var o=this.getVisibleDoorsAndWindows(this.home.getFurniture());for(var H=0;H<o.length;H++){var an=o[H];var q=an.getGroundElevation();if(q+an.getHeight()>k&&q<s){var d=new java.awt.geom.Area(this.getShape(an.getPoints()));var S=new java.awt.geom.Area(at);S.intersect(d);if(!S.isEmpty()){var l=null;if(an.isParallelToWall(aw)){if(ag!==null){l=an.clone();l.setDepthInPlan(l.getDepth()+2*ag.getThickness())}if(typeof HomeDoorOrWindow!=="undefined"&&an instanceof HomeDoorOrWindow){if(an.isWallCutOutOnBothSides()){if(l===null){l=an.clone()}l.setDepthInPlan(l.getDepth()+4*aw.getThickness())}}}if(l!==null){d=new java.awt.geom.Area(this.getShape(l.getPoints()));S=new java.awt.geom.Area(aq);S.intersect(d)}else{S=new java.awt.geom.Area(y);S.intersect(d)}if(!S.isEmpty()){z.push(new Wall3D.DoorOrWindowArea(S,[an]));t.push(an);a.subtract(d)}}}}if(z.length>1){for(var L=0;L<z.length;L++){var X=z[L];var ar=[];var p=0;for(var H=0;H<z.length;H++){var ac=z[H];if(X.getArea().isEmpty()){break}else{if(p>L){var aj=new java.awt.geom.Area(ac.getArea());aj.intersect(X.getArea());if(!aj.isEmpty()){ac.getArea().subtract(aj);X.getArea().subtract(aj);var m=(X.getDoorsOrWindows().slice(0));m.push.apply(m,ac.getDoorsOrWindows());ar.push(new Wall3D.DoorOrWindowArea(aj,m))}}}p++}z.push.apply(z,ar)}}var G=[];var e=null;for(var B=a.getPathIterator(null);!B.isDone();B.next()){var aa=[0,0];if(B.currentSegment(aa)===java.awt.geom.PathIterator.SEG_CLOSE){if(G.length>2){if(G[0][0]===G[G.length-1][0]&&G[0][1]===G[G.length-1][1]){G.splice(G.length-1,1)}if(G.length>2){var r=G.slice(0);W.push(this.createVerticalPartGeometry(aw,r,k,J,P,u,b,ag,ae,V,ai));x.push(this.createHorizontalPartGeometry(r,k,true,am));N.push(this.createTopPartGeometry(r,J,P,u,b,am))}}G.length=0;e=null}else{if(e===null||aa[0]!==e[0]||aa[1]!==e[1]){G.push(aa);e=aa}}}var U=aw.getLevel();e=null;for(var ap=0;ap<z.length;ap++){var X=z[ap];if(!X.getArea().isEmpty()){for(var B=X.getArea().getPathIterator(null);!B.isDone();B.next()){var aa=[0,0];if(B.currentSegment(aa)===java.awt.geom.PathIterator.SEG_CLOSE){if(G[0][0]===G[G.length-1][0]&&G[0][1]===G[G.length-1][1]){G.splice(G.length-1,1)}if(G.length>2){var r=G.slice(0);var m=X.getDoorsOrWindows();if(m.length>1){m.sort(function(az,ax){var i=az.getGroundElevation();var ay=ax.getGroundElevation();if(i<ay){return -1}else{if(i>ay){return 1}else{return 0}}})}var n=m[0];var C=n.getGroundElevation();if(C>k){if(U!=null&&U.getElevation()!==k&&n.getElevation()<Wall3D.LEVEL_ELEVATION_SHIFT){C-=Wall3D.LEVEL_ELEVATION_SHIFT}W.push(this.createVerticalPartGeometry(aw,r,k,J,P,0,C,ag,ae,V,ai));x.push(this.createHorizontalPartGeometry(r,k,true,am));W.push(this.createHorizontalPartGeometry(r,C,false,am))}for(var H=0;H<m.length-1;){var A=m[H];var T=A.getGroundElevation();var E=m[++H];var Z=E.getGroundElevation();while((T+A.getHeight()>=Z+E.getHeight()&&++H<m.length)){E=m[H]}if(H<m.length&&T+A.getHeight()<Z){W.push(this.createVerticalPartGeometry(aw,r,T+A.getHeight(),J,P,0,Z,ag,ae,V,ai));W.push(this.createHorizontalPartGeometry(r,T+A.getHeight(),true,am));W.push(this.createHorizontalPartGeometry(r,Z,false,am))}}var Q=m[m.length-1];var f=Q.getGroundElevation();for(var H=m.length-2;H>=0;H--){var v=m[H];if(v.getGroundElevation()+v.getHeight()>f+Q.getHeight()){Q=v}}var ad=f+Q.getHeight();var ah=true;for(var H=0;H<r.length;H++){var D=J*r[H][0]+P*r[H][1];var F=u*D+b;if(ad>F){if(u===0||am){ah=false;break}var c=(ad-F)/u;r[H][0]+=(c*J);r[H][1]+=(c*P)}}if(ah){W.push(this.createVerticalPartGeometry(aw,r,ad,J,P,u,b,ag,ae,V,ai));W.push(this.createHorizontalPartGeometry(r,ad,true,am));N.push(this.createTopPartGeometry(r,J,P,u,b,am))}}G.length=0;e=null}else{if(e==null||aa[0]!==e[0]||aa[1]!==e[1]){G.push(aa);e=aa}}}}}if(!am&&t.length>0){var M=Math.PI/720;var au=[];for(var H=0;H<t.length;H++){var v=t[H];if(typeof HomeDoorOrWindow!=="undefined"&&v instanceof HomeDoorOrWindow&&"M0,0 v1 h1 v-1 z"!=v.getCutOutShape()){var al=Math.abs(O-v.getAngle())%(2*Math.PI);if(al<M||al>2*Math.PI-M||Math.abs(al-Math.PI)<M){var h=Math.abs(al-Math.PI)<M?1:-1;var w=Wall3D.getRotatedModelFrontArea(v);if(w!==null&&(au.length===0||!av)){this.createGeometriesSurroundingDoorOrWindow(v,w,h,aw,W,N,K,k,J,P,u,b,ae,V,ai)}else{au.push(v)}}}}if(au.length>0){var I=ModelManager.getInstance();au=au.slice(0);var ao=this;for(var H=0;H<au.length;H++){var Y={doorOrWindow:au[H],modelUpdated:function(aB){var ay=Wall3D.getRotatedModelFrontArea(this.doorOrWindow);var ax;if(ay===null){var az=new TransformGroup3D(I.getRotationTransformation(this.doorOrWindow.getModelRotation()));az.addChild(aB);ax=I.getFrontArea(this.doorOrWindow.getCutOutShape(),az);Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),frontArea:ax})}var i=Math.abs(O-this.doorOrWindow.getAngle())%(2*Math.PI);var aA=Math.abs(i-Math.PI)<M?1:-1;if(av){ao.createGeometriesSurroundingDoorOrWindow(this.doorOrWindow,ax,aA,aw,W,N,K,k,J,P,u,b,ae,V,ai)}else{au.splice(au.indexOf(this.doorOrWindow),1);if(au.length===0&&this.baseboard==null){setTimeout(function(){ao.updateWallSideGeometry(ai,av)},0)}}},modelError:function(i){if(getRotatedModelFrontArea(this.doorOrWindow)===null){Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),frontArea:Wall3D.FULL_FACE_CUT_OUT_AREA})}if(!av){au.splice(au.indexOf(this.doorOrWindow),1)}},progression:function(){}};I.loadModel(au[H].getModel(),av,Y)}}}};Wall3D.getRotatedModelFrontArea=function(c){var a=null;for(var b=0;b<Wall3D.rotatedModelsFrontAreas.length;b++){if(Wall3D.rotatedModelsFrontAreas[b].model===c.getModel()&&Wall3D.areModelRotationsEqual(Wall3D.rotatedModelsFrontAreas[b].modelRotation,c.getModelRotation())){return Wall3D.rotatedModelsFrontAreas[b].frontArea}}return null};Wall3D.areModelRotationsEqual=function(a,d){for(var c=0;c<a.length;c++){for(var b=0;b<d.length;b++){if(a[c][b]!==d[c][b]){return false}}}return true};Wall3D.prototype.getVisibleDoorsAndWindows=function(d){var c=[];for(var a=0;a<d.length;a++){var b=d[a];if(b.isVisible()&&(b.getLevel()==null||b.getLevel().isViewableAndVisible())){if(b instanceof HomeFurnitureGroup){c.push.apply(c,this.getVisibleDoorsAndWindows(b.getFurniture()))}else{if(b.isDoorOrWindow()){c.push(b)}}}}return c};Wall3D.prototype.getWallSidePoints=function(c){var a=this.getUserData();var b=a.getPoints();if(c===Wall3D.WALL_LEFT_SIDE){for(var d=(b.length/2|0);d<b.length;d++){b[d][0]=(b[d][0]+b[b.length-d-1][0])/2;b[d][1]=(b[d][1]+b[b.length-d-1][1])/2}}else{for(var d=0,e=(b.length/2|0);d<e;d++){b[d][0]=(b[d][0]+b[b.length-d-1][0])/2;b[d][1]=(b[d][1]+b[b.length-d-1][1])/2}}return b};Wall3D.prototype.getWallBaseboardPoints=function(c){var a=this.getUserData();var e=a.getPoints$boolean(true);var b=a.getPoints();if(c===Wall3D.WALL_LEFT_SIDE){for(var d=Math.floor(e.length/2);d<e.length;d++){e[d]=b[b.length-d-1]}}else{for(var d=0,f=Math.floor(b.length/2);d<f;d++){e[d]=b[b.length-d-1]}}return e};Wall3D.prototype.createVerticalPartGeometry=function(m,L,ab,D,B,T,q,b,u,ad,ac){var x=this.home.getEnvironment().getSubpartSizeUnderLight();var e=m.getArcExtent();if((e===null||e===0)&&x>0){var M=[];M.push(L[0]);for(var X=1;X<L.length;X++){var z=java.awt.geom.Point2D.distance(L[X-1][0],L[X-1][1],L[X][0],L[X][1])-x/2;var t=Math.atan2(L[X][1]-L[X-1][1],L[X][0]-L[X-1][0]);var C=Math.cos(t);var l=Math.sin(t);for(var aa=0;aa<z;aa+=x){M.push([(L[X-1][0]+aa*C),(L[X-1][1]+aa*l)])}M.push(L[X])}L=M.slice(0)}var a=new Array(L.length);var g=new Array(L.length);var E=new Array(L.length);var k=m.getXStart();var I=m.getYStart();var s=m.getXEnd();var O=m.getYEnd();var W=null;var H=0;var S=0;if(e!==null&&e!==0){W=[m.getXArcCircleCenter(),m.getYArcCircleCenter()];H=java.awt.geom.Point2D.distance(W[0],W[1],k,I);S=Math.fround(Math.atan2(ad[1]-W[1],ad[0]-W[0]))}for(var X=0;X<L.length;X++){a[X]=vec3.fromValues(L[X][0],ab,L[X][1]);var o=this.getWallPointElevation(L[X][0],L[X][1],D,B,T,q);g[X]=vec3.fromValues(L[X][0],o,L[X][1])}var p=new Array(L.length);for(var X=0;X<L.length;X++){if(W===null){p[X]=java.awt.geom.Line2D.ptLineDistSq(k,I,s,O,a[X][0],a[X][2])}else{p[X]=H-java.awt.geom.Point2D.distance(W[0],W[1],a[X][0],a[X][2]);p[X]*=p[X]}}var ae=L.length;var h=new Array(L.length);if(b===null){for(var X=0;X<L.length-1;X++){h[X]=p[X]>0.001||p[X+1]>0.001;if(!h[X]){ae--}}h[h.length-1]=p[0]>0.001||p[L.length-1]>0.001;if(!h[h.length-1]){ae--}if(ae===0){return null}}else{for(var X=0;X<h.length;X++){h[X]=true}}var n=[];for(var G=0;G<L.length;G++){if(h[G]){var K=ab;var w=a[G];var r=(G+1)%L.length;var v=a[r];if(x>0){for(var U=Math.min(g[G][1],g[r][1])-x/2;K<U;K+=x){n.push(w);n.push(v);w=vec3.fromValues(a[G][0],K,a[G][2]);v=vec3.fromValues(a[r][0],K,a[r][2]);n.push(v);n.push(w)}}n.push(w);n.push(v);n.push(g[r]);n.push(g[G])}}var P=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);P.setCoordinates(n.slice(0));if(u!==null){var Q;if(b!==null){Q=m.getThickness()/2+b.getThickness();Q*=Q}else{Q=(m.getThickness()*m.getThickness())/4}var Z=new Array(n.length);var A=vec2.fromValues(0,ab);var V=0;var R=W===null?m.getThickness()/10000:Q/4;for(var G=0;G<L.length;G++){if(h[G]){var r=(G+1)%L.length;var N;var J;if(Math.abs(p[G]-Q)<R&&Math.abs(p[r]-Q)<R){var f;var F;if(W===null){f=java.awt.geom.Point2D.distance(ad[0],ad[1],L[G][0],L[G][1]);F=java.awt.geom.Point2D.distance(ad[0],ad[1],L[r][0],L[r][1])}else{if(E[G]===undefined){var c=Math.fround(Math.atan2(L[G][1]-W[1],L[G][0]-W[0]));c=this.adjustAngleOnReferencePointAngle(c,S,e);E[G]=(c-S)*H}if(E[r]===undefined){var c=Math.fround(Math.atan2(L[r][1]-W[1],L[r][0]-W[0]));c=this.adjustAngleOnReferencePointAngle(c,S,e);E[r]=(c-S)*H}f=E[G];F=E[r]}if(ac===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){f=-f;F=-F}N=vec2.fromValues(f,ab);J=vec2.fromValues(F,ab)}else{N=A;var Y=java.awt.geom.Point2D.distance(L[G][0],L[G][1],L[r][0],L[r][1]);J=vec2.fromValues(Y,ab)}if(x>0){var K=ab;for(var U=Math.min(g[G][1],g[r][1])-x/2;K<U;K+=x){Z[V++]=N;Z[V++]=J;N=vec2.fromValues(N[0],K);J=vec2.fromValues(J[0],K);Z[V++]=J;Z[V++]=N}}Z[V++]=N;Z[V++]=J;Z[V++]=vec2.fromValues(J[0],g[r][1]);Z[V++]=vec2.fromValues(N[0],g[G][1])}}P.setTextureCoordinates(Z)}if(W===null){P.setCreaseAngle(0)}P.setGeneratedNormals(true);return P.getIndexedGeometryArray()};Wall3D.prototype.getWallPointElevation=function(e,g,a,b,c,d){var f=a*e+b*g;return(c*f+d)};Wall3D.prototype.adjustAngleOnReferencePointAngle=function(a,b,c){if(c>0){if((b>0&&(a<0||a<b))||(b<0&&a<b)){a+=2*Math.PI}}else{if((b<0&&(a>0||b<a))||(b>0&&b<a)){a-=2*Math.PI}}return a};Wall3D.prototype.createHorizontalPartGeometry=function(c,g,f,d){var e=new Array(c.length);for(var b=0;b<c.length;b++){e[b]=vec3.fromValues(c[b][0],g,c[b][1])}var a=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);a.setCoordinates(f?e.reverse():e);a.setStripCounts([e.length]);if(d){a.setCreaseAngle(0)}a.setGeneratedNormals(true);return a.getIndexedGeometryArray()};Wall3D.prototype.createTopPartGeometry=function(k,b,g,d,c,l){var j=new Array(k.length);for(var f=0;f<k.length;f++){var h=b*k[f][0]+g*k[f][1];var a=(d*h+c);j[f]=vec3.fromValues(k[f][0],a,k[f][1])}var e=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);e.setCoordinates(j);e.setStripCounts([j.length]);if(l){e.setCreaseAngle(0)}e.setGeneratedNormals(true);return e.getIndexedGeometryArray()};Wall3D.prototype.createGeometriesSurroundingDoorOrWindow=function(N,b,L,n,O,c,v,X,C,A,Y,r,u,ai,ah){var h=new java.awt.geom.Area(Wall3D.FULL_FACE_CUT_OUT_AREA);h.subtract(b);if(!h.isEmpty()){var y=N.getDepth();var k=(N.getX()-L*y/2*Math.sin(N.getAngle()));var t=(N.getY()+L*y/2*Math.cos(N.getAngle()));var aa=ah===Wall3D.WALL_LEFT_SIDE?v[0]:v[v.length-1];var W=ah===Wall3D.WALL_LEFT_SIDE?v[(v.length/2|0)-1]:v[(v.length/2|0)];var I=java.awt.geom.Line2D.ptLineDist(aa[0],aa[1],W[0],W[1],k,t);var R=java.awt.geom.Line2D.relativeCCW(aa[0],aa[1],W[0],W[1],k,t);var S=L*(0.5-R*I/y);var p=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(N);var e=mat4.create();mat4.fromTranslation(e,vec3.fromValues(0,0,S));mat4.mul(p,p,e);var E=mat4.create();mat4.invert(E,p);var w=new java.awt.geom.GeneralPath();var M=vec3.fromValues(aa[0],X,aa[1]);vec3.transformMat4(M,M,E);w.moveTo(M[0],M[1]);M=vec3.fromValues(W[0],X,W[1]);vec3.transformMat4(M,M,E);w.lineTo(M[0],M[1]);var d=vec3.fromValues(W[0],this.getWallPointElevation(W[0],W[1],C,A,Y,r),W[1]);vec3.transformMat4(d,d,E);w.lineTo(d[0],d[1]);var a=vec3.fromValues(aa[0],this.getWallPointElevation(aa[0],aa[1],C,A,Y,r),aa[1]);vec3.transformMat4(a,a,E);w.lineTo(a[0],a[1]);w.closePath();var T=new java.awt.geom.GeneralPath();T.moveTo(-0.5,-0.5);T.lineTo(-0.5,0.5);T.lineTo(0.5,0.5);T.lineTo(0.5,-0.5);T.closePath();var H=new java.awt.geom.Area(T);H.intersect(new java.awt.geom.Area(w));H.subtract(b);var q=0.5/(Math.max(N.getWidth(),N.getHeight()));if(!H.isEmpty()){var ac=L>0!==(ah===Wall3D.WALL_RIGHT_SIDE)!==N.isModelMirrored();var x=this.getAreaPoints(H,q,ac);if(!(x.length===0)){var V=new Array(x.length);var ae=0;for(var ab=0;ab<x.length;ab++){var f=x[ab];V[ab]=f.length+1;ae+=V[ab]}var l=n.getThickness()/2;var F=l*A;var aj=-l*C;if(ah===Wall3D.WALL_LEFT_SIDE){F*=-1;aj*=-1}var m=new Array(ae);var z=([]);var B=([]);var af;var D;if(u!=null){af=new Array(m.length);D=[]}else{af=null;D=null}var ab=0;for(var G=0;G<x.length;G++){var f=x[G];var K=vec3.fromValues(f[0][0],f[0][1],0);vec3.transformMat4(K,K,p);var J=null;if(u!=null){var ad=java.awt.geom.Point2D.distance(ai[0],ai[1],K[0],K[2]);if(ah===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){ad=-ad}J=vec2.fromValues(ad,K[1])}var Q=java.awt.geom.Line2D.ptLineDistSq(d[0],d[1],a[0],a[1],f[0][0],f[0][1]);for(var Z=0;Z<f.length;Z++,ab++){m[ab]=K;if(u!=null){af[ab]=J}var ag=Z<f.length-1?Z+1:0;var o;var g=java.awt.geom.Line2D.ptLineDistSq(d[0],d[1],a[0],a[1],f[ag][0],f[ag][1]);if(Q<1e-10&&g<1e-10){o=B}else{o=z}var s=vec3.fromValues(f[ag][0],f[ag][1],0);vec3.transformMat4(s,s,p);o.push(K);o.push(vec3.fromValues(K[0]+F,K[1],K[2]+aj));o.push(vec3.fromValues(s[0]+F,s[1],s[2]+aj));o.push(s);var P=null;if(u!=null){var ad=java.awt.geom.Point2D.distance(ai[0],ai[1],s[0],s[2]);if(ah===Wall3D.WALL_LEFT_SIDE&&u.isLeftToRightOriented()){ad=-ad}P=vec2.fromValues(ad,s[1]);if(o===z){D.push(J);D.push(J);D.push(P);D.push(P)}}Q=g;K=s;J=P}m[ab]=K;if(u!=null){af[ab]=J}ab++}var U=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);U.setStripCounts(V);U.setCoordinates(m);if(u!==null){U.setTextureCoordinates(af)}U.setGeneratedNormals(true);O.push(U.getIndexedGeometryArray());if(z.length>0){U=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);U.setCoordinates(z.slice(0));if(u!==null){U.setTextureCoordinates(D.slice(0))}U.setCreaseAngle(Math.PI/2);U.setGeneratedNormals(true);O.push(U.getIndexedGeometryArray())}if(B.length>0){U=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);U.setCoordinates(B.slice(0));U.setGeneratedNormals(true);c.push(U.getIndexedGeometryArray())}}}}};Wall3D.prototype.getWallElevation=function(b){var a=this.getUserData();var d=a.getLevel();if(d===null){return 0}else{if(b){return d.getElevation()}else{var c=this.getFloorThicknessBottomWall();if(c>0){c-=Wall3D.LEVEL_ELEVATION_SHIFT}return d.getElevation()-c}}};Wall3D.prototype.getFloorThicknessBottomWall=function(){var a=this.getUserData();var c=a.getLevel();if(c==null){return 0}else{var b=this.home.getLevels();if(!(b.length===0)&&b[0].getElevation()===c.getElevation()){return 0}else{return c.getFloorThickness()}}};Wall3D.prototype.getWallTopElevationAtStart=function(){var a=this.getUserData().getHeight();var b;if(a!==null){b=a+this.getWallElevation(false)+this.getFloorThicknessBottomWall()}else{b=this.home.getWallHeight()+this.getWallElevation(false)+this.getFloorThicknessBottomWall()}return b+this.getTopElevationShift()};Wall3D.prototype.getTopElevationShift=function(){var b=this.getUserData().getLevel();if(b!==null){var a=this.home.getLevels();if(a[a.length-1]!==b){return Wall3D.LEVEL_ELEVATION_SHIFT}}return 0};Wall3D.prototype.getWallTopElevationAtEnd=function(){var a=this.getUserData();if(a.isTrapezoidal()){return a.getHeightAtEnd()+this.getWallElevation(false)+this.getFloorThicknessBottomWall()+this.getTopElevationShift()}else{return this.getWallTopElevationAtStart()}};Wall3D.prototype.getBaseboardTopElevation=function(a){return a.getHeight()+this.getWallElevation(true)};Wall3D.prototype.updateWallAppearance=function(e){var h=this.getUserData();var b=h.getTopColor();var k=[this.getChild(0),this.getChild(2),this.getChild(4),this.getChild(6)];var a=[this.getChild(1),this.getChild(3),this.getChild(5),this.getChild(7)];for(var f=0;f<k.length;f++){if(f===1){var c=h.getLeftSideBaseboard();if(c!=null){var g=c.getTexture();var d=c.getColor();if(d===null&&g===null){g=h.getLeftSideTexture();d=h.getLeftSideColor()}this.updateFilledWallSideAppearance(k[f].getChild(0).getAppearance(),g,e,d,h.getLeftSideShininess())}var j=h.getRightSideBaseboard();if(j!=null){var g=j.getTexture();var d=j.getColor();if(d==null&&g==null){g=h.getRightSideTexture();d=h.getRightSideColor()}this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),g,e,d,h.getRightSideShininess())}}else{if(f!==3||b==null){this.updateFilledWallSideAppearance(k[f].getChild(0).getAppearance(),h.getLeftSideTexture(),e,h.getLeftSideColor(),h.getLeftSideShininess());this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),h.getRightSideTexture(),e,h.getRightSideColor(),h.getRightSideShininess())}else{this.updateFilledWallSideAppearance(k[f].getChild(0).getAppearance(),null,e,b,0);this.updateFilledWallSideAppearance(a[f].getChild(0).getAppearance(),null,e,b,0)}}}};Wall3D.prototype.updateFilledWallSideAppearance=function(g,a,e,c,b){if(a==null){this.updateAppearanceMaterial(g,c,c,b);g.setTextureImage(null)}else{this.updateAppearanceMaterial(g,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,b);this.updateTextureTransform(g,a,true);var d=this;TextureManager.getInstance().loadTexture(a.getImage(),e,{textureUpdated:function(h){g.setTextureImage(h)},textureError:function(h){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(i,j,h){}})}var f=this.home.getEnvironment().getWallsAlpha();g.setTransparency(f)};Wall3D.DoorOrWindowArea=function(a,b){this.area=a;this.doorsOrWindows=b};Wall3D.DoorOrWindowArea.prototype.getArea=function(){return this.area};Wall3D.DoorOrWindowArea.prototype.getDoorsOrWindows=function(){return this.doorsOrWindows};function Room3D(c,d,a,b){Object3DBranch.call(this);if(a===undefined){a=false;b=false}this.setUserData(c);this.home=d;this.addChild(this.createRoomPartShape());this.addChild(this.createRoomPartShape());this.updateRoomGeometry();this.updateRoomAppearance(b);if(a){this.removeChild(Room3D.CEILING_PART)}}Room3D.prototype=Object.create(Object3DBranch.prototype);Room3D.prototype.constructor=Room3D;Room3D.FLOOR_PART=0;Room3D.CEILING_PART=1;Room3D.prototype.createRoomPartShape=function(){var b=new Shape3D();b.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var a=new Appearance3D();b.setAppearance(a);this.updateAppearanceMaterial(a,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);return b};Room3D.prototype.update=function(){this.updateRoomGeometry();this.updateRoomAppearance(false)};Room3D.prototype.updateRoomGeometry=function(){this.updateRoomPartGeometry(Room3D.FLOOR_PART,this.getUserData().getFloorTexture());this.updateRoomPartGeometry(Room3D.CEILING_PART,this.getUserData().getCeilingTexture())};Room3D.prototype.updateRoomPartGeometry=function(a,e){var f=this.getChild(a);var d=f.getGeometries().length;var g=this.getUserData();if(g.getLevel()==null||g.getLevel().isViewableAndVisible()){var c=this.createRoomGeometries(a,e);for(var b=0;b<c.length;b++){f.addGeometry(c[b])}}for(var b=d-1;b>=0;b--){f.removeGeometry(b)}};Room3D.prototype.createRoomGeometries=function(P,n){var A=this.getUserData();var H=A.getPoints();if((P===Room3D.FLOOR_PART&&A.isFloorVisible()||P===Room3D.CEILING_PART&&A.isCeilingVisible())&&H.length>2){var G=A.getLevel();var o=this.home.getLevels();var D=this.isLastLevel(G,o);var q;var m;if(G!=null){m=G.getElevation();q=m-G.getFloorThickness()}else{m=0;q=0}var c;if(o.length===0){c=0}else{c=o[0].getElevation()}var x=P===Room3D.FLOOR_PART&&G!==null&&m!==c;var k=[];var f=[];var J=this.home.getRooms();for(var S=0;S<J.length;S++){var v=J[S];var l=v.getLevel();if(l===null||l.isViewableAndVisible()){if(A===v||G===l&&(P===Room3D.FLOOR_PART&&v.isFloorVisible()||P===Room3D.CEILING_PART&&v.isCeilingVisible())||G!=null&&l!=null&&(P===Room3D.FLOOR_PART&&v.isFloorVisible()&&Math.abs(m-l.getElevation())<0.0001||P===Room3D.CEILING_PART&&v.isCeilingVisible()&&!D&&!this.isLastLevel(l,o)&&Math.abs(m+G.getHeight()-(l.getElevation()+l.getHeight()))<0.0001)){k.push(v)}else{if(x&&l!=null&&v.isCeilingVisible()&&!this.isLastLevel(l,o)&&Math.abs(q-(l.getElevation()+l.getHeight()))<0.0001){f.push(v)}}}}if(G!=null){k.sort(function(Y,j){var i=(Y.getLevel().getElevation()-j.getLevel().getElevation());if(i!==0){return i}else{return Y.getLevel().getElevationIndex()-j.getLevel().getElevationIndex()}})}var s;if(G===null||P===Room3D.CEILING_PART&&D){s=[]}else{s=this.getVisibleStaircases(this.home.getFurniture(),P,G,G.getElevation()===c)}var X=true;if(P===Room3D.CEILING_PART&&(G===null||D)){var z=this.getRoomHeightAt(H[0][0],H[0][1]);for(var S=1;S<H.length&&X;S++){X=this.getRoomHeightAt(H[S][0],H[S][1])===z}}var d;var W;var e;var E;if(!A.isSingular()||X&&(k[k.length-1]!==A||s.length>0)){E=new java.awt.geom.Area(this.getShape(H));if((k.indexOf(A)>=0)){for(var S=k.length-1;S>0&&k[S]!==A;S--){var a=k[S];E.subtract(new java.awt.geom.Area(this.getShape(a.getPoints())))}}this.removeStaircasesFromArea(s,E);d=[];W=[];e=this.getAreaPoints(E,d,W,1,P===Room3D.CEILING_PART)}else{var O=A.isClockwise();if(O&&P===Room3D.FLOOR_PART||!O&&P===Room3D.CEILING_PART){H=this.getReversedArray(H)}e=d=[H];W=[];E=null}var g=[];var r=this.home.getEnvironment().getSubpartSizeUnderLight();if(e.length!==0){var b=[];var y=true;for(var S=0;S<e.length;S++){var K=e[S];var u=new Array(K.length);for(var R=0;R<K.length;R++){u[R]=P===Room3D.FLOOR_PART?m:this.getRoomHeightAt(K[R][0],K[R][1]);if(y&&R>0){y=u[R]===u[R-1]}}b.push(u)}if(y&&r>0){for(var R=0;R<e.length;R++){var K=e[R];var U=Number.MAX_VALUE;var t=Number.MIN_VALUE;var N=Number.MAX_VALUE;var h=Number.MIN_VALUE;for(var S=0;S<K.length;S++){var C=K[S];U=Math.min(U,C[0]);t=Math.max(t,C[0]);N=Math.min(N,C[1]);h=Math.max(h,C[1])}var w=new java.awt.geom.Area(this.getShape(K));for(var I=U;I<t;I+=r){for(var M=N;M<h;M+=r){var V=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(I,M,r,r));V.intersect(w);if(!V.isEmpty()){var B=this.getAreaPoints(V,1,P===Room3D.CEILING_PART);if(!(B.length==0)){g.push(this.computeRoomPartGeometry(B,null,G,b[S][0],q,P===Room3D.FLOOR_PART,false,n))}}}}}}else{g.push(this.computeRoomPartGeometry(e,b,G,m,q,P===Room3D.FLOOR_PART,false,n))}if(G!=null&&P===Room3D.FLOOR_PART&&G.getElevation()!==c){g.push(this.computeRoomBorderGeometry(d,W,G,m,n))}}if(x){var p;if(E!=null||f.length>0){var Q=E!=null?E:new java.awt.geom.Area(this.getShape(H));for(var S=0;S<f.length;S++){var a=f[S];Q.subtract(new java.awt.geom.Area(this.getShape(a.getPoints())))}p=this.getAreaPoints(Q,1,true)}else{p=[this.getReversedArray(H)]}if(p.length!==0){if(r>0){for(var S=0;S<p.length;S++){var F=p[S];var U=Number.MAX_VALUE;var t=Number.MIN_VALUE;var N=Number.MAX_VALUE;var h=Number.MIN_VALUE;for(var R=0;R<F.length;R++){var C=F[R];U=Math.min(U,C[0]);t=Math.max(t,C[0]);N=Math.min(N,C[1]);h=Math.max(h,C[1])}var L=new java.awt.geom.Area(this.getShape(F));for(var I=U;I<t;I+=r){for(var M=N;M<h;M+=r){var T=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(I,M,r,r));T.intersect(L);if(!T.isEmpty()){var B=this.getAreaPoints(T,1,true);if(B.length!==0){g.push(this.computeRoomPartGeometry(B,null,G,m,q,true,true,n))}}}}}}else{g.push(this.computeRoomPartGeometry(p,null,G,m,q,true,true,n))}}}return g.slice(0)}else{return[]}};Room3D.prototype.computeRoomPartGeometry=function(v,t,b,g,u,m,s,h){var c=new Array(v.length);var f=0;for(var r=0;r<v.length;r++){var d=v[r];c[r]=d.length;f+=c[r]}var q=new Array(f);var r=0;for(var o=0;o<v.length;o++){var d=v[o];var a=t!=null?t[o]:null;for(var n=0;n<d.length;n++){var e=s?u:(a!=null?a[n]:g);q[r++]=vec3.fromValues(d[n][0],e,d[n][1])}}var l=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);l.setCoordinates(q);l.setStripCounts(c);if(h!=null){var p=new Array(f);r=0;for(var o=0;o<v.length;o++){var d=v[o];for(var n=0;n<d.length;n++){p[r++]=vec2.fromValues(d[n][0],m?-d[n][1]:d[n][1])}}l.setTextureCoordinates(p)}l.setGeneratedNormals(true);return l.getIndexedGeometryArray()};Room3D.prototype.computeRoomBorderGeometry=function(q,p,r,n,h){var a=0;for(var e=0;e<q.length;e++){a+=q[e].length}for(var e=0;e<p.length;e++){a+=p[e].length}a=a*4;var e=0;var o=new Array(a);var g=n-r.getFloorThickness();for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){o[e++]=vec3.fromValues(k[d][0],n,k[d][1]);o[e++]=vec3.fromValues(k[d][0],g,k[d][1]);var m=d<k.length-1?d+1:0;o[e++]=vec3.fromValues(k[m][0],g,k[m][1]);o[e++]=vec3.fromValues(k[m][0],n,k[m][1])}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){o[e++]=vec3.fromValues(b[d][0],n,b[d][1]);var m=d<b.length-1?d+1:0;o[e++]=vec3.fromValues(b[m][0],n,b[m][1]);o[e++]=vec3.fromValues(b[m][0],g,b[m][1]);o[e++]=vec3.fromValues(b[d][0],g,b[d][1])}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(o);if(h!=null){var l=new Array(a);e=0;for(var f=0;f<q.length;f++){var k=q[f];for(var d=0;d<k.length;d++){l[e++]=vec2.fromValues(0,r.getFloorThickness());l[e++]=vec2.fromValues(0,0);var m=d<k.length-1?d+1:0;var s=java.awt.geom.Point2D.distance(k[d][0],k[d][1],k[m][0],k[m][1]);l[e++]=vec2.fromValues(s,0);l[e++]=vec2.fromValues(s,r.getFloorThickness())}}for(var f=0;f<p.length;f++){var b=p[f];for(var d=0;d<b.length;d++){l[e++]=vec2.fromValues(0,0);var m=d<b.length-1?d+1:0;var s=java.awt.geom.Point2D.distance(b[d][0],b[d][1],b[m][0],b[m][1]);l[e++]=vec2.fromValues(s,0);l[e++]=vec2.fromValues(s,r.getFloorThickness());l[e++]=vec2.fromValues(0,r.getFloorThickness())}}c.setTextureCoordinates(l)}c.setCreaseAngle(Math.PI/8);c.setGeneratedNormals(true);return c.getIndexedGeometryArray()};Room3D.prototype.removeStaircasesFromArea=function(b,d){var a=ModelManager.getInstance();for(var c=0;c<b.length;c++){var e=b[c];d.subtract(a.getAreaOnFloor(e))}};Room3D.prototype.getVisibleStaircases=function(f,b,d,g){var a=[];for(var c=0;c<f.length;c++){var e=f[c];if(e.isVisible()&&(e.getLevel()===null||e.getLevel().isViewableAndVisible())){if(e instanceof HomeFurnitureGroup){a.push.apply(a,this.getVisibleStaircases(e.getFurniture(),b,d,g))}else{if(e.getStaircaseCutOutShape()!=null&&"false"!=e.getStaircaseCutOutShape().toLowerCase()&&((b===Room3D.FLOOR_PART&&e.getGroundElevation()<d.getElevation()&&e.getGroundElevation()+e.getHeight()>=d.getElevation()-(g?0:d.getFloorThickness())||b===Room3D.CEILING_PART&&e.getGroundElevation()<d.getElevation()+d.getHeight()&&e.getGroundElevation()+e.getHeight()>=d.getElevation()+d.getHeight()))){a.push(e)}}}}return a};Room3D.prototype.getReversedArray=function(a){a=a.slice(0);return a.reverse()};Room3D.prototype.getRoomHeightAt=function(p,o){var F=Infinity;var C=this.getUserData();var g=C.getLevel();var n=g!==null?g.getElevation():0;var q=n+(g==null?this.home.getWallHeight():g.getHeight());var h=this.home.getLevels();if(g==null||this.isLastLevel(g,h)){var l=null;var E=null;var A=-1;var D=this.home.getWalls();for(var j=0;j<D.length;j++){var B=D[j];if((B.getLevel()===null||B.getLevel().isViewable())&&B.isAtLevel(g)){var w=B.getPoints();for(var z=0;z<w.length;z++){var d=java.awt.geom.Point2D.distanceSq(w[z][0],w[z][1],p,o);if(d<F){l=B;E=w;A=z;F=d}}}}if(l!=null){q=l.getLevel()==null?0:l.getLevel().getElevation();var s=l.getHeight();if(A===0||A===E.length-1){q+=s!=null?s:this.home.getWallHeight()}else{if(l.isTrapezoidal()){var t=l.getArcExtent();if(t==null||t===0||A===Math.floor(E.length/2)||A===Math.floor(E.length/2)-1){q+=l.getHeightAtEnd()}else{var f=l.getXArcCircleCenter();var r=l.getYArcCircleCenter();var c=E[A][0];var k=E[A][1];var u=java.awt.geom.Point2D.distance(f,r,c,k);var e=l.getXStart();var m=l.getYStart();var b=java.awt.geom.Point2D.distance(f,r,e,m);var a=(c-f)*(e-f)+(k-r)*(m-r);a/=(u*b);var v=Math.acos(a)*(t>0?1:(t<0?-1:0));q+=s+(l.getHeightAtEnd()-s)*v/t}}else{q+=(s!=null?s:this.home.getWallHeight())}}}}return q};Room3D.prototype.isLastLevel=function(b,a){return a.indexOf(b)===a.length-1};Room3D.prototype.updateRoomAppearance=function(c){var b=this.getUserData();var d=b.getLevel()==null||b.getLevel().getElevation()<=0;this.updateRoomPartAppearance(this.getChild(Room3D.FLOOR_PART).getAppearance(),b.getFloorTexture(),c,b.getFloorColor(),b.getFloorShininess(),b.isFloorVisible(),d);var a=b.getLevel()==null;this.updateRoomPartAppearance(this.getChild(Room3D.CEILING_PART).getAppearance(),b.getCeilingTexture(),c,b.getCeilingColor(),b.getCeilingShininess(),b.isCeilingVisible(),a)};Room3D.prototype.updateRoomPartAppearance=function(e,b,f,d,c,h,g){if(b==null){this.updateAppearanceMaterial(e,d,d,c);e.setTextureImage(null)}else{this.updateAppearanceMaterial(e,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,c);this.updateTextureTransform(e,b,true);TextureManager.getInstance().loadTexture(b.getImage(),f,{textureUpdated:function(i){e.setTextureImage(i)},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(j,k,i){}})}if(!g){var a=this.home.getEnvironment().getWallsAlpha();e.setTransparency(a)}e.setVisible(h)};function Ground3D(h,c,b,d,g,f){Object3DBranch.call(this);this.setUserData(h);this.originX=c;this.originY=b;this.width=d;this.depth=g;var a=new Appearance3D();var e=new Shape3D();e.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);e.setAppearance(a);this.addChild(e);this.update(f)}Ground3D.prototype=Object.create(Object3DBranch.prototype);Ground3D.prototype.constructor=Ground3D;Ground3D.prototype.update=function(s){if(s===undefined){s=false}var q=this.getUserData();var e=this.getChild(0);var d=e.getGeometries().length;var y=e.getAppearance();var w=q.getEnvironment().getGroundTexture();if(w===null){var t=q.getEnvironment().getGroundColor();this.updateAppearanceMaterial(y,t,t,0);y.setTextureImage(null)}else{this.updateAppearanceMaterial(y,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0);this.updateTextureTransform(y,w,true);TextureManager.getInstance().loadTexture(w.getImage(),s,{textureUpdated:function(i){y.setTextureImage(i)},textureError:function(i){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(j,k,i){}})}var o=new java.awt.geom.Area();var a=[];var F=q.getRooms();for(var K=0;K<F.length;K++){var A=F[K];var D=A.getLevel();if((D===null||D.isViewable())&&A.isFloorVisible()){var f=A.getPoints();if(f.length>2){var h=new java.awt.geom.Area(this.getShape(f));var g=D!==null&&D.getElevation()<0?this.getUndergroundAreas(a,D):null;if(D===null||(D.getElevation()<=0&&D.isViewableAndVisible())){o.add(h);if(g!==null){g.roomArea.add(h)}}if(g!==null){g.undergroundArea.add(h)}}}}var G=q.getFurniture();for(var K=0;K<G.length;K++){var x=G[K];var n=x.getLevel();if(x.getGroundElevation()<0&&n!==null&&n.isViewable()&&n.getElevation()<0){var g=this.getUndergroundAreas(a,n);if(x.getStaircaseCutOutShape()===null){g.undergroundArea.add(new java.awt.geom.Area(this.getShape(x.getPoints())))}else{g.undergroundArea.add(ModelManager.getInstance().getAreaOnFloor(x))}}}var u=q.getWalls();for(var K=0;K<u.length;K++){var r=u[K];var p=r.getLevel();if(p!==null&&p.isViewable()&&p.getElevation()<0){var g=this.getUndergroundAreas(a,p);g.wallArea.add(new java.awt.geom.Area(this.getShape(r.getPoints())))}}var v=a;for(var K=0;K<v.length;K++){var g=v[K];var b=this.getPoints(g.wallArea);for(var J=0;J<b.length;J++){var E=b[J];if(!new Room(E).isClockwise()){g.undergroundArea.add(new java.awt.geom.Area(this.getShape(E)))}}}v.sort(function(i,j){return -(i.level.getElevation()-j.level.getElevation())});for(var K=0;K<v.length;K++){var g=v[K];var l=g.level;var B=g.undergroundArea;var M=B.clone();g.undergroundSideArea.add(B.clone());for(var J=0;J<v.length;J++){var c=v[J];if(c.level.getElevation()<l.getElevation()){var b=this.getPoints(c.undergroundArea);for(var I=0;I<b.length;I++){var E=b[I];if(!new Room(E).isClockwise()){var N=new java.awt.geom.Area(this.getShape(E));B.subtract(N);g.undergroundSideArea.add(N)}}}}var b=this.getPoints(B);for(var J=0;J<b.length;J++){var E=b[J];if(new Room(E).isClockwise()){var L=new java.awt.geom.Area(this.getShape(E));L.exclusiveOr(M);L.subtract(M);g.upperLevelArea.add(L)}else{o.add(new java.awt.geom.Area(this.getShape(E)))}}}for(var K=0;K<v.length;K++){var g=v[K];var h=g.roomArea;if(h!=null){g.undergroundArea.subtract(h)}}var H=new java.awt.geom.Area(this.getShape([[this.originX,this.originY],[this.originX,this.originY+this.depth],[this.originX+this.width,this.originY+this.depth],[this.originX+this.width,this.originY]]));var C=o.getBounds2D();if(!H.getBounds2D().equals(C)){var z=H;if(o.isEmpty()){C=new java.awt.geom.Rectangle2D.Float(Math.max(-5000,this.originX),Math.max(-5000,this.originY),0,0);C.add(Math.min(5000,this.originX+this.width),Math.min(5000,this.originY+this.depth))}else{C.add(Math.max(C.getMinX()-5000,this.originX),Math.max(C.getMinY()-5000,this.originY));C.add(Math.min(C.getMaxX()+5000,this.originX+this.width),Math.min(C.getMaxY()+5000,this.originY+this.depth))}H=new java.awt.geom.Area(C);z.subtract(H);this.addAreaGeometry(e,w,z,0)}H.subtract(o);v.splice(0,0,new Ground3D.LevelAreas(new Level("Ground",0,0,0),H));var O=0;for(var K=0;K<v.length;K++){var g=v[K];var m=g.level.getElevation();this.addAreaGeometry(e,w,g.undergroundArea,m);if(O-m>0){var b=this.getPoints(g.undergroundSideArea);for(var J=0;J<b.length;J++){var E=b[J];this.addAreaSidesGeometry(e,w,E,m,O-m)}this.addAreaGeometry(e,w,g.upperLevelArea,O)}O=m}for(var K=d-1;K>=0;K--){e.removeGeometry(K)}};Ground3D.prototype.getPoints=function(d){var f=[];var e=[];var a=null;for(var c=d.getPathIterator(null,1);!c.isDone();c.next()){var b=[0,0];if(c.currentSegment(b)===java.awt.geom.PathIterator.SEG_CLOSE){if(e[0][0]===a[0]&&e[0][1]===a[1]){e.splice(e.length-1,1)}if(e.length>2){f.push(e.slice(0))}e.length=0;a=null}else{if(a===null||b[0]!==a[0]||b[1]!==a[1]){e.push(b)}a=b}}return f};Ground3D.prototype.getUndergroundAreas=function(a,d){var c=null;for(var b=0;b<a.length;b++){if(a[b].level===d){c=a[b];break}}if(c===null){a.push(c=new Ground3D.LevelAreas(d))}return c};Ground3D.prototype.addAreaGeometry=function(h,c,b,q){var n=this.getAreaPoints(b,1,false);if(n.length!=0){var a=0;var l=new Array(n.length);for(var f=0;f<l.length;f++){l[f]=n[f].length;a+=l[f]}var k=new Array(a);var m=c!==null?new Array(a):null;var e=0;for(var g=0;g<n.length;g++){var p=n[g];for(var f=0;f<p.length;f++,e++){var o=p[f];k[e]=vec3.fromValues(o[0],q,o[1]);if(c!==null){m[e]=vec2.fromValues(o[0]-this.originX,this.originY-o[1])}}}var d=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);d.setCoordinates(k);if(c!==null){d.setTextureCoordinates(m)}d.setStripCounts(l);d.setCreaseAngle(0);d.setGeneratedNormals(true);h.addGeometry(d.getIndexedGeometryArray())}};Ground3D.prototype.addAreaSidesGeometry=function(f,b,m,o,h){var g=new Array(m.length*4);var k=b!==null?new Array(g.length):null;for(var e=0,d=0;e<m.length;e++){var n=m[e];var l=m[e<m.length-1?e+1:0];g[d++]=vec3.fromValues(n[0],o,n[1]);g[d++]=vec3.fromValues(n[0],o+h,n[1]);g[d++]=vec3.fromValues(l[0],o+h,l[1]);g[d++]=vec3.fromValues(l[0],o,l[1]);if(b!==null){var a=java.awt.geom.Point2D.distance(n[0],n[1],l[0],l[1]);k[d-4]=vec2.fromValues(n[0],o);k[d-3]=vec2.fromValues(n[0],o+h);k[d-2]=vec2.fromValues(n[0]-a,o+h);k[d-1]=vec2.fromValues(n[0]-a,o)}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(g);if(b!==null){c.setTextureCoordinates(k)}c.setCreaseAngle(0);c.setGeneratedNormals(true);f.addGeometry(c.getIndexedGeometryArray())};Ground3D.LevelAreas=function(b,a){if(a===undefined){a=new java.awt.geom.Area()}this.level=b;this.undergroundArea=a;this.roomArea=new java.awt.geom.Area();this.wallArea=new java.awt.geom.Area();this.undergroundSideArea=new java.awt.geom.Area();this.upperLevelArea=new java.awt.geom.Area()};function Label3D(a,c,b){Object3DBranch.call(this);this.setUserData(a);this.update()}Label3D.prototype=Object.create(Object3DBranch.prototype);Label3D.prototype.constructor=Label3D;Label3D.dummyContext=document.createElement("canvas").getContext("2d");Label3D.prototype.update=function(){var j=this.getUserData();var k=j.getPitch();var u=j.getStyle();if(k!=null&&u!=null&&(j.getLevel()==null||j.getLevel().isViewableAndVisible())){var o=j.getText();var t=j.getColor();var x=j.getOutlineColor();if(o!=this.text||(u==null&&this.style!=null)||(u!=null&&!u.equals(this.style))||(t==null&&this.color!=null)||(t!=null&&t!==this.color)){var g="";if(u.isBold()){g="bold "}if(u.isItalic()){g+="italic "}var p=u.getFontName();if(p===null){p="sans-serif"}var q=g+"100px "+p;Label3D.dummyContext.font=q;var f=Label3D.dummyContext.measureText(o);var e=f.width/100*u.getFontSize();if(u.isItalic()){e+=u.getFontSize()*0.15}var a=u.getFontSize();var w=Math.sqrt(e/a);var w=Math.sqrt(e/a);var s;var r;var z;if(w>1){s=Math.ceil(Math.max(255*w,Math.min(e,511*w)));z=s/e;r=Math.ceil(z*a)}else{r=Math.ceil(Math.max(255*w,Math.min(a,511/w)));z=r/a;s=Math.ceil(z*e)}if(s>0&&r>0){var y=document.createElement("canvas");y.width=Appearance3D.getNextHighestPowerOfTwo(s)/2;y.height=Appearance3D.getNextHighestPowerOfTwo(r)/2;y.transparent=true;var d=y.getContext("2d");d.scale(z/100*u.getFontSize()/s*y.width,z/100*u.getFontSize()/r*y.height);d.translate(0,100*0.8);d.font=q;if(t!==null){d.fillStyle="rgb("+((t>>>16)&255)+","+((t>>>8)&255)+","+(t&255)+")"}d.fillText(o,0,0);var c=mat4.create();mat4.scale(c,c,vec3.fromValues(e,1,a));this.baseLineTransform=mat4.create();mat4.fromTranslation(this.baseLineTransform,vec3.fromValues(0,0,a/2-0.8*u.getFontSize()));mat4.mul(this.baseLineTransform,this.baseLineTransform,c);this.texture=y;this.text=o;this.style=u;this.color=t}else{this.clear()}}if(this.texture!==null){if(this.getChildren().length===0){var i=new BranchGroup3D();var l=new TransformGroup3D();l.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);i.addChild(l);var n=new Appearance3D();this.updateAppearanceMaterial(n,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0);n.setCullFace(Appearance3D.CULL_NONE);n.setTextureCoordinatesGeneration({planeS:vec4.fromValues(1,0,0,0.5),planeT:vec4.fromValues(0,1,-1,0.5)});var b=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-0.5,0,-0.5),vec3.fromValues(-0.5,0,0.5),vec3.fromValues(0.5,0,0.5),vec3.fromValues(0.5,0,-0.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),n);l.addChild(b);this.addChild(i)}var l=this.getChild(0).getChild(0);var v=mat4.create();mat4.fromXRotation(v,k);mat4.mul(v,v,this.baseLineTransform);var h=mat4.create();mat4.fromYRotation(h,-j.getAngle());mat4.mul(h,h,v);var m=mat4.create();mat4.fromTranslation(m,vec3.fromValues(j.getX(),j.getGroundElevation(),j.getY()));mat4.mul(m,m,h);l.setTransform(m);l.getChild(0).getAppearance().setTextureImage(this.texture)}}else{this.clear()}};Label3D.prototype.clear=function(){this.removeAllChildren();this.text=null;this.style=null;this.color=null;this.texture=null;this.baseLineTransform=null};function TextureManager(){this.loadedTextureImages={};this.loadingTextureObservers={}}TextureManager.READING_TEXTURE="Reading texture";TextureManager.instance=null;TextureManager.getInstance=function(){if(TextureManager.instance==null){TextureManager.instance=new TextureManager()}return TextureManager.instance};TextureManager.prototype.clear=function(){this.loadedTextureImages={};this.loadingTextureObservers={}};TextureManager.prototype.loadTexture=function(d,g,b,c){if(b===undefined){c=g;g=0;b=false}else{if(c===undefined){c=b;b=false}}var f=d.getURL();if(f in this.loadedTextureImages){c.textureUpdated(this.loadedTextureImages[f])}else{if(f in this.loadingTextureObservers){this.loadingTextureObservers[f].push(c)}else{var e=[];e.push(c);this.loadingTextureObservers[f]=e;var a=this;this.load(f,b,{textureLoaded:function(h){var k=a.loadingTextureObservers[f];if(k){delete a.loadingTextureObservers[f];a.loadedTextureImages[f]=h;for(var j=0;j<k.length;j++){k[j].textureUpdated(h)}}},textureError:function(j){var k=a.loadingTextureObservers[f];if(k){delete a.loadingTextureObservers[f];for(var h=0;h<k.length;h++){k[h].textureError(j)}}},progression:function(j,l,h){var m=a.loadingTextureObservers[f];if(m){for(var k=0;k<m.length;k++){m[k].progression(j,l,h)}}}})}}};TextureManager.prototype.load=function(b,a,d){d.progression(TextureManager.READING_TEXTURE,b,0);var h=new Image();h.url=b;var e=function(j){h.removeEventListener("load",i);h.removeEventListener("error",e);d.textureError("Can't load "+b)};var i=function(){h.removeEventListener("load",i);h.removeEventListener("error",e);d.progression(TextureManager.READING_TEXTURE,b,1);d.textureLoaded(h)};if(b.indexOf("jar:")===0){var g=b.indexOf("!/");var c=decodeURIComponent(b.substring(g+2));var f=b.substring(4,g);ZIPTools.getZIP(f,a,{zipReady:function(l){try{h.addEventListener("load",i);h.addEventListener("error",e);var j=l.file(c);var n=j.asBinary();var m=btoa(n);h.transparent=ZIPTools.isTranparentImage(n);h.src="data:image;base64,"+m;if(h.width!==0){i()}}catch(k){this.zipError(k)}},zipError:function(j){if(d.textureError!==undefined){d.textureError("Can't load "+f)}},progression:function(k,l,j){if(d.progression!==undefined){d.progression(k,l,j)}}})}else{h.addEventListener("load",i);h.addEventListener("error",e);h.src=b;if(h.width!==0){h.removeEventListener("load",i);h.removeEventListener("error",e);d.progression(TextureManager.READING_TEXTURE,b,1);d.textureLoaded(h)}}};TextureManager.prototype.isTextureTransparent=function(a){return a.transparent===true};TextureManager.prototype.getRotatedTextureWidth=function(a){var b=a.getAngle();if(b!==0){return Math.round(Math.abs(a.getWidth()*Math.cos(b))+Math.abs(a.getHeight()*Math.sin(b)))}else{return a.getWidth()}};TextureManager.prototype.getRotatedTextureHeight=function(a){var b=a.getAngle();if(b!==0){return Math.round(Math.abs(a.getWidth()*Math.sin(b))+Math.abs(a.getHeight()*Math.cos(b)))}else{return a.getHeight()}};TextureManager.prototype.getErrorImage=function(){if(TextureManager.errorImage===undefined){var b=document.createElement("canvas");b.width=2;b.height=2;var c=b.getContext("2d");c.fillStyle="#FF0000";c.fillRect(0,0,2,2);var d=b.toDataURL();var a=new Image();a.url=d;a.src=d;TextureManager.errorImage=a}return TextureManager.errorImage};function viewHome(e,c,a,b,d){return new HomePreviewComponent(e,c,a,b,d)}function viewHomeInOverlay(f,s){var g=4/3;if(s&&s.widthByHeightRatio){g=s.widthByHeightRatio}hideHomeOverlay();var o=document.createElement("div");o.setAttribute("id","viewerOverlay");o.style.position="absolute";o.style.left="0";o.style.top="0";o.style.zIndex="100";o.style.background="rgba(127, 127, 127, .5)";var m=document.getElementsByTagName("body").item(0);m.insertBefore(o,m.firstChild);var v=document.createElement("div");var l='<canvas id="viewerCanvas" class="viewerComponent"  style="background-color: #CCCCCC; border: 1px solid gray; position: absolute; outline: none; touch-action: none" tabIndex="1"></canvas><div id="viewerProgressDiv" style="position:absolute; width: 300px; background-color: rgba(128, 128, 128, 0.7); padding: 20px; border-radius: 25px">  <progress id="viewerProgress"  class="viewerComponent" value="0" max="200" style="width: 300px;"></progress>  <label id="viewerProgressLabel" class="viewerComponent" style="margin-top: 2px; margin-left: 10px; margin-right: 0px; display: block;"></label></div>';if(s&&(s.aerialViewButtonText&&s.virtualVisitButtonText||s.viewerControlsAdditionalHTML)){l+='<div id="viewerControls" style="position: absolute; padding: 10px; padding-top: 5px">';if(s.aerialViewButtonText&&s.virtualVisitButtonText){l+='   <input  id="aerialView" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>      <label class="viewerComponent" for="aerialView" style="visibility: hidden;">'+s.aerialViewButtonText+'</label>   <input  id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;">      <label class="viewerComponent" for="virtualVisit" style="visibility: hidden;">'+s.virtualVisitButtonText+'</label>   <select id="levelsAndCameras" class="viewerComponent" style="visibility: hidden;"></select>'}if(s.viewerControlsAdditionalHTML){l+=s.viewerControlsAdditionalHTML}l+="</div>"}v.innerHTML=l;o.appendChild(v);var i=new Image();i.src=ZIPTools.getScriptFolder("jszip.min.js")+"/close.png";i.style.position="absolute";o.appendChild(i);o.escKeyListener=function(x){if(x.keyCode===27){hideHomeOverlay()}};window.addEventListener("keydown",o.escKeyListener);i.addEventListener("click",hideHomeOverlay);var t={mousePressed:function(x){t.mousePressedInOverlay=true},mouseClicked:function(x){if(t.mousePressedInOverlay){delete t.mousePressedInOverlay;hideHomeOverlay()}}};o.addEventListener("mousedown",t.mousePressed);o.addEventListener("click",t.mouseClicked);o.addEventListener("touchmove",function(x){x.preventDefault()});var w=self.innerWidth;var k=self.innerHeight;var u=document.documentElement.clientWidth;var j=document.documentElement.clientHeight;if(m&&m.scrollWidth){if(m.scrollWidth>u){u=m.scrollWidth}if(m.scrollHeight>j){j=m.scrollHeight}}var d=self.pageXOffset?self.pageXOffset:0;var b=self.pageYOffset?self.pageYOffset:0;o.style.height=Math.max(j,k)+"px";o.style.width=u<=w?"100%":u+"px";o.style.display="block";var e=document.getElementById("viewerCanvas");if(w<k*g){e.width=0.9*w;e.height=0.9*w/g}else{e.height=0.9*k;e.width=0.9*k*g}e.style.width=e.width+"px";e.style.height=e.height+"px";var q=d+(w-e.width-10)/2;e.style.left=q+"px";var r=b+(k-e.height-10)/2;e.style.top=r+"px";i.style.left=(q+e.width-5)+"px";i.style.top=(r-10)+"px";var p=document.getElementById("viewerControls");if(p){p.style.left=(q-10)+"px";p.style.top=(r+e.height)+"px";p.addEventListener("mousedown",function(x){x.stopPropagation()})}var h=document.getElementById("viewerProgressDiv");h.style.left=(q+(e.width-300)/2)+"px";h.style.top=(r+(e.height-50)/2)+"px";h.style.visibility="visible";var a=function(y){hideHomeOverlay();if(y=="No WebGL"){var x="Sorry, your browser doesn't support WebGL.";if(s.noWebGLSupportError){x=s.noWebGLSupportError}alert(x)}else{if(typeof y==="string"&&y.indexOf("No Home.xml entry")==0){var x="Ensure your home file was saved with Sweet Home 3D 5.3 or a newer version.";if(s.missingHomeXmlEntryError){x=s.missingHomeXmlEntryError}alert(x)}else{console.log(y.stack);alert("Error: "+(y.message?y.constructor.name+" "+y.message:y))}}};var n=function(z,A,x){var y=document.getElementById("viewerProgress");if(y){var B=null;if(z===HomeRecorder.READING_HOME){y.value=x*100;A=A.substring(A.lastIndexOf("/")+1);B=s&&s.readingHomeText?s.readingHomeText:z}else{if(z===ModelLoader.READING_MODEL){y.value=100+x*100;if(x===1){document.getElementById("viewerProgressDiv").style.visibility="hidden"}B=s&&s.readingModelText?s.readingModelText:z}}if(B!==null){document.getElementById("viewerProgressLabel").innerHTML=(x?Math.floor(x*100)+"% ":"")+B+" "+A}}};var c=HomePreviewComponent;if(s){if(s.homePreviewComponentContructor){c=s.homePreviewComponentContructor}if(s.aerialViewButtonText&&s.virtualVisitButtonText){e.homePreviewComponent=new c("viewerCanvas",f,a,n,{roundsPerMinute:s.roundsPerMinute,navigationPanel:s.navigationPanel,aerialViewButtonId:"aerialView",virtualVisitButtonId:"virtualVisit",levelsAndCamerasListId:"levelsAndCameras",level:s.level,selectableLevels:s.selectableLevels,camera:s.camera,selectableCameras:s.selectableCameras,activateCameraSwitchKey:s.activateCameraSwitchKey})}else{e.homePreviewComponent=new c("viewerCanvas",f,a,n,{roundsPerMinute:s.roundsPerMinute,navigationPanel:s.navigationPanel})}}else{e.homePreviewComponent=new c("viewerCanvas",f,a,n)}}function hideHomeOverlay(){var b=document.getElementById("viewerOverlay");if(b){var a=document.getElementById("viewerCanvas");if(a.homePreviewComponent){a.homePreviewComponent.dispose()}ModelManager.getInstance().clear();TextureManager.getInstance().clear();ZIPTools.clear();window.removeEventListener("keydown",b.escKeyListener);document.getElementsByTagName("body").item(0).removeChild(b)}}function HomePreviewComponent(f,d,a,c,e){if(document.getElementById(f)){var b=this;this.createHomeRecorder().readHome(d,{homeLoaded:function(j){try{var g=document.getElementById(f);if(g){if(e&&e.navigationPanel!="none"&&e.navigationPanel!="default"){function i(k){DefaultUserPreferences.call(this);this.navigationPanel=k}i.prototype=Object.create(DefaultUserPreferences.prototype);i.prototype.constructor=i;i.prototype.getLocalizedString=function(k,l,m){if(k===HomeComponent3D&&l=="navigationPanel.innerHTML"){return this.navigationPanel}else{return UserPreferences.prototype.getLocalizedString.call(this,k,l,m)}};b.preferences=new i(e.navigationPanel)}else{b.preferences=new DefaultUserPreferences()}b.home=j;b.controller=new HomeController3D(j,b.preferences);b.component3D=b.createComponent3D(f,j,b.preferences,b.controller);b.prepareComponent(f,c,e?{roundsPerMinute:e.roundsPerMinute,navigationPanelVisible:e.navigationPanel&&e.navigationPanel!="none",aerialViewButtonId:e.aerialViewButtonId,virtualVisitButtonId:e.virtualVisitButtonId,levelsAndCamerasListId:e.levelsAndCamerasListId,level:e.level,selectableLevels:e.selectableLevels,camera:e.camera,selectableCameras:e.selectableCameras,activateCameraSwitchKey:e.activateCameraSwitchKey}:undefined)}}catch(h){a(h)}},homeError:function(g){a(g)},progression:c})}else{a("No canvas with id equal to "+f)}}HomePreviewComponent.prototype.createHomeRecorder=function(){return new HomeRecorder()};HomePreviewComponent.prototype.createComponent3D=function(a){return new HomeComponent3D(a,this.getHome(),this.getUserPreferences(),null,this.getController())};HomePreviewComponent.prototype.prepareComponent=function(q,m,u){var g=u&&u.roundsPerMinute?u.roundsPerMinute:0;this.startRotationAnimationAfterLoading=g!=0;if(u&&typeof u.navigationPanelVisible){this.getUserPreferences().setNavigationPanelVisible(u.navigationPanelVisible)}var r=this.getHome();if(r.structure){r.getEnvironment().setAllLevelsVisible(true)}else{var h=function(){r.getEnvironment().setAllLevelsVisible(r.getCamera() instanceof ObserverCamera)};h();r.addPropertyChangeListener(Home.CAMERA,h)}r.getEnvironment().setObserverCameraElevationAdjusted(true);this.trackFurnitureModels(m,g);var s=this;var e=function(){s.stopRotationAnimation();if(u&&u.aerialViewButtonId&&u.virtualVisitButtonId){if(r.getCamera()===r.getTopCamera()){document.getElementById(u.aerialViewButtonId).checked=true}else{document.getElementById(u.virtualVisitButtonId).checked=true}}};var x=function(){s.startRotationAnimationAfterLoading=false;r.setCamera(r.getCamera()===r.getTopCamera()?r.getObserverCamera():r.getTopCamera());e()};var b=document.getElementById(q);if(u===undefined||u.activateCameraSwitchKey===undefined||u.activateCameraSwitchKey){b.addEventListener("keydown",function(i){if(i.keyCode===32){x()}})}if(u&&u.aerialViewButtonId&&u.virtualVisitButtonId){var n=document.getElementById(u.aerialViewButtonId);n.addEventListener("change",function(){s.startRotationAnimationAfterLoading=false;r.setCamera(n.checked?r.getTopCamera():r.getObserverCamera())});var v=document.getElementById(u.virtualVisitButtonId);v.addEventListener("change",function(){s.startRotationAnimationAfterLoading=false;r.setCamera(v.checked?r.getObserverCamera():r.getTopCamera())});e();n.style.visibility="visible";v.style.visibility="visible";var f=function(z){var A=document.getElementsByTagName("label");for(var y=0;y<A.length;y++){if(A[y].getAttribute("for")==z){A[y].style.visibility="visible"}}};f(u.aerialViewButtonId);f(u.virtualVisitButtonId);r.addPropertyChangeListener("CAMERA",function(){e();if(r.structure&&u&&u.levelsAndCamerasListId){document.getElementById(u.levelsAndCamerasListId).disabled=r.getCamera()===r.getTopCamera()}})}if(u&&u.level){var d=r.getLevels();if(d.length>0){for(var o=0;o<d.length;o++){var a=d[o];if(a.isViewable()&&a.getName()==u.level){r.setSelectedLevel(a);break}}}}if(u&&u.camera){var t=r.getStoredCameras();if(t.length>0){for(var o=0;o<t.length;o++){var p=t[o];if(p.getName()==u.camera){this.getController().goToCamera(p);break}}}}if(u&&u.levelsAndCamerasListId){var w=document.getElementById(u.levelsAndCamerasListId);w.disabled=r.structure!==undefined&&r.getCamera()===r.getTopCamera();var d=r.getLevels();if(d.length>0){for(var o=0;o<d.length;o++){var a=d[o];if(a.isViewable()&&(!u.selectableLevels||u.selectableLevels.indexOf(a.getName())>=0)){var k=document.createElement("option");k.text=a.getName();k.level=a;w.add(k);if(a===r.getSelectedLevel()){w.selectedIndex=w.options.length-1}}}if(u.selectableCameras!==undefined){var t=r.getStoredCameras();if(t.length>0){var c=w.options.length>0;for(var o=0;o<t.length;o++){var p=t[o];if(u.selectableCameras.indexOf(p.getName())>=0){if(c){w.add(document.createElement("option"));c=false}var k=document.createElement("option");k.text=p.getName();k.camera=p;w.add(k)}}}}if(w.options.length>1){var l=this.getController();w.addEventListener("change",function(){s.startRotationAnimationAfterLoading=false;var i=w.options[w.selectedIndex];if(i.level!==undefined){r.setSelectedLevel(i.level)}else{if(i.camera!==undefined){l.goToCamera(i.camera)}}});w.style.visibility="visible"}}}if(g){var l=this.getController();l.goToCamera(r.getTopCamera());l.rotateCameraPitch(Math.PI/6-r.getCamera().getPitch());l.moveCamera(10000);l.moveCamera(-50);this.clickListener=function(i){s.startRotationAnimationAfterLoading=false;s.stopRotationAnimation()};b.addEventListener("keydown",this.clickListener);if(window.PointerEvent){b.addEventListener("pointerdown",this.clickListener);b.addEventListener("pointermove",this.clickListener)}else{b.addEventListener("mousedown",this.clickListener);b.addEventListener("touchstart",this.clickListener);b.addEventListener("touchmove",this.clickListener)}var j=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(var o=0;o<j.length;o++){if(window.PointerEvent){j[o].addEventListener("pointerdown",this.clickListener)}else{j[o].addEventListener("mousedown",this.clickListener)}}this.visibilityChanged=function(i){if(document.visibilityState=="hidden"){s.stopRotationAnimation()}};document.addEventListener("visibilitychange",this.visibilityChanged);document.getElementById(q).focus()}};HomePreviewComponent.prototype.getHome=function(){return this.home};HomePreviewComponent.prototype.getComponent3D=function(){return this.component3D};HomePreviewComponent.prototype.getController=function(){return this.controller};HomePreviewComponent.prototype.getUserPreferences=function(){return this.preferences};HomePreviewComponent.prototype.trackFurnitureModels=function(o,h){var u=[];var b={};var k={};var s=this.getHome();var m=s.getFurniture();for(var q=0;q<m.length;q++){var c=m[q];var f=[];if(c instanceof HomeFurnitureGroup){var g=c.getAllFurniture();for(var p=0;p<g.length;p++){var n=g[p];if(!(n instanceof HomeFurnitureGroup)){f.push(n)}}}else{f.push(c)}u.push.apply(u,f);for(var p=0;p<f.length;p++){var d=f[p].getModel();if(d.isJAREntry()){var e=d.getJAREntryURL();if(e in b){b[e]++}else{b[e]=1}}var t=d.getURL();if(t in k){k[t]++}else{k[t]=1}}}if(u.length===0){o(ModelLoader.READING_MODEL,undefined,1)}else{var a=0;var r=this;for(var q=0;q<u.length;q++){var l=function(i){ModelManager.getInstance().loadModel(i.getModel(),false,{modelUpdated:function(x){var j=i.getModel();if(j.isJAREntry()){var w=j.getJAREntryURL();if(--b[w]===0){ZIPTools.disposeZIP(w);delete b[w]}}var v=j.getURL();if(--k[v]===0){ModelManager.getInstance().unloadModel(j);delete k[v]}o(ModelLoader.READING_MODEL,i.getName(),++a/u.length);if(a===u.length){r.component3D.disposeGeometries();u=[];if(r.startRotationAnimationAfterLoading){delete r.startRotationAnimationAfterLoading;r.startRotationAnimation(h)}}},modelError:function(j){this.modelUpdated()},progression:function(){}})};l(u[q])}}};HomePreviewComponent.prototype.dispose=function(){this.stopRotationAnimation();if(this.component3D){if(this.clickListener){document.removeEventListener("visibilitychange",this.visibilityChanged);var b=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(var a=0;a<b.length;a++){if(window.PointerEvent){b[a].removeEventListener("pointerdown",this.clickListener)}else{b[a].removeEventListener("mousedown",this.clickListener)}}}this.component3D.dispose()}};HomePreviewComponent.prototype.startRotationAnimation=function(a){this.roundsPerMinute=a!==undefined?a:1;if(!this.rotationAnimationStarted){this.rotationAnimationStarted=true;this.animate()}};HomePreviewComponent.prototype.animate=function(){if(this.rotationAnimationStarted){var b=Date.now();if(this.lastRotationAnimationTime!==undefined){var a=this.roundsPerMinute*2*Math.PI/60000;var d=((b-this.lastRotationAnimationTime)*a)%(2*Math.PI);d-=this.home.getCamera().getYaw()-this.lastRotationAnimationYaw;if(d>0){this.controller.rotateCameraYaw(d)}}this.lastRotationAnimationTime=b;this.lastRotationAnimationYaw=this.home.getCamera().getYaw();var c=this;requestAnimationFrame(function(){c.animate()})}};HomePreviewComponent.prototype.stopRotationAnimation=function(){delete this.lastRotationAnimationTime;delete this.lastRotationAnimationYaw;delete this.rotationAnimationStarted};